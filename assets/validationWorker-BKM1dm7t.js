(function(){"use strict";var rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function en(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fo(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Vo={},Li=class bf{constructor(t,r=new Map,n=0){this.prefix=t,this._existing=r,this.counter=n}clone(){const{prefix:t,_existing:r,counter:n}=this;return new bf(t,new Map(r),n)}getId(t){const r=t&&this._existing.get(t);if(r)return r;const n=this.prefix+this.counter;return this.counter++,t&&this._existing.set(t,n),n}hasId(t){return this._existing.has(t)}getOldIds(){return[...this._existing.keys()]}};(function(e,t){if(e.setImmediate)return;var r=1,n={},i=!1,o=e.document,s;function a(v){typeof v!="function"&&(v=new Function(""+v));for(var _=new Array(arguments.length-1),w=0;w<_.length;w++)_[w]=arguments[w+1];var O={callback:v,args:_};return n[r]=O,s(r),r++}function l(v){delete n[v]}function c(v){var _=v.callback,w=v.args;switch(w.length){case 0:_();break;case 1:_(w[0]);break;case 2:_(w[0],w[1]);break;case 3:_(w[0],w[1],w[2]);break;default:_.apply(t,w);break}}function f(v){if(i)setTimeout(f,0,v);else{var _=n[v];if(_){i=!0;try{c(_)}finally{l(v),i=!1}}}}function d(){s=function(v){process.nextTick(function(){f(v)})}}function p(){if(e.postMessage&&!e.importScripts){var v=!0,_=e.onmessage;return e.onmessage=function(){v=!1},e.postMessage("","*"),e.onmessage=_,v}}function u(){var v="setImmediate$"+Math.random()+"$",_=function(w){w.source===e&&typeof w.data=="string"&&w.data.indexOf(v)===0&&f(+w.data.slice(v.length))};e.addEventListener?e.addEventListener("message",_,!1):e.attachEvent("onmessage",_),s=function(w){e.postMessage(v+w,"*")}}function h(){var v=new MessageChannel;v.port1.onmessage=function(_){var w=_.data;f(w)},s=function(_){v.port2.postMessage(_)}}function g(){var v=o.documentElement;s=function(_){var w=o.createElement("script");w.onreadystatechange=function(){f(_),w.onreadystatechange=null,v.removeChild(w),w=null},v.appendChild(w)}}function m(){s=function(v){setTimeout(f,0,v)}}var y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,{}.toString.call(e.process)==="[object process]"?d():p()?u():e.MessageChannel?h():o&&"onreadystatechange"in o.createElement("script")?g():m(),y.setImmediate=a,y.clearImmediate=l})(typeof self>"u"?rr:self);/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const Mi=self.crypto||self.msCrypto;var Cn=class{constructor(t){if(!(Mi&&Mi.subtle))throw new Error("crypto.subtle not found.");if(t==="sha256")this.algorithm={name:"SHA-256"};else if(t==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${t}".`);this._content=""}update(t){this._content+=t}async digest(){const t=new TextEncoder().encode(this._content),r=new Uint8Array(await Mi.subtle.digest(this.algorithm,t));let n="";for(let i=0;i<r.length;++i)n+=r[i].toString(16).padStart(2,"0");return n}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Ho=class{constructor(t){this.current=t.sort(),this.done=!1,this.dir=new Map;for(let r=0;r<t.length;++r)this.dir.set(t[r],!0)}hasNext(){return!this.done}next(){const{current:t,dir:r}=this,n=t.slice();let i=null,o=0;const s=t.length;for(let a=0;a<s;++a){const l=t[a],c=r.get(l);(i===null||l>i)&&(c&&a>0&&l>t[a-1]||!c&&a<s-1&&l>t[a+1])&&(i=l,o=a)}if(i===null)this.done=!0;else{const a=r.get(i)?o-1:o+1;t[o]=t[a],t[a]=i;for(const l of t)l>i&&r.set(l,!r.get(l))}return n}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const Ci="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",Ui="http://www.w3.org/2001/XMLSchema#string",at="NamedNode",nr="BlankNode",Un="Literal",Jo="DefaultGraph",jr={};(()=>{const e="(?:<([^:]+:[^>]*)>)",r="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",n=r+"0-9-·̀-ͯ‿-⁀",o="(_:(?:["+r+"0-9])(?:(?:["+n+".])*(?:["+n+"]))?)",s='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+e+")",c="(?:"+s+"(?:"+a+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",f="[ \\t]+",d="[ \\t]*",p="(?:"+e+"|"+o+")"+f,u=e+f,h="(?:"+e+"|"+o+"|"+c+")"+d,g="(?:\\.|(?:(?:"+e+"|"+o+")"+d+"\\.))";jr.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,jr.empty=new RegExp("^"+d+"$"),jr.quad=new RegExp("^"+d+p+u+h+g+d+"$")})();var qi=class Ti{static parse(t){const r=[],n={},i=t.split(jr.eoln);let o=0;for(const s of i){if(o++,jr.empty.test(s))continue;const a=s.match(jr.quad);if(a===null)throw new Error("N-Quads parse error on line "+o+".");const l={subject:null,predicate:null,object:null,graph:null};if(a[1]!==void 0?l.subject={termType:at,value:a[1]}:l.subject={termType:nr,value:a[2]},l.predicate={termType:at,value:a[3]},a[4]!==void 0?l.object={termType:at,value:a[4]}:a[5]!==void 0?l.object={termType:nr,value:a[5]}:(l.object={termType:Un,value:void 0,datatype:{termType:at}},a[7]!==void 0?l.object.datatype.value=a[7]:a[8]!==void 0?(l.object.datatype.value=Ci,l.object.language=a[8]):l.object.datatype.value=Ui,l.object.value=If(a[6])),a[9]!==void 0?l.graph={termType:at,value:a[9]}:a[10]!==void 0?l.graph={termType:nr,value:a[10]}:l.graph={termType:Jo,value:""},!(l.graph.value in n))n[l.graph.value]=[l],r.push(l);else{let c=!0;const f=n[l.graph.value];for(const d of f)if($f(d,l)){c=!1;break}c&&(f.push(l),r.push(l))}}return r}static serialize(t){Array.isArray(t)||(t=Ti.legacyDatasetToQuads(t));const r=[];for(const n of t)r.push(Ti.serializeQuad(n));return r.sort().join("")}static serializeQuadComponents(t,r,n,i){let o="";return t.termType===at?o+=`<${t.value}>`:o+=`${t.value}`,o+=` <${r.value}> `,n.termType===at?o+=`<${n.value}>`:n.termType===nr?o+=n.value:(o+=`"${Sf(n.value)}"`,n.datatype.value===Ci?n.language&&(o+=`@${n.language}`):n.datatype.value!==Ui&&(o+=`^^<${n.datatype.value}>`)),i.termType===at?o+=` <${i.value}>`:i.termType===nr&&(o+=` ${i.value}`),o+=` .
`,o}static serializeQuad(t){return Ti.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(t){const r=[],n={"blank node":nr,IRI:at,literal:Un};for(const i in t)t[i].forEach(s=>{const a={};for(const l in s){const c=s[l],f={termType:n[c.type],value:c.value};f.termType===Un&&(f.datatype={termType:at},"datatype"in c&&(f.datatype.value=c.datatype),"language"in c?("datatype"in c||(f.datatype.value=Ci),f.language=c.language):"datatype"in c||(f.datatype.value=Ui)),a[l]=f}i==="@default"?a.graph={termType:Jo,value:""}:a.graph={termType:i.startsWith("_:")?nr:at,value:i},r.push(a)});return r}};function $f(e,t){return!(e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType)||!(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value)?!1:e.object.termType!==Un?!0:e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value}const _f=/["\\\n\r]/g;function Sf(e){return e.replace(_f,function(t){switch(t){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const Of=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function If(e){return e.replace(Of,function(t,r,n,i){if(r)switch(r){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(i)throw new Error("Unsupported U escape")})}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const Go=Li,Ef=Cn,Pf=Ho,Bo=qi;var Ko=class{constructor({createMessageDigest:t=()=>new Ef("sha256"),canonicalIdMap:r=new Map,maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Go("_:c14n",r),this.createMessageDigest=t,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}async main(t){this.deepIterations=new Map,this.quads=t;for(const l of t)this._addBlankNodeQuadInfo({quad:l,component:l.subject}),this._addBlankNodeQuadInfo({quad:l,component:l.object}),this._addBlankNodeQuadInfo({quad:l,component:l.graph});const r=new Map,n=[...this.blankNodeInfo.keys()];let i=0;for(const l of n)++i%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:l,hashToBlankNodes:r});const o=[...r.keys()].sort(),s=[];for(const l of o){const c=r.get(l);if(c.length>1){s.push(c);continue}const f=c[0];this.canonicalIssuer.getId(f)}for(const l of s){const c=[];for(const f of l){if(this.canonicalIssuer.hasId(f))continue;const d=new Go("_:b");d.getId(f);const p=await this.hashNDegreeQuads(f,d);c.push(p)}c.sort(jf);for(const f of c){const d=f.issuer.getOldIds();for(const p of d)this.canonicalIssuer.getId(p)}}const a=[];for(const l of this.quads){const c=Bo.serializeQuadComponents(this._componentWithCanonicalId(l.subject),l.predicate,this._componentWithCanonicalId(l.object),this._componentWithCanonicalId(l.graph));a.push(c)}return a.sort(),a.join("")}async hashFirstDegreeQuads(t){const r=[],n=this.blankNodeInfo.get(t),i=n.quads;for(const s of i){const a={subject:null,predicate:s.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(t,s.subject,"subject"),a.object=this.modifyFirstDegreeComponent(t,s.object,"object"),a.graph=this.modifyFirstDegreeComponent(t,s.graph,"graph"),r.push(Bo.serializeQuad(a))}r.sort();const o=this.createMessageDigest();for(const s of r)o.update(s);return n.hash=await o.digest(),n.hash}async hashRelatedBlankNode(t,r,n,i){let o;this.canonicalIssuer.hasId(t)?o=this.canonicalIssuer.getId(t):n.hasId(t)?o=n.getId(t):o=this.blankNodeInfo.get(t).hash;const s=this.createMessageDigest();return s.update(i),i!=="g"&&s.update(this.getRelatedPredicate(r)),s.update(o),s.digest()}async hashNDegreeQuads(t,r){const n=this.deepIterations.get(t)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,n+1);const i=this.createMessageDigest(),o=await this.createHashToRelated(t,r),s=[...o.keys()].sort();for(const a of s){i.update(a);let l="",c;const f=new Pf(o.get(a));let d=0;for(;f.hasNext();){const p=f.next();++d%3===0&&await this._yield();let u=r.clone(),h="";const g=[];let m=!1;for(const y of p)if(this.canonicalIssuer.hasId(y)?h+=this.canonicalIssuer.getId(y):(u.hasId(y)||g.push(y),h+=u.getId(y)),l.length!==0&&h>l){m=!0;break}if(!m){for(const y of g){const v=await this.hashNDegreeQuads(y,u);if(h+=u.getId(y),h+=`<${v.hash}>`,u=v.issuer,l.length!==0&&h>l){m=!0;break}}m||(l.length===0||h<l)&&(l=h,c=u)}}i.update(l),r=c}return{hash:await i.digest(),issuer:r}}modifyFirstDegreeComponent(t,r){return r.termType!=="BlankNode"?r:{termType:"BlankNode",value:r.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}async createHashToRelated(t,r){const n=new Map,i=this.blankNodeInfo.get(t).quads;let o=0;for(const s of i)++o%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:s,component:s.subject,position:"s",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:s,component:s.object,position:"o",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:s,component:s.graph,position:"g",id:t,issuer:r,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:t,hashToBlankNodes:r}){const n=await this.hashFirstDegreeQuads(t),i=r.get(n);i?i.push(t):r.set(n,[t])}_addBlankNodeQuadInfo({quad:t,component:r}){if(r.termType!=="BlankNode")return;const n=r.value,i=this.blankNodeInfo.get(n);i?i.quads.add(t):this.blankNodeInfo.set(n,{quads:new Set([t]),hash:null})}async _addRelatedBlankNodeHash({quad:t,component:r,position:n,id:i,issuer:o,hashToRelated:s}){if(!(r.termType==="BlankNode"&&r.value!==i))return;const a=r.value,l=await this.hashRelatedBlankNode(a,t,o,n),c=s.get(l);c?c.push(a):s.set(l,[a])}_componentWithCanonicalId(t){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}async _yield(){return new Promise(t=>setImmediate(t))}};function jf(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const xf=Cn,Nf=Ko;var kf=class extends Nf{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new xf("sha1")}modifyFirstDegreeComponent(t,r,n){return r.termType!=="BlankNode"?r:n==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:r.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}async createHashToRelated(t,r){const n=new Map,i=this.blankNodeInfo.get(t).quads;let o=0;for(const s of i){let a,l;if(s.subject.termType==="BlankNode"&&s.subject.value!==t)l=s.subject.value,a="p";else if(s.object.termType==="BlankNode"&&s.object.value!==t)l=s.object.value,a="r";else continue;++o%100===0&&await this._yield();const c=await this.hashRelatedBlankNode(l,s,r,a),f=n.get(c);f?f.push(l):n.set(c,[l])}return n}};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const Wo=Li,Df=Cn,Af=Ho,Xo=qi;var Qo=class{constructor({createMessageDigest:t=()=>new Df("sha256"),canonicalIdMap:r=new Map,maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Wo("_:c14n",r),this.createMessageDigest=t,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}main(t){this.deepIterations=new Map,this.quads=t;for(const a of t)this._addBlankNodeQuadInfo({quad:a,component:a.subject}),this._addBlankNodeQuadInfo({quad:a,component:a.object}),this._addBlankNodeQuadInfo({quad:a,component:a.graph});const r=new Map,n=[...this.blankNodeInfo.keys()];for(const a of n)this._hashAndTrackBlankNode({id:a,hashToBlankNodes:r});const i=[...r.keys()].sort(),o=[];for(const a of i){const l=r.get(a);if(l.length>1){o.push(l);continue}const c=l[0];this.canonicalIssuer.getId(c)}for(const a of o){const l=[];for(const c of a){if(this.canonicalIssuer.hasId(c))continue;const f=new Wo("_:b");f.getId(c);const d=this.hashNDegreeQuads(c,f);l.push(d)}l.sort(Rf);for(const c of l){const f=c.issuer.getOldIds();for(const d of f)this.canonicalIssuer.getId(d)}}const s=[];for(const a of this.quads){const l=Xo.serializeQuadComponents(this._componentWithCanonicalId({component:a.subject}),a.predicate,this._componentWithCanonicalId({component:a.object}),this._componentWithCanonicalId({component:a.graph}));s.push(l)}return s.sort(),s.join("")}hashFirstDegreeQuads(t){const r=[],n=this.blankNodeInfo.get(t),i=n.quads;for(const s of i){const a={subject:null,predicate:s.predicate,object:null,graph:null};a.subject=this.modifyFirstDegreeComponent(t,s.subject,"subject"),a.object=this.modifyFirstDegreeComponent(t,s.object,"object"),a.graph=this.modifyFirstDegreeComponent(t,s.graph,"graph"),r.push(Xo.serializeQuad(a))}r.sort();const o=this.createMessageDigest();for(const s of r)o.update(s);return n.hash=o.digest(),n.hash}hashRelatedBlankNode(t,r,n,i){let o;this.canonicalIssuer.hasId(t)?o=this.canonicalIssuer.getId(t):n.hasId(t)?o=n.getId(t):o=this.blankNodeInfo.get(t).hash;const s=this.createMessageDigest();return s.update(i),i!=="g"&&s.update(this.getRelatedPredicate(r)),s.update(o),s.digest()}hashNDegreeQuads(t,r){const n=this.deepIterations.get(t)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(t,n+1);const i=this.createMessageDigest(),o=this.createHashToRelated(t,r),s=[...o.keys()].sort();for(const a of s){i.update(a);let l="",c;const f=new Af(o.get(a));for(;f.hasNext();){const d=f.next();let p=r.clone(),u="";const h=[];let g=!1;for(const m of d)if(this.canonicalIssuer.hasId(m)?u+=this.canonicalIssuer.getId(m):(p.hasId(m)||h.push(m),u+=p.getId(m)),l.length!==0&&u>l){g=!0;break}if(!g){for(const m of h){const y=this.hashNDegreeQuads(m,p);if(u+=p.getId(m),u+=`<${y.hash}>`,p=y.issuer,l.length!==0&&u>l){g=!0;break}}g||(l.length===0||u<l)&&(l=u,c=p)}}i.update(l),r=c}return{hash:i.digest(),issuer:r}}modifyFirstDegreeComponent(t,r){return r.termType!=="BlankNode"?r:{termType:"BlankNode",value:r.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return`<${t.predicate.value}>`}createHashToRelated(t,r){const n=new Map,i=this.blankNodeInfo.get(t).quads;for(const o of i)this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:t,issuer:r,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:t,issuer:r,hashToRelated:n});return n}_hashAndTrackBlankNode({id:t,hashToBlankNodes:r}){const n=this.hashFirstDegreeQuads(t),i=r.get(n);i?i.push(t):r.set(n,[t])}_addBlankNodeQuadInfo({quad:t,component:r}){if(r.termType!=="BlankNode")return;const n=r.value,i=this.blankNodeInfo.get(n);i?i.quads.add(t):this.blankNodeInfo.set(n,{quads:new Set([t]),hash:null})}_addRelatedBlankNodeHash({quad:t,component:r,position:n,id:i,issuer:o,hashToRelated:s}){if(!(r.termType==="BlankNode"&&r.value!==i))return;const a=r.value,l=this.hashRelatedBlankNode(a,t,o,n),c=s.get(l);c?c.push(a):s.set(l,[a])}_componentWithCanonicalId({component:t}){return t.termType==="BlankNode"&&!t.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(t.value)}:t}};function Rf(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const Tf=Cn,Lf=Qo;var Mf=class extends Lf{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new Tf("sha1")}modifyFirstDegreeComponent(t,r,n){return r.termType!=="BlankNode"?r:n==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:r.value===t?"_:a":"_:z"}}getRelatedPredicate(t){return t.predicate.value}createHashToRelated(t,r){const n=new Map,i=this.blankNodeInfo.get(t).quads;for(const o of i){let s,a;if(o.subject.termType==="BlankNode"&&o.subject.value!==t)a=o.subject.value,s="p";else if(o.object.termType==="BlankNode"&&o.object.value!==t)a=o.object.value,s="r";else continue;const l=this.hashRelatedBlankNode(a,o,r,s),c=n.get(l);c?c.push(a):n.set(l,[a])}return n}},Cf={},Uf=Object.freeze({__proto__:null,default:Cf}),qf=Fo(Uf);(function(e){const t=Ko,r=kf,n=Qo,i=Mf;let o;try{o=qf}catch{}function s(a){return Array.isArray(a)?a:e.NQuads.legacyDatasetToQuads(a)}e.NQuads=qi,e.IdentifierIssuer=Li,e._rdfCanonizeNative=function(a){return a&&(o=a),o},e.canonize=async function(a,l){const c=s(a);if(l.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((f,d)=>o.canonize(c,l,(p,u)=>p?d(p):f(u)))}if(l.algorithm==="URDNA2015")return new t(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new r(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},e._canonizeSync=function(a,l){const c=s(a);if(l.useNative){if(!o)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return o.canonizeSync(c,l)}if(l.algorithm==="URDNA2015")return new n(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new i(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(Vo);var zi=Vo;const Ke={};var Fe=Ke;Ke.isArray=Array.isArray,Ke.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",Ke.isDouble=e=>Ke.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),Ke.isEmptyObject=e=>Ke.isObject(e)&&Object.keys(e).length===0,Ke.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",Ke.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),Ke.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",Ke.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",Ke.isUndefined=e=>typeof e>"u";const ir=Fe,kt={};var Dt=kt;kt.isSubject=e=>ir.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)?Object.keys(e).length>1||!("@id"in e):!1,kt.isSubjectReference=e=>ir.isObject(e)&&Object.keys(e).length===1&&"@id"in e,kt.isValue=e=>ir.isObject(e)&&"@value"in e,kt.isList=e=>ir.isObject(e)&&"@list"in e,kt.isGraph=e=>ir.isObject(e)&&"@graph"in e&&Object.keys(e).filter(t=>t!=="@id"&&t!=="@index").length===1,kt.isSimpleGraph=e=>kt.isGraph(e)&&!("@id"in e),kt.isBlankNode=e=>{if(ir.isObject(e)){if("@id"in e){const t=e["@id"];return!ir.isString(t)||t.indexOf("_:")===0}return Object.keys(e).length===0||!("@value"in e||"@set"in e||"@list"in e)}return!1};var We=class extends Error{constructor(t="An unspecified JSON-LD error occurred.",r="jsonld.Error",n={}){super(t),this.name=r,this.message=t,this.details=n}};const tn=Dt,Ne=Fe,Zo=zi.IdentifierIssuer,zf=We,Ff=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Vf=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,Hf=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,Jf=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,Gf=/^@[a-zA-Z]+$/,Yo={headers:{accept:"application/ld+json, application/json"}},se={};var Xe=se;se.IdentifierIssuer=Zo,se.REGEX_BCP47=Ff,se.REGEX_KEYWORD=Gf,se.clone=function(e){if(e&&typeof e=="object"){let t;if(Ne.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=se.clone(e[r])}else if(e instanceof Map){t=new Map;for(const[r,n]of e)t.set(r,se.clone(n))}else if(e instanceof Set){t=new Set;for(const r of e)t.add(se.clone(r))}else if(Ne.isObject(e)){t={};for(const r in e)t[r]=se.clone(e[r])}else t=e.toString();return t}return e},se.asArray=function(e){return Array.isArray(e)?e:[e]},se.buildHeaders=(e={})=>{if(Object.keys(e).some(r=>r.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+Yo.headers.accept+'" is supported.');return Object.assign({Accept:Yo.headers.accept},e)},se.parseLinkHeader=e=>{const t={},r=e.match(Vf);for(let n=0;n<r.length;++n){let i=r[n].match(Hf);if(!i)continue;const o={target:i[1]},s=i[2];for(;i=Jf.exec(s);)o[i[1]]=i[2]===void 0?i[3]:i[2];const a=o.rel||"";Array.isArray(t[a])?t[a].push(o):t.hasOwnProperty(a)?t[a]=[t[a],o]:t[a]=o}return t},se.validateTypeValue=(e,t)=>{if(!Ne.isString(e)&&!(Ne.isArray(e)&&e.every(r=>Ne.isString(r)))){if(t&&Ne.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&se.asArray(e["@default"]).every(r=>Ne.isString(r)))return}throw new zf('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},se.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const r=e[t];return!Ne.isArray(r)||r.length>0}return!1},se.hasValue=(e,t,r)=>{if(se.hasProperty(e,t)){let n=e[t];const i=tn.isList(n);if(Ne.isArray(n)||i){i&&(n=n["@list"]);for(let o=0;o<n.length;++o)if(se.compareValues(r,n[o]))return!0}else if(!Ne.isArray(r))return se.compareValues(r,n)}return!1},se.addValue=(e,t,r,n)=>{if(n=n||{},"propertyIsArray"in n||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),"prependValue"in n||(n.prependValue=!1),n.valueIsArray)e[t]=r;else if(Ne.isArray(r)){r.length===0&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),n.prependValue&&(r=r.concat(e[t]),e[t]=[]);for(let i=0;i<r.length;++i)se.addValue(e,t,r[i],n)}else if(e.hasOwnProperty(t)){const i=!n.allowDuplicate&&se.hasValue(e,t,r);!Ne.isArray(e[t])&&(!i||n.propertyIsArray)&&(e[t]=[e[t]]),i||(n.prependValue?e[t].unshift(r):e[t].push(r))}else e[t]=n.propertyIsArray?[r]:r},se.getValues=(e,t)=>[].concat(e[t]||[]),se.removeProperty=(e,t)=>{delete e[t]},se.removeValue=(e,t,r,n)=>{n=n||{},"propertyIsArray"in n||(n.propertyIsArray=!1);const i=se.getValues(e,t).filter(o=>!se.compareValues(o,r));i.length===0?se.removeProperty(e,t):i.length===1&&!n.propertyIsArray?e[t]=i[0]:e[t]=i},se.relabelBlankNodes=(e,t)=>{t=t||{};const r=t.issuer||new Zo("_:b");return qn(r,e)},se.compareValues=(e,t)=>e===t||tn.isValue(e)&&tn.isValue(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:Ne.isObject(e)&&"@id"in e&&Ne.isObject(t)&&"@id"in t?e["@id"]===t["@id"]:!1,se.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1;function qn(e,t){if(Ne.isArray(t))for(let r=0;r<t.length;++r)t[r]=qn(e,t[r]);else if(tn.isList(t))t["@list"]=qn(e,t["@list"]);else if(Ne.isObject(t)){tn.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const r=Object.keys(t).sort();for(let n=0;n<r.length;++n){const i=r[n];i!=="@id"&&(t[i]=qn(e,t[i]))}}return t}const sr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",zn="http://www.w3.org/2001/XMLSchema#";var Fi={LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF_LIST:sr+"List",RDF_FIRST:sr+"first",RDF_REST:sr+"rest",RDF_NIL:sr+"nil",RDF_TYPE:sr+"type",RDF_JSON_LITERAL:sr+"JSON",RDF_LANGSTRING:sr+"langString",XSD_BOOLEAN:zn+"boolean",XSD_DOUBLE:zn+"double",XSD_INTEGER:zn+"integer",XSD_STRING:zn+"string"},Vi,ea;function ta(){return ea||(ea=1,Vi=class{constructor(){this._requests={}}wrapLoader(t){const r=this;return r._loader=t,function(){return r.add.apply(r,arguments)}}async add(t){let r=this._requests[t];if(r)return Promise.resolve(r);r=this._requests[t]=this._loader(t);try{return await r}finally{delete this._requests[t]}}}),Vi}const Fn=Fe,ke={};var Ft=ke;ke.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},ke.parse=(e,t)=>{const r={},n=ke.parsers[t||"full"],i=n.regex.exec(e);let o=n.keys.length;for(;o--;)r[n.keys[o]]=i[o]===void 0?null:i[o];return(r.scheme==="https"&&r.port==="443"||r.scheme==="http"&&r.port==="80")&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=ke.removeDotSegments(r.path),r},ke.prependBase=(e,t)=>{if(e===null||ke.isAbsolute(t))return t;(!e||Fn.isString(e))&&(e=ke.parse(e||""));const r=ke.parse(t),n={protocol:e.protocol||""};if(r.authority!==null)n.authority=r.authority,n.path=r.path,n.query=r.query;else if(n.authority=e.authority,r.path==="")n.path=e.path,r.query!==null?n.query=r.query:n.query=e.query;else{if(r.path.indexOf("/")===0)n.path=r.path;else{let o=e.path;o=o.substr(0,o.lastIndexOf("/")+1),(o.length>0||e.authority)&&o.substr(-1)!=="/"&&(o+="/"),o+=r.path,n.path=o}n.query=r.query}r.path!==""&&(n.path=ke.removeDotSegments(n.path));let i=n.protocol;return n.authority!==null&&(i+="//"+n.authority),i+=n.path,n.query!==null&&(i+="?"+n.query),r.fragment!==null&&(i+="#"+r.fragment),i===""&&(i="./"),i},ke.removeBase=(e,t)=>{if(e===null)return t;(!e||Fn.isString(e))&&(e=ke.parse(e||""));let r="";if(e.href!==""?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),t.indexOf(r)!==0)return t;const n=ke.parse(t.substr(r.length)),i=e.normalizedPath.split("/"),o=n.normalizedPath.split("/"),s=n.fragment||n.query?0:1;for(;i.length>0&&o.length>s&&i[0]===o[0];)i.shift(),o.shift();let a="";if(i.length>0){i.pop();for(let l=0;l<i.length;++l)a+="../"}return a+=o.join("/"),n.query!==null&&(a+="?"+n.query),n.fragment!==null&&(a+="#"+n.fragment),a===""&&(a="./"),a},ke.removeDotSegments=e=>{if(e.length===0)return"";const t=e.split("/"),r=[];for(;t.length>0;){const n=t.shift(),i=t.length===0;if(n==="."){i&&r.push("");continue}if(n===".."){r.pop(),i&&r.push("");continue}r.push(n)}return e[0]==="/"&&r.length>0&&r[0]!==""&&r.unshift(""),r.length===1&&r[0]===""?"/":r.join("/")};const Bf=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;ke.isAbsolute=e=>Fn.isString(e)&&Bf.test(e),ke.isRelative=e=>Fn.isString(e);const{parseLinkHeader:Kf,buildHeaders:Wf}=Xe,{LINK_HEADER_CONTEXT:Xf}=Fi,rn=We,Qf=ta(),{prependBase:Zf}=Ft,Yf=/(^|(\r\n))link:/i;var ed=({secure:e,headers:t={},xhr:r}={headers:{}})=>{return t=Wf(t),new Qf().wrapLoader(i);async function i(o){if(o.indexOf("http:")!==0&&o.indexOf("https:")!==0)throw new rn('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&o.indexOf("https")!==0)throw new rn(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:o});let s;try{s=await td(r,o,t)}catch(d){throw new rn("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:d})}if(s.status>=400)throw new rn("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:s.status});let a={contextUrl:null,documentUrl:o,document:s.response},l=null;const c=s.getResponseHeader("Content-Type");let f;if(Yf.test(s.getAllResponseHeaders())&&(f=s.getResponseHeader("Link")),f&&c!=="application/ld+json"){const d=Kf(f),p=d[Xf];if(Array.isArray(p))throw new rn("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});p&&(a.contextUrl=p.target),l=d.alternate,l&&l.type=="application/ld+json"&&!(c||"").match(/^application\/(\w*\+)?json$/)&&(a=await i(Zf(o,l.target)))}return a}};function td(e,t,r){e=e||XMLHttpRequest;const n=new e;return new Promise((i,o)=>{n.onload=()=>i(n),n.onerror=s=>o(s),n.open("GET",t,!0);for(const s in r)n.setRequestHeader(s,r[s]);n.send()})}const rd=ed,Hi={};var nd=Hi;Hi.setupDocumentLoaders=function(e){typeof XMLHttpRequest<"u"&&(e.documentLoaders.xhr=rd,e.useDocumentLoader("xhr"))},Hi.setupGlobals=function(e){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})};var Ji,ra;function id(){return ra||(ra=1,Ji=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ji}var sd=ie;ie.Node=or,ie.create=ie;function ie(e){var t=this;if(t instanceof ie||(t=new ie),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}ie.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},ie.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},ie.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},ie.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)ad(this,arguments[e]);return this.length},ie.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)cd(this,arguments[e]);return this.length},ie.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},ie.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},ie.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next},ie.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev},ie.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value},ie.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value},ie.prototype.map=function(e,t){t=t||this;for(var r=new ie,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r},ie.prototype.mapReverse=function(e,t){t=t||this;for(var r=new ie,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r},ie.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=e(r,n.value,i),n=n.next;return r},ie.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=e(r,n.value,i),n=n.prev;return r},ie.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e},ie.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e},ie.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ie;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(;i!==null&&n<t;n++,i=i.next)r.push(i.value);return r},ie.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new ie;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;i!==null&&n>t;n--)i=i.prev;for(;i!==null&&n>e;n--,i=i.prev)r.push(i.value);return r},ie.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;i!==null&&n<e;n++)i=i.next;for(var o=[],n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=od(this,i,r[n]);return o},ie.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function od(e,t,r){var n=t===e.head?new or(r,null,t,e):new or(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function ad(e,t){e.tail=new or(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function cd(e,t){e.head=new or(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function or(e,t,r,n){if(!(this instanceof or))return new or(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{id()(ie)}catch{}const ld=sd,ar=Symbol("max"),At=Symbol("length"),xr=Symbol("lengthCalculator"),nn=Symbol("allowStale"),cr=Symbol("maxAge"),Rt=Symbol("dispose"),na=Symbol("noDisposeOnSet"),Ie=Symbol("lruList"),ct=Symbol("cache"),ia=Symbol("updateAgeOnGet"),Gi=()=>1;class fd{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ar]=t.max||1/0;const r=t.length||Gi;if(this[xr]=typeof r!="function"?Gi:r,this[nn]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[cr]=t.maxAge||0,this[Rt]=t.dispose,this[na]=t.noDisposeOnSet||!1,this[ia]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ar]=t||1/0,sn(this)}get max(){return this[ar]}set allowStale(t){this[nn]=!!t}get allowStale(){return this[nn]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[cr]=t,sn(this)}get maxAge(){return this[cr]}set lengthCalculator(t){typeof t!="function"&&(t=Gi),t!==this[xr]&&(this[xr]=t,this[At]=0,this[Ie].forEach(r=>{r.length=this[xr](r.value,r.key),this[At]+=r.length})),sn(this)}get lengthCalculator(){return this[xr]}get length(){return this[At]}get itemCount(){return this[Ie].length}rforEach(t,r){r=r||this;for(let n=this[Ie].tail;n!==null;){const i=n.prev;sa(this,t,n,r),n=i}}forEach(t,r){r=r||this;for(let n=this[Ie].head;n!==null;){const i=n.next;sa(this,t,n,r),n=i}}keys(){return this[Ie].toArray().map(t=>t.key)}values(){return this[Ie].toArray().map(t=>t.value)}reset(){this[Rt]&&this[Ie]&&this[Ie].length&&this[Ie].forEach(t=>this[Rt](t.key,t.value)),this[ct]=new Map,this[Ie]=new ld,this[At]=0}dump(){return this[Ie].map(t=>Vn(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ie]}set(t,r,n){if(n=n||this[cr],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,o=this[xr](r,t);if(this[ct].has(t)){if(o>this[ar])return Nr(this,this[ct].get(t)),!1;const l=this[ct].get(t).value;return this[Rt]&&(this[na]||this[Rt](t,l.value)),l.now=i,l.maxAge=n,l.value=r,this[At]+=o-l.length,l.length=o,this.get(t),sn(this),!0}const s=new dd(t,r,o,i,n);return s.length>this[ar]?(this[Rt]&&this[Rt](t,r),!1):(this[At]+=s.length,this[Ie].unshift(s),this[ct].set(t,this[Ie].head),sn(this),!0)}has(t){if(!this[ct].has(t))return!1;const r=this[ct].get(t).value;return!Vn(this,r)}get(t){return Bi(this,t,!0)}peek(t){return Bi(this,t,!1)}pop(){const t=this[Ie].tail;return t?(Nr(this,t),t.value):null}del(t){Nr(this,this[ct].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const i=t[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ct].forEach((t,r)=>Bi(this,r,!1))}}const Bi=(e,t,r)=>{const n=e[ct].get(t);if(n){const i=n.value;if(Vn(e,i)){if(Nr(e,n),!e[nn])return}else r&&(e[ia]&&(n.value.now=Date.now()),e[Ie].unshiftNode(n));return i.value}},Vn=(e,t)=>{if(!t||!t.maxAge&&!e[cr])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[cr]&&r>e[cr]},sn=e=>{if(e[At]>e[ar])for(let t=e[Ie].tail;e[At]>e[ar]&&t!==null;){const r=t.prev;Nr(e,t),t=r}},Nr=(e,t)=>{if(t){const r=t.value;e[Rt]&&e[Rt](r.key,r.value),e[At]-=r.length,e[ct].delete(r.key),e[Ie].removeNode(t)}};class dd{constructor(t,r,n,i,o){this.key=t,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}}const sa=(e,t,r,n)=>{let i=r.value;Vn(e,i)&&(Nr(e,r),e[nn]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};var oa=fd;const ud=oa,pd=10;var hd=class{constructor({document:t}){this.document=t,this.cache=new ud({max:pd})}getProcessed(t){return this.cache.get(t)}setProcessed(t,r){this.cache.set(t,r)}};const{isArray:Ki,isObject:on,isString:Hn}=Fe,{asArray:md}=Xe,{prependBase:Wi}=Ft,an=We,aa=hd,ca=10;var yd=class{constructor({sharedCache:t}){this.perOpCache=new Map,this.sharedCache=t}async resolve({activeCtx:t,context:r,documentLoader:n,base:i,cycles:o=new Set}){r&&on(r)&&r["@context"]&&(r=r["@context"]),r=md(r);const s=[];for(const a of r){if(Hn(a)){let f=this._get(a);f||(f=await this._resolveRemoteContext({activeCtx:t,url:a,documentLoader:n,base:i,cycles:o})),Ki(f)?s.push(...f):s.push(f);continue}if(a===null){s.push(new aa({document:null}));continue}on(a)||gd(r);const l=JSON.stringify(a);let c=this._get(l);c||(c=new aa({document:a}),this._cacheResolvedContext({key:l,resolved:c,tag:"static"})),s.push(c)}return s}_get(t){let r=this.perOpCache.get(t);if(!r){const n=this.sharedCache.get(t);n&&(r=n.get("static"),r&&this.perOpCache.set(t,r))}return r}_cacheResolvedContext({key:t,resolved:r,tag:n}){if(this.perOpCache.set(t,r),n!==void 0){let i=this.sharedCache.get(t);i||(i=new Map,this.sharedCache.set(t,i)),i.set(n,r)}return r}async _resolveRemoteContext({activeCtx:t,url:r,documentLoader:n,base:i,cycles:o}){r=Wi(i,r);const{context:s,remoteDoc:a}=await this._fetchContext({activeCtx:t,url:r,documentLoader:n,cycles:o});i=a.documentUrl||r,Xi({context:s,base:i});const l=await this.resolve({activeCtx:t,context:s,documentLoader:n,base:i,cycles:o});return this._cacheResolvedContext({key:r,resolved:l,tag:a.tag}),l}async _fetchContext({activeCtx:t,url:r,documentLoader:n,cycles:i}){if(i.size>ca)throw new an("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:ca});if(i.has(r))throw new an("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:t.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:r});i.add(r);let o,s;try{s=await n(r),o=s.document||null,Hn(o)&&(o=JSON.parse(o))}catch(a){throw new an(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${r}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:r,cause:a})}if(!on(o))throw new an(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${r}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:r});return"@context"in o?o={"@context":o["@context"]}:o={"@context":{}},s.contextUrl&&(Ki(o["@context"])||(o["@context"]=[o["@context"]]),o["@context"].push(s.contextUrl)),{context:o,remoteDoc:s}}};function gd(e){throw new an("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function Xi({context:e,base:t}){if(!e)return;const r=e["@context"];if(Hn(r)){e["@context"]=Wi(t,r);return}if(Ki(r)){for(let n=0;n<r.length;++n){const i=r[n];if(Hn(i)){r[n]=Wi(t,i);continue}on(i)&&Xi({context:{"@context":i},base:t})}return}if(on(r))for(const n in r)Xi({context:r[n],base:t})}var vd=zi.NQuads;const Qi=We,{isArray:wd}=Fe,{asArray:la}=Xe,Ve={};var cn=Ve;Ve.defaultEventHandler=null,Ve.setupEventHandler=({options:e={}})=>{const t=[].concat(e.safe?Ve.safeEventHandler:[],e.eventHandler?la(e.eventHandler):[],Ve.defaultEventHandler?Ve.defaultEventHandler:[]);return t.length===0?null:t},Ve.handleEvent=({event:e,options:t})=>{fa({event:e,handlers:t.eventHandler})};function fa({event:e,handlers:t}){let r=!0;for(let n=0;r&&n<t.length;++n){r=!1;const i=t[n];if(wd(i))r=fa({event:e,handlers:i});else if(typeof i=="function")i({event:e,next:()=>{r=!0}});else if(typeof i=="object")e.code in i?i[e.code]({event:e,next:()=>{r=!0}}):r=!0;else throw new Qi("Invalid event handler.","jsonld.InvalidEventHandler",{event:e})}return r}const bd=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);Ve.safeEventHandler=function({event:t,next:r}){if(t.level==="warning"&&bd.has(t.code))throw new Qi("Safe mode validation error.","jsonld.ValidationError",{event:t});r()},Ve.logEventHandler=function({event:t,next:r}){console.log(`EVENT: ${t.message}`,{event:t}),r()},Ve.logWarningEventHandler=function({event:t,next:r}){t.level==="warning"&&console.warn(`WARNING: ${t.message}`,{event:t}),r()},Ve.unhandledEventHandler=function({event:t}){throw new Qi("No handler for event.","jsonld.UnhandledEvent",{event:t})},Ve.setDefaultEventHandler=function({eventHandler:e}={}){Ve.defaultEventHandler=e?la(e):null};const da=Xe,J=We,{isArray:ua,isObject:Vt,isString:Me,isUndefined:$d}=Fe,{isAbsolute:lr,isRelative:_d,prependBase:ln}=Ft,{handleEvent:kr}=cn,{REGEX_BCP47:Sd,REGEX_KEYWORD:Jn,asArray:pa,compareShortestLeast:Od}=Xe,Gn=new Map,Id=1e4,de={};var fr=de;de.process=async({activeCtx:e,localCtx:t,options:r,propagate:n=!0,overrideProtected:i=!1,cycles:o=new Set})=>{if(Vt(t)&&"@context"in t&&ua(t["@context"])&&(t=t["@context"]),pa(t).length===0)return e;const a=[],l=[({event:p,next:u})=>{a.push(p),u()}];r.eventHandler&&l.push(r.eventHandler);const c=r;r={...r,eventHandler:l};const f=await r.contextResolver.resolve({activeCtx:e,context:t,documentLoader:r.documentLoader,base:r.base});Vt(f[0].document)&&typeof f[0].document["@propagate"]=="boolean"&&(n=f[0].document["@propagate"]);let d=e;!n&&!d.previousContext&&(d=d.clone(),d.previousContext=e);for(const p of f){let{document:u}=p;if(e=d,u===null){if(!i&&Object.keys(e.protected).length!==0)throw new J("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});d=e=de.getInitialContext(r).clone();continue}const h=p.getProcessed(e);if(h){if(c.eventHandler)for(const m of h.events)kr({event:m,options:c});d=e=h.context;continue}if(Vt(u)&&"@context"in u&&(u=u["@context"]),!Vt(u))throw new J("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u});d=d.clone();const g=new Map;if("@version"in u){if(u["@version"]!==1.1)throw new J("Unsupported JSON-LD version: "+u["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:u});if(e.processingMode&&e.processingMode==="json-ld-1.0")throw new J("@version: "+u["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:u});d.processingMode="json-ld-1.1",d["@version"]=u["@version"],g.set("@version",!0)}if(d.processingMode=d.processingMode||e.processingMode,"@base"in u){let m=u["@base"];if(!(m===null||lr(m)))if(_d(m))m=ln(d["@base"],m);else throw new J('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:u});d["@base"]=m,g.set("@base",!0)}if("@vocab"in u){const m=u["@vocab"];if(m===null)delete d["@vocab"];else if(Me(m)){if(!lr(m)&&de.processingMode(d,1))throw new J('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});{const y=Dr(d,m,{vocab:!0,base:!0},void 0,void 0,r);lr(y)||r.eventHandler&&kr({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:y}},options:r}),d["@vocab"]=y}}else throw new J('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:u});g.set("@vocab",!0)}if("@language"in u){const m=u["@language"];if(m===null)delete d["@language"];else if(Me(m))m.match(Sd)||r.eventHandler&&kr({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:m}},options:r}),d["@language"]=m.toLowerCase();else throw new J('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:u});g.set("@language",!0)}if("@direction"in u){const m=u["@direction"];if(e.processingMode==="json-ld-1.0")throw new J("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:u});if(m===null)delete d["@direction"];else{if(m!=="ltr"&&m!=="rtl")throw new J('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:u});d["@direction"]=m}g.set("@direction",!0)}if("@propagate"in u){const m=u["@propagate"];if(e.processingMode==="json-ld-1.0")throw new J("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:u});if(typeof m!="boolean")throw new J("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});g.set("@propagate",!0)}if("@import"in u){const m=u["@import"];if(e.processingMode==="json-ld-1.0")throw new J("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:u});if(!Me(m))throw new J("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const y=await r.contextResolver.resolve({activeCtx:e,context:m,documentLoader:r.documentLoader,base:r.base});if(y.length!==1)throw new J("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const v=y[0].getProcessed(e);if(v)u=v;else{const _=y[0].document;if("@import"in _)throw new J("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const w in _)u.hasOwnProperty(w)||(u[w]=_[w]);y[0].setProcessed(e,u)}g.set("@import",!0)}g.set("@protected",u["@protected"]||!1);for(const m in u)if(de.createTermDefinition({activeCtx:d,localCtx:u,term:m,defined:g,options:r,overrideProtected:i}),Vt(u[m])&&"@context"in u[m]){const y=u[m]["@context"];let v=!0;if(Me(y)){const _=ln(r.base,y);o.has(_)?v=!1:o.add(_)}if(v)try{await de.process({activeCtx:d.clone(),localCtx:u[m]["@context"],overrideProtected:!0,options:r,cycles:o})}catch{throw new J("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:u[m]["@context"],term:m})}}p.setProcessed(e,{context:d,events:a})}return d},de.createTermDefinition=({activeCtx:e,localCtx:t,term:r,defined:n,options:i,overrideProtected:o=!1})=>{if(n.has(r)){if(n.get(r))return;throw new J("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}n.set(r,!1);let s;if(t.hasOwnProperty(r)&&(s=t[r]),r==="@type"&&Vt(s)&&(s["@container"]||"@set")==="@set"&&de.processingMode(e,1.1)){const u=["@container","@id","@protected"],h=Object.keys(s);if(h.length===0||h.some(g=>!u.includes(g)))throw new J("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r})}else{if(de.isKeyword(r))throw new J("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(r.match(Jn)){i.eventHandler&&kr({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:r}},options:i});return}else if(r==="")throw new J("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const a=e.mappings.get(r);e.mappings.has(r)&&e.mappings.delete(r);let l=!1;if((Me(s)||s===null)&&(l=!0,s={"@id":s}),!Vt(s))throw new J("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const c={};e.mappings.set(r,c),c.reverse=!1;const f=["@container","@id","@language","@reverse","@type"];de.processingMode(e,1.1)&&f.push("@context","@direction","@index","@nest","@prefix","@protected");for(const u in s)if(!f.includes(u))throw new J("Invalid JSON-LD syntax; a term definition must not contain "+u,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const d=r.indexOf(":");if(c._termHasColon=d>0,"@reverse"in s){if("@id"in s)throw new J("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in s)throw new J("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const u=s["@reverse"];if(!Me(u))throw new J("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(u.match(Jn)){i.eventHandler&&kr({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:u}},options:i}),a?e.mappings.set(r,a):e.mappings.delete(r);return}const h=Dr(e,u,{vocab:!0,base:!1},t,n,i);if(!lr(h))throw new J("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});c["@id"]=h,c.reverse=!0}else if("@id"in s){let u=s["@id"];if(u&&!Me(u))throw new J("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(u===null)c["@id"]=null;else if(!de.isKeyword(u)&&u.match(Jn)){i.eventHandler&&kr({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:u}},options:i}),a?e.mappings.set(r,a):e.mappings.delete(r);return}else if(u!==r){if(u=Dr(e,u,{vocab:!0,base:!1},t,n,i),!lr(u)&&!de.isKeyword(u))throw new J("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(r.match(/(?::[^:])|\//)){const h=new Map(n).set(r,!0);if(Dr(e,r,{vocab:!0,base:!1},t,h,i)!==u)throw new J("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}c["@id"]=u,c._prefix=l&&!c._termHasColon&&u.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in c))if(c._termHasColon){const u=r.substr(0,d);if(t.hasOwnProperty(u)&&de.createTermDefinition({activeCtx:e,localCtx:t,term:u,defined:n,options:i}),e.mappings.has(u)){const h=r.substr(d+1);c["@id"]=e.mappings.get(u)["@id"]+h}else c["@id"]=r}else if(r==="@type")c["@id"]=r;else{if(!("@vocab"in e))throw new J("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});c["@id"]=e["@vocab"]+r}if((s["@protected"]===!0||n.get("@protected")===!0&&s["@protected"]!==!1)&&(e.protected[r]=!0,c.protected=!0),n.set(r,!0),"@type"in s){let u=s["@type"];if(!Me(u))throw new J("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(u==="@json"||u==="@none"){if(de.processingMode(e,1))throw new J(`Invalid JSON-LD syntax; an @context @type value must not be "${u}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if(u!=="@id"&&u!=="@vocab"){if(u=Dr(e,u,{vocab:!0,base:!1},t,n,i),!lr(u))throw new J("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(u.indexOf("_:")===0)throw new J("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}c["@type"]=u}if("@container"in s){const u=Me(s["@container"])?[s["@container"]]:s["@container"]||[],h=["@list","@set","@index","@language"];let g=!0;const m=u.includes("@set");if(de.processingMode(e,1.1)){if(h.push("@graph","@id","@type"),u.includes("@list")){if(u.length!==1)throw new J("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(u.includes("@graph")){if(u.some(y=>y!=="@graph"&&y!=="@id"&&y!=="@index"&&y!=="@set"))throw new J("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else g&=u.length<=(m?2:1);if(u.includes("@type")&&(c["@type"]=c["@type"]||"@id",!["@id","@vocab"].includes(c["@type"])))throw new J("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else g&=!ua(s["@container"]),g&=u.length<=1;if(g&=u.every(y=>h.includes(y)),g&=!(m&&u.includes("@list")),!g)throw new J("Invalid JSON-LD syntax; @context @container value must be one of the following: "+h.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(c.reverse&&!u.every(y=>["@index","@set"].includes(y)))throw new J("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});c["@container"]=u}if("@index"in s){if(!("@container"in s)||!c["@container"].includes("@index"))throw new J(`Invalid JSON-LD syntax; @index without @index in @container: "${s["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!Me(s["@index"])||s["@index"].indexOf("@")===0)throw new J(`Invalid JSON-LD syntax; @index must expand to an IRI: "${s["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});c["@index"]=s["@index"]}if("@context"in s&&(c["@context"]=s["@context"]),"@language"in s&&!("@type"in s)){let u=s["@language"];if(u!==null&&!Me(u))throw new J("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});u!==null&&(u=u.toLowerCase()),c["@language"]=u}if("@prefix"in s){if(r.match(/:|\//))throw new J("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(de.isKeyword(c["@id"]))throw new J("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(typeof s["@prefix"]=="boolean")c._prefix=s["@prefix"]===!0;else throw new J("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t})}if("@direction"in s){const u=s["@direction"];if(u!==null&&u!=="ltr"&&u!=="rtl")throw new J('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});c["@direction"]=u}if("@nest"in s){const u=s["@nest"];if(!Me(u)||u!=="@nest"&&u.indexOf("@")===0)throw new J("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});c["@nest"]=u}// disallow aliasing @context and @preserve
const p=c["@id"];if(p==="@context"||p==="@preserve")throw new J("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(a&&a.protected&&!o&&(e.protected[r]=!0,c.protected=!0,!Zi(a,c)))throw new J("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r})},de.expandIri=(e,t,r,n)=>Dr(e,t,r,void 0,void 0,n);function Dr(e,t,r,n,i,o){if(t===null||!Me(t)||de.isKeyword(t))return t;if(t.match(Jn))return null;if(n&&n.hasOwnProperty(t)&&i.get(t)!==!0&&de.createTermDefinition({activeCtx:e,localCtx:n,term:t,defined:i,options:o}),r=r||{},r.vocab){const a=e.mappings.get(t);if(a===null)return null;if(Vt(a)&&"@id"in a)return a["@id"]}const s=t.indexOf(":");if(s>0){const a=t.substr(0,s),l=t.substr(s+1);if(a==="_"||l.indexOf("//")===0)return t;n&&n.hasOwnProperty(a)&&de.createTermDefinition({activeCtx:e,localCtx:n,term:a,defined:i,options:o});const c=e.mappings.get(a);if(c&&c._prefix)return c["@id"]+l;if(lr(t))return t}if(r.vocab&&"@vocab"in e)t=e["@vocab"]+t;else if(r.base){let a,l;"@base"in e?e["@base"]?(l=ln(o.base,e["@base"]),a=ln(l,t)):(l=e["@base"],a=t):(l=o.base,a=ln(o.base,t)),t=a}return t}de.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),r=Gn.get(t);if(r)return r;const n={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:i,clone:a,revertToPreviousContext:l,protected:{}};return Gn.size===Id&&Gn.clear(),Gn.set(t,n),n;function i(){const c=this;if(c.inverse)return c.inverse;const f=c.inverse={},d=c.fastCurieMap={},p={},u=(c["@language"]||"@none").toLowerCase(),h=c["@direction"],g=c.mappings,m=[...g.keys()].sort(Od);for(const y of m){const v=g.get(y);if(v===null)continue;let _=v["@container"]||"@none";if(_=[].concat(_).sort().join(""),v["@id"]===null)continue;const w=pa(v["@id"]);for(const O of w){let $=f[O];const j=de.isKeyword(O);if($)!j&&!v._termHasColon&&p[O].push(y);else if(f[O]=$={},!j&&!v._termHasColon){p[O]=[y];const D={iri:O,terms:p[O]};O[0]in d?d[O[0]].push(D):d[O[0]]=[D]}if($[_]||($[_]={"@language":{},"@type":{},"@any":{}}),$=$[_],s(y,$["@any"],"@none"),v.reverse)s(y,$["@type"],"@reverse");else if(v["@type"]==="@none")s(y,$["@any"],"@none"),s(y,$["@language"],"@none"),s(y,$["@type"],"@none");else if("@type"in v)s(y,$["@type"],v["@type"]);else if("@language"in v&&"@direction"in v){const D=v["@language"],z=v["@direction"];D&&z?s(y,$["@language"],`${D}_${z}`.toLowerCase()):D?s(y,$["@language"],D.toLowerCase()):z?s(y,$["@language"],`_${z}`):s(y,$["@language"],"@null")}else"@language"in v?s(y,$["@language"],(v["@language"]||"@null").toLowerCase()):"@direction"in v?v["@direction"]?s(y,$["@language"],`_${v["@direction"]}`):s(y,$["@language"],"@none"):h?(s(y,$["@language"],`_${h}`),s(y,$["@language"],"@none"),s(y,$["@type"],"@none")):(s(y,$["@language"],u),s(y,$["@language"],"@none"),s(y,$["@type"],"@none"))}}for(const y in d)o(d,y,1);return f}function o(c,f,d){const p=c[f],u=c[f]={};let h,g;for(const m of p)h=m.iri,d>=h.length?g="":g=h[d],g in u?u[g].push(m):u[g]=[m];for(const m in u)m!==""&&o(u,m,d+1)}function s(c,f,d){f.hasOwnProperty(d)||(f[d]=c)}function a(){const c={};return c.mappings=da.clone(this.mappings),c.clone=this.clone,c.inverse=null,c.getInverse=this.getInverse,c.protected=da.clone(this.protected),this.previousContext&&(c.previousContext=this.previousContext.clone()),c.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(c["@base"]=this["@base"]),"@language"in this&&(c["@language"]=this["@language"]),"@vocab"in this&&(c["@vocab"]=this["@vocab"]),c}function l(){return this.previousContext?this.previousContext.clone():this}},de.getContextValue=(e,t,r)=>{if(t===null)return r==="@context"?void 0:null;if(e.mappings.has(t)){const n=e.mappings.get(t);if($d(r))return n;if(n.hasOwnProperty(r))return n[r]}if(r==="@language"&&r in e||r==="@direction"&&r in e)return e[r];if(r!=="@context")return null},de.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():e.processingMode==="json-ld-1.0",de.isKeyword=e=>{if(!Me(e)||e[0]!=="@")return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function Zi(e,t){if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return e===t;const r=Array.isArray(e);if(r!==Array.isArray(t))return!1;if(r){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(!Zi(e[o],t[o]))return!1;return!0}const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const o in e){let s=e[o],a=t[o];if(o==="@container"&&Array.isArray(s)&&Array.isArray(a)&&(s=s.slice().sort(),a=a.slice().sort()),!Zi(s,a))return!1}return!0}const he=We,{isArray:Qe,isObject:Ze,isEmptyObject:Yi,isString:De,isUndefined:Bn}=Fe,{isList:es,isValue:ts,isGraph:Ed,isSubject:Pd}=Dt,{expandIri:$e,getContextValue:He,isKeyword:rs,process:fn,processingMode:Kn}=fr,{isAbsolute:Wn}=Ft,{REGEX_BCP47:ha,REGEX_KEYWORD:jd,addValue:Je,asArray:lt,getValues:xd,validateTypeValue:Nd}=Xe,{handleEvent:Ye}=cn,Ht={};var kd=Ht;Ht.expand=async({activeCtx:e,activeProperty:t=null,element:r,options:n={},insideList:i=!1,insideIndex:o=!1,typeScopedContext:s=null})=>{if(r==null)return null;if(t==="@default"&&(n=Object.assign({},n,{isFrame:!1})),!Qe(r)&&!Ze(r))return!i&&(t===null||$e(e,t,{vocab:!0},n)==="@graph")?(n.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:r}},options:n}),null):ga({activeCtx:e,activeProperty:t,value:r,options:n});if(Qe(r)){let h=[];const g=He(e,t,"@container")||[];i=i||g.includes("@list");for(let m=0;m<r.length;++m){let y=await Ht.expand({activeCtx:e,activeProperty:t,element:r[m],options:n,insideIndex:o,typeScopedContext:s});i&&Qe(y)&&(y={"@list":y}),y!==null&&(Qe(y)?h=h.concat(y):h.push(y))}return h}const a=$e(e,t,{vocab:!0},n),l=He(e,t,"@context");s=s||(e.previousContext?e:null);let c=Object.keys(r).sort(),f=!o;if(f&&s&&c.length<=2&&!c.includes("@context"))for(const h of c){const g=$e(s,h,{vocab:!0},n);if(g==="@value"){f=!1,e=s;break}if(g==="@id"&&c.length===1){f=!1;break}}f&&(e=e.revertToPreviousContext()),Bn(l)||(e=await fn({activeCtx:e,localCtx:l,propagate:!0,overrideProtected:!0,options:n})),"@context"in r&&(e=await fn({activeCtx:e,localCtx:r["@context"],options:n})),s=e;let d=null;for(const h of c)if($e(e,h,{vocab:!0},n)==="@type"){d=d||h;const m=r[h],y=Array.isArray(m)?m.length>1?m.slice().sort():m:[m];for(const v of y){const _=He(s,v,"@context");Bn(_)||(e=await fn({activeCtx:e,localCtx:_,options:n,propagate:!1}))}}let p={};await ya({activeCtx:e,activeProperty:t,expandedActiveProperty:a,element:r,expandedParent:p,options:n,insideList:i,typeKey:d,typeScopedContext:s}),c=Object.keys(p);let u=c.length;if("@value"in p){if("@type"in p&&("@language"in p||"@direction"in p))throw new he('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:p});let h=u-1;if("@type"in p&&(h-=1),"@index"in p&&(h-=1),"@language"in p&&(h-=1),"@direction"in p&&(h-=1),h!==0)throw new he('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:p});const g=p["@value"]===null?[]:lt(p["@value"]),m=xd(p,"@type");if(!(Kn(e,1.1)&&m.includes("@json")&&m.length===1))if(g.length===0)n.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:p}},options:n}),p=null;else{if(!g.every(y=>De(y)||Yi(y))&&"@language"in p)throw new he("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:p});if(!m.every(y=>Wn(y)&&!(De(y)&&y.indexOf("_:")===0)||Yi(y)))throw new he('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:p})}}else if("@type"in p&&!Qe(p["@type"]))p["@type"]=[p["@type"]];else if("@set"in p||"@list"in p){if(u>1&&!(u===2&&"@index"in p))throw new he('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:p});"@set"in p&&(p=p["@set"],c=Object.keys(p),u=c.length)}else u===1&&"@language"in p&&(n.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:p}},options:n}),p=null);return Ze(p)&&!n.keepFreeFloatingNodes&&!i&&(t===null||a==="@graph"||(He(e,t,"@container")||[]).includes("@graph"))&&(p=ma({value:p,count:u,options:n})),p};function ma({value:e,count:t,options:r}){if(t===0||"@value"in e||"@list"in e||t===1&&"@id"in e){if(r.eventHandler){let n,i;t===0?(n="empty object",i="Dropping empty object."):"@value"in e?(n="object with only @value",i="Dropping object with only @value."):"@list"in e?(n="object with only @list",i="Dropping object with only @list."):t===1&&"@id"in e&&(n="object with only @id",i="Dropping object with only @id."),Ye({event:{type:["JsonLdEvent"],code:n,level:"warning",message:i,details:{value:e}},options:r})}return null}return e}async function ya({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:n,expandedParent:i,options:o={},insideList:s,typeKey:a,typeScopedContext:l}){const c=Object.keys(n).sort(),f=[];let d;const p=n[a]&&$e(e,Qe(n[a])?n[a][0]:n[a],{vocab:!0},{...o,typeExpansion:!0})==="@json";for(const u of c){let h=n[u],g;if(u==="@context")continue;const m=$e(e,u,{vocab:!0},o);if(m===null||!(Wn(m)||rs(m))){o.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:u,expandedProperty:m}},options:o});continue}if(rs(m)){if(r==="@reverse")throw new he("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:h});if(m in i&&m!=="@included"&&m!=="@type")throw new he("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:m})}if(m==="@id"){if(!De(h)){if(!o.isFrame)throw new he('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:h});if(Ze(h)){if(!Yi(h))throw new he('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}else if(Qe(h)){if(!h.every(w=>De(w)))throw new he('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}else throw new he('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:h})}Je(i,"@id",lt(h).map(w=>{if(De(w)){const O=$e(e,w,{base:!0},o);return o.eventHandler&&(O===null?Ye(w===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:w}},options:o}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:w}},options:o}):Wn(O)||Ye({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:w,expandedId:O}},options:o})),O}return w}),{propertyIsArray:o.isFrame});continue}if(m==="@type"){Ze(h)&&(h=Object.fromEntries(Object.entries(h).map(([w,O])=>[$e(l,w,{vocab:!0}),lt(O).map($=>$e(l,$,{base:!0,vocab:!0},{...o,typeExpansion:!0}))]))),Nd(h,o.isFrame),Je(i,"@type",lt(h).map(w=>{if(De(w)){const O=$e(l,w,{base:!0,vocab:!0},{...o,typeExpansion:!0});return O!=="@json"&&!Wn(O)&&o.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:w}},options:o}),O}return w}),{propertyIsArray:!!o.isFrame});continue}if(m==="@included"&&Kn(e,1.1)){const w=lt(await Ht.expand({activeCtx:e,activeProperty:t,element:h,options:o}));if(!w.every(O=>Pd(O)))throw new he("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:h});Je(i,"@included",w,{propertyIsArray:!0});continue}if(m==="@graph"&&!(Ze(h)||Qe(h)))throw new he('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:h});if(m==="@value"){d=h,p&&Kn(e,1.1)?i["@value"]=h:Je(i,"@value",h,{propertyIsArray:o.isFrame});continue}if(m==="@language"){if(h===null)continue;if(!De(h)&&!o.isFrame)throw new he('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:h});h=lt(h).map(w=>De(w)?w.toLowerCase():w);for(const w of h)De(w)&&!w.match(ha)&&o.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:w}},options:o});Je(i,"@language",h,{propertyIsArray:o.isFrame});continue}if(m==="@direction"){if(!De(h)&&!o.isFrame)throw new he('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:h});h=lt(h);for(const w of h)if(De(w)&&w!=="ltr"&&w!=="rtl")throw new he('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:h});Je(i,"@direction",h,{propertyIsArray:o.isFrame});continue}if(m==="@index"){if(!De(h))throw new he('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:h});Je(i,"@index",h);continue}if(m==="@reverse"){if(!Ze(h))throw new he('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:h});if(g=await Ht.expand({activeCtx:e,activeProperty:"@reverse",element:h,options:o}),"@reverse"in g)for(const O in g["@reverse"])Je(i,O,g["@reverse"][O],{propertyIsArray:!0});let w=i["@reverse"]||null;for(const O in g){if(O==="@reverse")continue;w===null&&(w=i["@reverse"]={}),Je(w,O,[],{propertyIsArray:!0});const $=g[O];for(let j=0;j<$.length;++j){const D=$[j];if(ts(D)||es(D))throw new he('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});Je(w,O,D,{propertyIsArray:!0})}}continue}if(m==="@nest"){f.push(u);continue}let y=e;const v=He(e,u,"@context");Bn(v)||(y=await fn({activeCtx:e,localCtx:v,propagate:!0,overrideProtected:!0,options:o}));const _=He(e,u,"@container")||[];if(_.includes("@language")&&Ze(h)){const w=He(y,u,"@direction");g=Dd(y,h,w,o)}else if(_.includes("@index")&&Ze(h)){const w=_.includes("@graph"),O=He(y,u,"@index")||"@index",$=O!=="@index"&&$e(e,O,{vocab:!0},o);g=await ns({activeCtx:y,options:o,activeProperty:u,value:h,asGraph:w,indexKey:O,propertyIndex:$})}else if(_.includes("@id")&&Ze(h)){const w=_.includes("@graph");g=await ns({activeCtx:y,options:o,activeProperty:u,value:h,asGraph:w,indexKey:"@id"})}else if(_.includes("@type")&&Ze(h))g=await ns({activeCtx:y.revertToPreviousContext(),options:o,activeProperty:u,value:h,asGraph:!1,indexKey:"@type"});else{const w=m==="@list";if(w||m==="@set"){let O=t;w&&r==="@graph"&&(O=null),g=await Ht.expand({activeCtx:y,activeProperty:O,element:h,options:o,insideList:w})}else He(e,u,"@type")==="@json"?g={"@type":"@json","@value":h}:g=await Ht.expand({activeCtx:y,activeProperty:u,element:h,options:o,insideList:!1})}if(!(g===null&&m!=="@value")){if(m!=="@list"&&!es(g)&&_.includes("@list")&&(g={"@list":lt(g)}),_.includes("@graph")&&!_.some(w=>w==="@id"||w==="@index")){if(g=lt(g),o.isFrame||(g=g.filter(w=>{const O=Object.keys(w).length;return ma({value:w,count:O,options:o})!==null})),g.length===0)continue;g=g.map(w=>({"@graph":lt(w)}))}if(y.mappings.has(u)&&y.mappings.get(u).reverse){const w=i["@reverse"]=i["@reverse"]||{};g=lt(g);for(let O=0;O<g.length;++O){const $=g[O];if(ts($)||es($))throw new he('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});Je(w,m,$,{propertyIsArray:!0})}continue}Je(i,m,g,{propertyIsArray:!0})}}if("@value"in i&&!(i["@type"]==="@json"&&Kn(e,1.1))){if((Ze(d)||Qe(d))&&!o.isFrame)throw new he('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:d})}for(const u of f){const h=Qe(n[u])?n[u]:[n[u]];for(const g of h){if(!Ze(g)||Object.keys(g).some(m=>$e(e,m,{vocab:!0},o)==="@value"))throw new he("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:g});await ya({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:g,expandedParent:i,options:o,insideList:s,typeScopedContext:l,typeKey:a})}}}function ga({activeCtx:e,activeProperty:t,value:r,options:n}){if(r==null)return null;const i=$e(e,t,{vocab:!0},n);if(i==="@id")return $e(e,r,{base:!0},n);if(i==="@type")return $e(e,r,{vocab:!0,base:!0},{...n,typeExpansion:!0});const o=He(e,t,"@type");if((o==="@id"||i==="@graph")&&De(r)){const a=$e(e,r,{base:!0},n);return a===null&&r.match(jd)&&n.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:n}),{"@id":a}}if(o==="@vocab"&&De(r))return{"@id":$e(e,r,{vocab:!0,base:!0},n)};if(rs(i))return r;const s={};if(o&&!["@id","@vocab","@none"].includes(o))s["@type"]=o;else if(De(r)){const a=He(e,t,"@language");a!==null&&(s["@language"]=a);const l=He(e,t,"@direction");l!==null&&(s["@direction"]=l)}return["boolean","number","string"].includes(typeof r)||(r=r.toString()),s["@value"]=r,s}function Dd(e,t,r,n){const i=[],o=Object.keys(t).sort();for(const s of o){const a=$e(e,s,{vocab:!0},n);let l=t[s];Qe(l)||(l=[l]);for(const c of l){if(c===null)continue;if(!De(c))throw new he("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const f={"@value":c};a!=="@none"&&(s.match(ha)||n.eventHandler&&Ye({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:s}},options:n}),f["@language"]=s.toLowerCase()),r&&(f["@direction"]=r),i.push(f)}}return i}async function ns({activeCtx:e,options:t,activeProperty:r,value:n,asGraph:i,indexKey:o,propertyIndex:s}){const a=[],l=Object.keys(n).sort(),c=o==="@type";for(let f of l){if(c){const u=He(e,f,"@context");Bn(u)||(e=await fn({activeCtx:e,localCtx:u,propagate:!1,options:t}))}let d=n[f];Qe(d)||(d=[d]),d=await Ht.expand({activeCtx:e,activeProperty:r,element:d,options:t,insideList:!1,insideIndex:!0});let p;s?f==="@none"?p="@none":p=ga({activeCtx:e,activeProperty:o,value:f,options:t}):p=$e(e,f,{vocab:!0},t),o==="@id"?f=$e(e,f,{base:!0},t):c&&(f=p);for(let u of d){if(i&&!Ed(u)&&(u={"@graph":[u]}),o==="@type")p==="@none"||(u["@type"]?u["@type"]=[f].concat(u["@type"]):u["@type"]=[f]);else{if(ts(u)&&!["@language","@type","@index"].includes(o))throw new he(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:u});s?p!=="@none"&&Je(u,s,p,{propertyIsArray:!0,prependValue:!0}):p!=="@none"&&!(o in u)&&(u[o]=f)}a.push(u)}}return a}const{isKeyword:va}=fr,mt=Dt,is=Fe,yt=Xe,Ad=We,Re={};var Xn=Re;Re.createMergedNodeMap=(e,t)=>{t=t||{};const r=t.issuer||new yt.IdentifierIssuer("_:b"),n={"@default":{}};return Re.createNodeMap(e,n,"@default",r),Re.mergeNodeMaps(n)},Re.createNodeMap=(e,t,r,n,i,o)=>{if(is.isArray(e)){for(const c of e)Re.createNodeMap(c,t,r,n,void 0,o);return}if(!is.isObject(e)){o&&o.push(e);return}if(mt.isValue(e)){if("@type"in e){let c=e["@type"];c.indexOf("_:")===0&&(e["@type"]=c=n.getId(c))}o&&o.push(e);return}else if(o&&mt.isList(e)){const c=[];Re.createNodeMap(e["@list"],t,r,n,i,c),o.push({"@list":c});return}if("@type"in e){const c=e["@type"];for(const f of c)f.indexOf("_:")===0&&n.getId(f)}is.isUndefined(i)&&(i=mt.isBlankNode(e)?n.getId(e["@id"]):e["@id"]),o&&o.push({"@id":i});const s=t[r],a=s[i]=s[i]||{};a["@id"]=i;const l=Object.keys(e).sort();for(let c of l){if(c==="@id")continue;if(c==="@reverse"){const d={"@id":i},p=e["@reverse"];for(const u in p){const h=p[u];for(const g of h){let m=g["@id"];mt.isBlankNode(g)&&(m=n.getId(m)),Re.createNodeMap(g,t,r,n,m),yt.addValue(s[m],u,d,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(c==="@graph"){i in t||(t[i]={}),Re.createNodeMap(e[c],t,i,n);continue}if(c==="@included"){Re.createNodeMap(e[c],t,r,n);continue}if(c!=="@type"&&va(c)){if(c==="@index"&&c in a&&(e[c]!==a[c]||e[c]["@id"]!==a[c]["@id"]))throw new Ad("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:a});a[c]=e[c];continue}const f=e[c];if(c.indexOf("_:")===0&&(c=n.getId(c)),f.length===0){yt.addValue(a,c,[],{propertyIsArray:!0});continue}for(let d of f)if(c==="@type"&&(d=d.indexOf("_:")===0?n.getId(d):d),mt.isSubject(d)||mt.isSubjectReference(d)){if("@id"in d&&!d["@id"])continue;const p=mt.isBlankNode(d)?n.getId(d["@id"]):d["@id"];yt.addValue(a,c,{"@id":p},{propertyIsArray:!0,allowDuplicate:!1}),Re.createNodeMap(d,t,r,n,p)}else if(mt.isValue(d))yt.addValue(a,c,d,{propertyIsArray:!0,allowDuplicate:!1});else if(mt.isList(d)){const p=[];Re.createNodeMap(d["@list"],t,r,n,i,p),d={"@list":p},yt.addValue(a,c,d,{propertyIsArray:!0,allowDuplicate:!1})}else Re.createNodeMap(d,t,r,n,i),yt.addValue(a,c,d,{propertyIsArray:!0,allowDuplicate:!1})}},Re.mergeNodeMapGraphs=e=>{const t={};for(const r of Object.keys(e).sort())for(const n of Object.keys(e[r]).sort()){const i=e[r][n];n in t||(t[n]={"@id":n});const o=t[n];for(const s of Object.keys(i).sort())if(va(s)&&s!=="@type")o[s]=yt.clone(i[s]);else for(const a of i[s])yt.addValue(o,s,yt.clone(a),{propertyIsArray:!0,allowDuplicate:!1})}return t},Re.mergeNodeMaps=e=>{const t=e["@default"],r=Object.keys(e).sort();for(const n of r){if(n==="@default")continue;const i=e[n];let o=t[n];o?"@graph"in o||(o["@graph"]=[]):t[n]=o={"@id":n,"@graph":[]};const s=o["@graph"];for(const a of Object.keys(i).sort()){const l=i[a];mt.isSubjectReference(l)||s.push(l)}}return t};const{isSubjectReference:Rd}=Dt,{createMergedNodeMap:Td}=Xn,wa={};var Ld=wa;wa.flatten=e=>{const t=Td(e),r=[],n=Object.keys(t).sort();for(let i=0;i<n.length;++i){const o=t[n[i]];Rd(o)||r.push(o)}return r};const ss=We,os=Dt,dn=Fe,{REGEX_BCP47:ba,addValue:$a}=Xe,{handleEvent:_a}=cn,{RDF_LIST:Md,RDF_FIRST:as,RDF_REST:cs,RDF_NIL:ls,RDF_TYPE:Cd,RDF_JSON_LITERAL:Ud,XSD_BOOLEAN:Sa,XSD_DOUBLE:Oa,XSD_INTEGER:Ia,XSD_STRING:fs}=Fi,Ea={};var qd=Ea;Ea.fromRDF=async(e,t)=>{const{useRdfType:r=!1,useNativeTypes:n=!1,rdfDirection:i=null}=t,o={},s={"@default":o},a={};if(i){if(i==="compound-literal")throw new ss("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:i});if(i!=="i18n-datatype")throw new ss("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:i})}for(const f of e){const d=f.graph.termType==="DefaultGraph"?"@default":f.graph.value;d in s||(s[d]={}),d!=="@default"&&!(d in o)&&(o[d]={"@id":d});const p=s[d],u=f.subject.value,h=f.predicate.value,g=f.object;u in p||(p[u]={"@id":u});const m=p[u],y=g.termType.endsWith("Node");if(y&&!(g.value in p)&&(p[g.value]={"@id":g.value}),h===Cd&&!r&&y){$a(m,"@type",g.value,{propertyIsArray:!0});continue}const v=zd(g,n,i,t);if($a(m,h,v,{propertyIsArray:!0}),y)if(g.value===ls){const _=p[g.value];"usages"in _||(_.usages=[]),_.usages.push({node:m,property:h,value:v})}else g.value in a?a[g.value]=!1:a[g.value]={node:m,property:h,value:v}}for(const f in s){const d=s[f];if(!(ls in d))continue;const p=d[ls];if(p.usages){for(let u of p.usages){let h=u.node,g=u.property,m=u.value;const y=[],v=[];let _=Object.keys(h).length;for(;g===cs&&dn.isObject(a[h["@id"]])&&dn.isArray(h[as])&&h[as].length===1&&dn.isArray(h[cs])&&h[cs].length===1&&(_===3||_===4&&dn.isArray(h["@type"])&&h["@type"].length===1&&h["@type"][0]===Md)&&(y.push(h[as][0]),v.push(h["@id"]),u=a[h["@id"]],h=u.node,g=u.property,m=u.value,_=Object.keys(h).length,!!os.isBlankNode(h)););delete m["@id"],m["@list"]=y.reverse();for(const w of v)delete d[w]}delete p.usages}}const l=[],c=Object.keys(o).sort();for(const f of c){const d=o[f];if(f in s){const p=d["@graph"]=[],u=s[f],h=Object.keys(u).sort();for(const g of h){const m=u[g];os.isSubjectReference(m)||p.push(m)}}os.isSubjectReference(d)||l.push(d)}return l};function zd(e,t,r,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const i={"@value":e.value};if(e.language)e.language.match(ba)||n.eventHandler&&_a({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:n}),i["@language"]=e.language;else{let o=e.datatype.value;if(o||(o=fs),o===Ud){o="@json";try{i["@value"]=JSON.parse(i["@value"])}catch(s){throw new ss("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:i["@value"],cause:s})}}if(t){if(o===Sa)i["@value"]==="true"?i["@value"]=!0:i["@value"]==="false"&&(i["@value"]=!1);else if(dn.isNumeric(i["@value"]))if(o===Ia){const s=parseInt(i["@value"],10);s.toFixed(0)===i["@value"]&&(i["@value"]=s)}else o===Oa&&(i["@value"]=parseFloat(i["@value"]));[Sa,Ia,Oa,fs].includes(o)||(i["@type"]=o)}else if(r==="i18n-datatype"&&o.startsWith("https://www.w3.org/ns/i18n#")){const[,s,a]=o.split(/[#_]/);s.length>0&&(i["@language"]=s,s.match(ba)||n.eventHandler&&_a({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:s}},options:n})),i["@direction"]=a}else o!==fs&&(i["@type"]=o)}return i}var Fd=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((r,n,i)=>{const o=i===0?"":",",s=n===void 0||typeof n=="symbol"?null:n;return r+o+e(s)},"")+"]":"{"+Object.keys(t).sort().reduce((r,n,i)=>{if(t[n]===void 0||typeof t[n]=="symbol")return r;const o=r.length===0?"":",";return r+o+e(n)+":"+e(t[n])},"")+"}"};const{createNodeMap:Vd}=Xn,{isKeyword:Hd}=fr,Pa=Dt,Jd=Fd,ja=We,un=Fe,Gd=Xe,{handleEvent:dr}=cn,{RDF_FIRST:Bd,RDF_REST:Kd,RDF_NIL:Wd,RDF_TYPE:Xd,RDF_JSON_LITERAL:Qd,RDF_LANGSTRING:Zd,XSD_BOOLEAN:Yd,XSD_DOUBLE:xa,XSD_INTEGER:eu,XSD_STRING:tu}=Fi,{isAbsolute:Qn}=Ft,Na={};var ru=Na;Na.toRDF=(e,t)=>{const r=new Gd.IdentifierIssuer("_:b"),n={"@default":{}};Vd(e,n,"@default",r);const i=[],o=Object.keys(n).sort();for(const s of o){let a;if(s==="@default")a={termType:"DefaultGraph",value:""};else if(Qn(s))s.startsWith("_:")?a={termType:"BlankNode"}:a={termType:"NamedNode"},a.value=s;else{t.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:s}},options:t});continue}nu(i,n[s],a,r,t)}return i};function nu(e,t,r,n,i){const o=Object.keys(t).sort();for(const s of o){const a=t[s],l=Object.keys(a).sort();for(let c of l){const f=a[c];if(c==="@type")c=Xd;else if(Hd(c))continue;for(const d of f){const p={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!Qn(s)){i.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:s}},options:i});continue}const u={termType:c.startsWith("_:")?"BlankNode":"NamedNode",value:c};if(!Qn(c)){i.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:c}},options:i});continue}if(u.termType==="BlankNode"&&!i.produceGeneralizedRdf){i.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:n.getOldIds().find(g=>n.getId(g)===c)}},options:i});continue}const h=ds(d,n,e,r,i.rdfDirection,i);h&&e.push({subject:p,predicate:u,object:h,graph:r})}}}}function iu(e,t,r,n,i,o){const s={termType:"NamedNode",value:Bd},a={termType:"NamedNode",value:Kd},l={termType:"NamedNode",value:Wd},c=e.pop(),f=c?{termType:"BlankNode",value:t.getId()}:l;let d=f;for(const p of e){const u=ds(p,t,r,n,i,o),h={termType:"BlankNode",value:t.getId()};r.push({subject:d,predicate:s,object:u,graph:n}),r.push({subject:d,predicate:a,object:h,graph:n}),d=h}if(c){const p=ds(c,t,r,n,i,o);r.push({subject:d,predicate:s,object:p,graph:n}),r.push({subject:d,predicate:a,object:l,graph:n})}return f}function ds(e,t,r,n,i,o){const s={};if(Pa.isValue(e)){s.termType="Literal",s.value=void 0,s.datatype={termType:"NamedNode"};let a=e["@value"];const l=e["@type"]||null;if(l==="@json")s.value=Jd(a),s.datatype.value=Qd;else if(un.isBoolean(a))s.value=a.toString(),s.datatype.value=l||Yd;else if(un.isDouble(a)||l===xa)un.isDouble(a)||(a=parseFloat(a)),s.value=a.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),s.datatype.value=l||xa;else if(un.isNumber(a))s.value=a.toFixed(0),s.datatype.value=l||eu;else if("@direction"in e&&i==="i18n-datatype"){const c=(e["@language"]||"").toLowerCase(),f=e["@direction"],d=`https://www.w3.org/ns/i18n#${c}_${f}`;s.datatype.value=d,s.value=a}else{if("@direction"in e&&i==="compound-literal")throw new ja("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:i});if("@direction"in e&&i)throw new ja("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:i});"@language"in e?("@direction"in e&&!i&&o.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:s.value}},options:o}),s.value=a,s.datatype.value=l||Zd,s.language=e["@language"]):("@direction"in e&&!i&&o.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:s.value}},options:o}),s.value=a,s.datatype.value=l||tu)}}else if(Pa.isList(e)){const a=iu(e["@list"],t,r,n,i,o);s.termType=a.termType,s.value=a.value}else{const a=un.isObject(e)?e["@id"]:e;s.termType=a.startsWith("_:")?"BlankNode":"NamedNode",s.value=a}return s.termType==="NamedNode"&&!Qn(s.value)?(o.eventHandler&&dr({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:s.value}},options:o}),null):s}const{isKeyword:us}=fr,et=Dt,ce=Fe,Ee=Xe,ka=Ft,pn=We,{createNodeMap:su,mergeNodeMapGraphs:ou}=Xn,tt={};var au=tt;tt.frameMergedOrDefault=(e,t,r)=>{const n={options:r,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new Ee.IdentifierIssuer("_:b");su(e,n.graphMap,"@default",i),r.merged&&(n.graphMap["@merged"]=ou(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];const o=[];tt.frame(n,Object.keys(n.subjects).sort(),t,o),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter(s=>n.bnodeMap[s].length===1));// remove @preserve from results
return r.link={},Yn(o,r)},tt.frame=(e,t,r,n,i=null)=>{Aa(r),r=r[0];const o=e.options,s={embed:Zn(r,o,"embed"),explicit:Zn(r,o,"explicit"),requireAll:Zn(r,o,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const a=e.link[e.graph],l=lu(e,t,r,s),c=Object.keys(l).sort();for(const f of c){const d=l[f];if(i===null?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},s.embed==="@link"&&f in a){ur(n,i,a[f]);continue}const p={"@id":f};if(f.indexOf("_:")===0&&Ee.addValue(e.bnodeMap,f,p,{propertyIsArray:!0}),a[f]=p,(s.embed==="@first"||s.embed==="@last")&&e.is11)throw new pn("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:r});if(!(!e.embedded&&e.uniqueEmbeds[e.graph].hasOwnProperty(f))){if(e.embedded&&(s.embed==="@never"||cu(d,e.graph,e.subjectStack))){ur(n,i,p);continue}if(e.embedded&&(s.embed=="@first"||s.embed=="@once")&&e.uniqueEmbeds[e.graph].hasOwnProperty(f)){ur(n,i,p);continue}if(s.embed==="@last"&&f in e.uniqueEmbeds[e.graph]&&fu(e,f),e.uniqueEmbeds[e.graph][f]={parent:n,property:i},e.subjectStack.push({subject:d,graph:e.graph}),f in e.graphMap){let u=!1,h=null;"@graph"in r?(h=r["@graph"][0],u=!(f==="@merged"||f==="@default"),ce.isObject(h)||(h={})):(u=e.graph!=="@merged",h={}),u&&tt.frame({...e,graph:f,embedded:!1},Object.keys(e.graphMap[f]).sort(),[h],p,"@graph")}"@included"in r&&tt.frame({...e,embedded:!1},t,r["@included"],p,"@included");for(const u of Object.keys(d).sort()){if(us(u)){if(p[u]=Ee.clone(d[u]),u==="@type")for(const h of d["@type"])h.indexOf("_:")===0&&Ee.addValue(e.bnodeMap,h,p,{propertyIsArray:!0});continue}if(!(s.explicit&&!(u in r)))for(const h of d[u]){const g=u in r?r[u]:Da(s);if(et.isList(h)){const m=r[u]&&r[u][0]&&r[u][0]["@list"]?r[u][0]["@list"]:Da(s),y={"@list":[]};ur(p,u,y);const v=h["@list"];for(const _ of v)et.isSubjectReference(_)?tt.frame({...e,embedded:!0},[_["@id"]],m,y,"@list"):ur(y,"@list",Ee.clone(_))}else et.isSubjectReference(h)?tt.frame({...e,embedded:!0},[h["@id"]],g,p,u):ps(g[0],h)&&ur(p,u,Ee.clone(h))}}for(const u of Object.keys(r).sort()){if(u==="@type"){if(!ce.isObject(r[u][0])||!("@default"in r[u][0]))continue}else if(us(u))continue;const h=r[u][0]||{};if(!Zn(h,o,"omitDefault")&&!(u in p)){let m="@null";"@default"in h&&(m=Ee.clone(h["@default"])),ce.isArray(m)||(m=[m]),p[u]=[{"@preserve":m}]}}for(const u of Object.keys(r["@reverse"]||{}).sort()){const h=r["@reverse"][u];for(const g of Object.keys(e.subjects))Ee.getValues(e.subjects[g],u).some(y=>y["@id"]===f)&&(p["@reverse"]=p["@reverse"]||{},Ee.addValue(p["@reverse"],u,[],{propertyIsArray:!0}),tt.frame({...e,embedded:!0},[g],h,p["@reverse"][u],i))}ur(n,i,p),e.subjectStack.pop()}}},tt.cleanupNull=(e,t)=>{if(ce.isArray(e))return e.map(n=>tt.cleanupNull(n,t)).filter(n=>n);if(e==="@null")return null;if(ce.isObject(e)){if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(n!==-1)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e)e[r]=tt.cleanupNull(e[r],t)}return e};function Da(e){const t={};for(const r in e)e[r]!==void 0&&(t["@"+r]=[e[r]]);return[t]}function cu(e,t,r){for(let n=r.length-1;n>=0;--n){const i=r[n];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function Zn(e,t,r){const n="@"+r;let i=n in e?e[n][0]:t[r];if(r==="embed"){if(i===!0)i="@once";else if(i===!1)i="@never";else if(i!=="@always"&&i!=="@never"&&i!=="@link"&&i!=="@first"&&i!=="@last"&&i!=="@once")throw new pn("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e})}return i}function Aa(e){if(!ce.isArray(e)||e.length!==1||!ce.isObject(e[0]))throw new pn("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0]){for(const t of Ee.asArray(e[0]["@id"]))if(!(ce.isObject(t)||ka.isAbsolute(t))||ce.isString(t)&&t.indexOf("_:")===0)throw new pn("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}if("@type"in e[0]){for(const t of Ee.asArray(e[0]["@type"]))if(!(ce.isObject(t)||ka.isAbsolute(t)||t==="@json")||ce.isString(t)&&t.indexOf("_:")===0)throw new pn("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}}function lu(e,t,r,n){const i={};for(const o of t){const s=e.graphMap[e.graph][o];Ra(e,s,r,n)&&(i[o]=s)}return i}function Ra(e,t,r,n){let i=!0,o=!1;for(const s in r){let a=!1;const l=Ee.getValues(t,s),c=Ee.getValues(r,s).length===0;if(s==="@id"){if(ce.isEmptyObject(r["@id"][0]||{})?a=!0:r["@id"].length>=0&&(a=r["@id"].includes(l[0])),!n.requireAll)return a}else if(s==="@type"){if(i=!1,c){if(l.length>0)return!1;a=!0}else if(r["@type"].length===1&&ce.isEmptyObject(r["@type"][0]))a=l.length>0;else for(const f of r["@type"])ce.isObject(f)&&"@default"in f?a=!0:a=a||l.some(d=>d===f);if(!n.requireAll)return a}else{if(us(s))continue;{const f=Ee.getValues(r,s)[0];let d=!1;if(f&&(Aa([f]),d="@default"in f),i=!1,l.length===0&&d)continue;if(l.length>0&&c)return!1;if(f===void 0){if(l.length>0)return!1;a=!0}else if(et.isList(f)){const p=f["@list"][0];if(et.isList(l[0])){const u=l[0]["@list"];et.isValue(p)?a=u.some(h=>ps(p,h)):(et.isSubject(p)||et.isSubjectReference(p))&&(a=u.some(h=>Ta(e,p,h,n)))}}else et.isValue(f)?a=l.some(p=>ps(f,p)):et.isSubjectReference(f)?a=l.some(p=>Ta(e,f,p,n)):ce.isObject(f)?a=l.length>0:a=!1}}if(!a&&n.requireAll)return!1;o=o||a}return i||o}function fu(e,t){const r=e.uniqueEmbeds[e.graph],n=r[t],i=n.parent,o=n.property,s={"@id":t};if(ce.isArray(i)){for(let l=0;l<i.length;++l)if(Ee.compareValues(i[l],s)){i[l]=s;break}}else{const l=ce.isArray(i[o]);Ee.removeValue(i,o,s,{propertyIsArray:l}),Ee.addValue(i,o,s,{propertyIsArray:l})}const a=l=>{const c=Object.keys(r);for(const f of c)f in r&&ce.isObject(r[f].parent)&&r[f].parent["@id"]===l&&(delete r[f],a(f))};a(t)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function Yn(e,t){if(ce.isArray(e))return e.map(r=>Yn(r,t));if(ce.isObject(e)){// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(et.isValue(e))return e;if(et.isList(e))return e["@list"]=Yn(e["@list"],t),e;if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(n!==-1)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e){if(r==="@id"&&t.bnodesToClear.includes(e[r])){delete e["@id"];continue}e[r]=Yn(e[r],t)}}return e}function ur(e,t,r){ce.isObject(e)?Ee.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function Ta(e,t,r,n){if(!("@id"in r))return!1;const i=e.subjects[r["@id"]];return i&&Ra(e,i,t,n)}function ps(e,t){const r=t["@value"],n=t["@type"],i=t["@language"],o=e["@value"]?ce.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?ce.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],a=e["@language"]?ce.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return o.length===0&&s.length===0&&a.length===0?!0:!(!(o.includes(r)||ce.isEmptyObject(o[0]))||!(!n&&s.length===0||s.includes(n)||n&&ce.isEmptyObject(s[0]))||!(!i&&a.length===0||a.includes(i)||i&&ce.isEmptyObject(a[0])))}const hs=We,{isArray:Jt,isObject:Gt,isString:La,isUndefined:ms}=Fe,{isList:ys,isValue:Tt,isGraph:Ma,isSimpleGraph:Ca,isSubjectReference:gs}=Dt,{expandIri:Ua,getContextValue:Te,isKeyword:qa,process:vs,processingMode:du}=fr,{removeBase:za,prependBase:uu}=Ft,{REGEX_KEYWORD:pu,addValue:Ge,asArray:ei,compareShortestLeast:hu}=Xe,Q={};var mu=Q;Q.compact=async({activeCtx:e,activeProperty:t=null,element:r,options:n={}})=>{if(Jt(r)){let o=[];for(let s=0;s<r.length;++s){const a=await Q.compact({activeCtx:e,activeProperty:t,element:r[s],options:n});a!==null&&o.push(a)}return n.compactArrays&&o.length===1&&(Te(e,t,"@container")||[]).length===0&&(o=o[0]),o}const i=Te(e,t,"@context");if(ms(i)||(e=await vs({activeCtx:e,localCtx:i,propagate:!0,overrideProtected:!0,options:n})),Gt(r)){if(n.link&&"@id"in r&&n.link.hasOwnProperty(r["@id"])){const p=n.link[r["@id"]];for(let u=0;u<p.length;++u)if(p[u].expanded===r)return p[u].compacted}if(Tt(r)||gs(r)){const p=Q.compactValue({activeCtx:e,activeProperty:t,value:r,options:n});return n.link&&gs(r)&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:p})),p}if(ys(r)&&(Te(e,t,"@container")||[]).includes("@list"))return Q.compact({activeCtx:e,activeProperty:t,element:r["@list"],options:n});const o=t==="@reverse",s={},a=e;!Tt(r)&&!gs(r)&&(e=e.revertToPreviousContext());const l=Te(a,t,"@context");ms(l)||(e=await vs({activeCtx:e,localCtx:l,propagate:!0,overrideProtected:!0,options:n})),n.link&&"@id"in r&&(n.link.hasOwnProperty(r["@id"])||(n.link[r["@id"]]=[]),n.link[r["@id"]].push({expanded:r,compacted:s}));let c=r["@type"]||[];c.length>1&&(c=Array.from(c).sort());const f=e;for(const p of c){const u=Q.compactIri({activeCtx:f,iri:p,relativeTo:{vocab:!0}}),h=Te(a,u,"@context");ms(h)||(e=await vs({activeCtx:e,localCtx:h,options:n,propagate:!1}))}const d=Object.keys(r).sort();for(const p of d){const u=r[p];if(p==="@id"){let h=ei(u).map(m=>Q.compactIri({activeCtx:e,iri:m,relativeTo:{vocab:!1},base:n.base}));h.length===1&&(h=h[0]);const g=Q.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});s[g]=h;continue}if(p==="@type"){let h=ei(u).map(_=>Q.compactIri({activeCtx:a,iri:_,relativeTo:{vocab:!0}}));h.length===1&&(h=h[0]);const g=Q.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),v=(Te(e,g,"@container")||[]).includes("@set")&&du(e,1.1)||Jt(h)&&u.length===0;Ge(s,g,h,{propertyIsArray:v});continue}if(p==="@reverse"){const h=await Q.compact({activeCtx:e,activeProperty:"@reverse",element:u,options:n});for(const g in h)if(e.mappings.has(g)&&e.mappings.get(g).reverse){const m=h[g],v=(Te(e,g,"@container")||[]).includes("@set")||!n.compactArrays;Ge(s,g,m,{propertyIsArray:v}),delete h[g]}if(Object.keys(h).length>0){const g=Q.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});Ge(s,g,h)}continue}if(p==="@preserve"){const h=await Q.compact({activeCtx:e,activeProperty:t,element:u,options:n});Jt(h)&&h.length===0||Ge(s,p,h);continue}if(p==="@index"){if((Te(e,t,"@container")||[]).includes("@index"))continue;const g=Q.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});Ge(s,g,u);continue}if(p!=="@graph"&&p!=="@list"&&p!=="@included"&&qa(p)){const h=Q.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});Ge(s,h,u);continue}if(!Jt(u))throw new hs("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(u.length===0){const h=Q.compactIri({activeCtx:e,iri:p,value:u,relativeTo:{vocab:!0},reverse:o}),g=e.mappings.has(h)?e.mappings.get(h)["@nest"]:null;let m=s;g&&(Fa(e,g,n),Gt(s[g])||(s[g]={}),m=s[g]),Ge(m,h,u,{propertyIsArray:!0})}for(const h of u){const g=Q.compactIri({activeCtx:e,iri:p,value:h,relativeTo:{vocab:!0},reverse:o}),m=e.mappings.has(g)?e.mappings.get(g)["@nest"]:null;let y=s;m&&(Fa(e,m,n),Gt(s[m])||(s[m]={}),y=s[m]);const v=Te(e,g,"@container")||[],_=Ma(h),w=ys(h);let O;w?O=h["@list"]:_&&(O=h["@graph"]);let $=await Q.compact({activeCtx:e,activeProperty:g,element:w||_?O:h,options:n});if(w)if(Jt($)||($=[$]),!v.includes("@list"))$={[Q.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:$},"@index"in h&&($[Q.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=h["@index"]);else{Ge(y,g,$,{valueIsArray:!0,allowDuplicate:!0});continue}if(_)if(v.includes("@graph")&&(v.includes("@id")||v.includes("@index")&&Ca(h))){let j;y.hasOwnProperty(g)?j=y[g]:y[g]=j={};const D=(v.includes("@id")?h["@id"]:h["@index"])||Q.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});Ge(j,D,$,{propertyIsArray:!n.compactArrays||v.includes("@set")})}else v.includes("@graph")&&Ca(h)?(Jt($)&&$.length>1&&($={"@included":$}),Ge(y,g,$,{propertyIsArray:!n.compactArrays||v.includes("@set")})):(Jt($)&&$.length===1&&n.compactArrays&&($=$[0]),$={[Q.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:$},"@id"in h&&($[Q.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=h["@id"]),"@index"in h&&($[Q.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=h["@index"]),Ge(y,g,$,{propertyIsArray:!n.compactArrays||v.includes("@set")}));else if(v.includes("@language")||v.includes("@index")||v.includes("@id")||v.includes("@type")){let j;y.hasOwnProperty(g)?j=y[g]:y[g]=j={};let D;if(v.includes("@language"))Tt($)&&($=$["@value"]),D=h["@language"];else if(v.includes("@index")){const z=Te(e,g,"@index")||"@index",oe=Q.compactIri({activeCtx:e,iri:z,relativeTo:{vocab:!0}});if(z==="@index")D=h["@index"],delete $[oe];else{let q;if([D,...q]=ei($[z]||[]),!La(D))D=null;else switch(q.length){case 0:delete $[z];break;case 1:$[z]=q[0];break;default:$[z]=q;break}}}else if(v.includes("@id")){const z=Q.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});D=$[z],delete $[z]}else if(v.includes("@type")){const z=Q.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let oe;switch([D,...oe]=ei($[z]||[]),oe.length){case 0:delete $[z];break;case 1:$[z]=oe[0];break;default:$[z]=oe;break}Object.keys($).length===1&&"@id"in h&&($=await Q.compact({activeCtx:e,activeProperty:g,element:{"@id":h["@id"]},options:n}))}D||(D=Q.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),Ge(j,D,$,{propertyIsArray:v.includes("@set")})}else{const j=!n.compactArrays||v.includes("@set")||v.includes("@list")||Jt($)&&$.length===0||p==="@list"||p==="@graph";Ge(y,g,$,{propertyIsArray:j})}}}return s}return r},Q.compactIri=({activeCtx:e,iri:t,value:r=null,relativeTo:n={vocab:!1},reverse:i=!1,base:o=null})=>{if(t===null)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const s=e.getInverse();if(qa(t)&&t in s&&"@none"in s[t]&&"@type"in s[t]["@none"]&&"@none"in s[t]["@none"]["@type"])return s[t]["@none"]["@type"]["@none"];if(n.vocab&&t in s){const d=e["@language"]||"@none",p=[];Gt(r)&&"@index"in r&&!("@graph"in r)&&p.push("@index","@index@set"),Gt(r)&&"@preserve"in r&&(r=r["@preserve"][0]),Ma(r)?("@index"in r&&p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r&&p.push("@graph@id","@graph@id@set"),p.push("@graph","@graph@set","@set"),"@index"in r||p.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r||p.push("@graph@id","@graph@id@set")):Gt(r)&&!Tt(r)&&p.push("@id","@id@set","@type","@set@type");let u="@language",h="@null";if(i)u="@type",h="@reverse",p.push("@set");else if(ys(r)){"@index"in r||p.push("@list");const m=r["@list"];if(m.length===0)u="@any",h="@none";else{let y=m.length===0?d:null,v=null;for(let _=0;_<m.length;++_){const w=m[_];let O="@none",$="@none";if(Tt(w))if("@direction"in w){const j=(w["@language"]||"").toLowerCase(),D=w["@direction"];O=`${j}_${D}`}else"@language"in w?O=w["@language"].toLowerCase():"@type"in w?$=w["@type"]:O="@null";else $="@id";if(y===null?y=O:O!==y&&Tt(w)&&(y="@none"),v===null?v=$:$!==v&&(v="@none"),y==="@none"&&v==="@none")break}y=y||"@none",v=v||"@none",v!=="@none"?(u="@type",h=v):h=y}}else{if(Tt(r))if("@language"in r&&!("@index"in r)){p.push("@language","@language@set"),h=r["@language"];const m=r["@direction"];m&&(h=`${h}_${m}`)}else"@direction"in r&&!("@index"in r)?h=`_${r["@direction"]}`:"@type"in r&&(u="@type",h=r["@type"]);else u="@type",h="@id";p.push("@set")}p.push("@none"),Gt(r)&&!("@index"in r)&&p.push("@index","@index@set"),Tt(r)&&Object.keys(r).length===1&&p.push("@language","@language@set");const g=yu(e,t,r,p,u,h);if(g!==null)return g}if(n.vocab&&"@vocab"in e){const d=e["@vocab"];if(t.indexOf(d)===0&&t!==d){const p=t.substr(d.length);if(!e.mappings.has(p))return p}}let a=null;const l=[];let c=e.fastCurieMap;const f=t.length-1;for(let d=0;d<f&&t[d]in c;++d)c=c[t[d]],""in c&&l.push(c[""][0]);for(let d=l.length-1;d>=0;--d){const p=l[d],u=p.terms;for(const h of u){const g=h+":"+t.substr(p.iri.length);e.mappings.get(h)._prefix&&(!e.mappings.has(g)||r===null&&e.mappings.get(g)["@id"]===t)&&(a===null||hu(g,a)<0)&&(a=g)}}if(a!==null)return a;for(const[d,p]of e.mappings)if(p&&p._prefix&&t.startsWith(d+":"))throw new hs(`Absolute IRI "${t}" confused with prefix "${d}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!n.vocab)if("@base"in e)if(e["@base"]){const d=za(uu(o,e["@base"]),t);return pu.test(d)?`./${d}`:d}else return t;else return za(o,t);return t},Q.compactValue=({activeCtx:e,activeProperty:t,value:r,options:n})=>{if(Tt(r)){const a=Te(e,t,"@type"),l=Te(e,t,"@language"),c=Te(e,t,"@direction"),f=Te(e,t,"@container")||[],d="@index"in r&&!f.includes("@index");if(!d&&a!=="@none"&&(r["@type"]===a||"@language"in r&&r["@language"]===l&&"@direction"in r&&r["@direction"]===c||"@language"in r&&r["@language"]===l||"@direction"in r&&r["@direction"]===c))return r["@value"];const p=Object.keys(r).length,u=p===1||p===2&&"@index"in r&&!d,h="@language"in e,g=La(r["@value"]),m=e.mappings.has(t)&&e.mappings.get(t)["@language"]===null;if(u&&a!=="@none"&&(!h||!g||m))return r["@value"];const y={};return d&&(y[Q.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=r["@index"]),"@type"in r?y[Q.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=Q.compactIri({activeCtx:e,iri:r["@type"],relativeTo:{vocab:!0}}):"@language"in r&&(y[Q.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=r["@language"]),"@direction"in r&&(y[Q.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=r["@direction"]),y[Q.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=r["@value"],y}const i=Ua(e,t,{vocab:!0},n),o=Te(e,t,"@type"),s=Q.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:o==="@vocab"},base:n.base});return o==="@id"||o==="@vocab"||i==="@graph"?s:{[Q.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}};function yu(e,t,r,n,i,o){o===null&&(o="@null");const s=[];if((o==="@id"||o==="@reverse")&&Gt(r)&&"@id"in r){o==="@reverse"&&s.push("@reverse");const l=Q.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(l)&&e.mappings.get(l)&&e.mappings.get(l)["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(o);const l=s.find(c=>c.includes("_"));l&&s.push(l.replace(/^[^_]+_/,"_"))}s.push("@none");const a=e.inverse[t];for(const l of n){if(!(l in a))continue;const c=a[l][i];for(const f of s)if(f in c)return c[f]}return null}function Fa(e,t,r){if(Ua(e,t,{vocab:!0},r)!=="@nest")throw new hs("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}var ws,Va;function gu(){return Va||(Va=1,ws=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(r,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(r,n)},t.expand=function(r){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(r)},t.flatten=function(r){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(r)},t}),ws}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const Ha=zi,Ja=nd,Bt=Xe,Lt=yd,bs=Bt.IdentifierIssuer,gt=We,vu=oa,ti=vd,{expand:wu}=kd,{flatten:bu}=Ld,{fromRDF:$u}=qd,{toRDF:_u}=ru,{frameMergedOrDefault:Su,cleanupNull:Ou}=au,{isArray:Ar,isObject:pr,isString:vt}=Fe,{isSubjectReference:Iu}=Dt,{expandIri:Eu,getInitialContext:ri,process:Ga,processingMode:$s}=fr,{compact:Pu,compactIri:ju}=mu,{createNodeMap:xu,createMergedNodeMap:Nu,mergeNodeMaps:ku}=Xn,{logEventHandler:Du,logWarningEventHandler:Au,safeEventHandler:Ru,setDefaultEventHandler:Tu,setupEventHandler:Lu,strictEventHandler:Mu,unhandledEventHandler:Cu}=cn,Ba=function(e){const t={},n=new vu({max:100});e.compact=async function(o,s,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(s===null)throw new gt("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(o===null)return null;a=i(a,{base:vt(o)?o:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new bs("_:b"),contextResolver:new Lt({sharedCache:n})}),a.link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base;let l;a.skipExpansion?l=o:l=await e.expand(o,a);const c=await e.processContext(ri(a),s,a);let f=await Pu({activeCtx:c,element:l,options:a});a.compactArrays&&!a.graph&&Ar(f)?f.length===1?f=f[0]:f.length===0&&(f={}):a.graph&&pr(f)&&(f=[f]),pr(s)&&"@context"in s&&(s=s["@context"]),s=Bt.clone(s),Ar(s)||(s=[s]);const d=s;s=[];for(let u=0;u<d.length;++u)(!pr(d[u])||Object.keys(d[u]).length>0)&&s.push(d[u]);const p=s.length>0;if(s.length===1&&(s=s[0]),Ar(f)){const u=ju({activeCtx:c,iri:"@graph",relativeTo:{vocab:!0}}),h=f;f={},p&&(f["@context"]=s),f[u]=h}else if(pr(f)&&p){const u=f;f={"@context":s};for(const h in u)f[h]=u[h]}return f},e.expand=async function(o,s){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");s=i(s,{keepFreeFloatingNodes:!1,contextResolver:new Lt({sharedCache:n})});const a={},l=[];if("expandContext"in s){const p=Bt.clone(s.expandContext);pr(p)&&"@context"in p?a.expandContext=p:a.expandContext={"@context":p},l.push(a.expandContext)}let c;if(!vt(o))a.input=Bt.clone(o);else{const p=await e.get(o,s);c=p.documentUrl,a.input=p.document,p.contextUrl&&(a.remoteContext={"@context":p.contextUrl},l.push(a.remoteContext))}"base"in s||(s.base=c||"");let f=ri(s);for(const p of l)f=await Ga({activeCtx:f,localCtx:p,options:s});let d=await wu({activeCtx:f,element:a.input,options:s});return pr(d)&&"@graph"in d&&Object.keys(d).length===1?d=d["@graph"]:d===null&&(d=[]),Ar(d)||(d=[d]),d},e.flatten=async function(o,s,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof s=="function"?s=null:s=s||null,a=i(a,{base:vt(o)?o:"",contextResolver:new Lt({sharedCache:n})});const l=await e.expand(o,a),c=bu(l);return s===null?c:(a.graph=!0,a.skipExpansion=!0,await e.compact(c,s,a))},e.frame=async function(o,s,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=i(a,{base:vt(o)?o:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Lt({sharedCache:n})}),vt(s)){const m=await e.get(s,a);if(s=m.document,m.contextUrl){let y=s["@context"];y?Ar(y)?y.push(m.contextUrl):y=[y,m.contextUrl]:y=m.contextUrl,s["@context"]=y}}const l=s?s["@context"]||{}:{},c=await e.processContext(ri(a),l,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=$s(c,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=$s(c,1.1));const f=await e.expand(o,a),d={...a};d.isFrame=!0,d.keepFreeFloatingNodes=!0;const p=await e.expand(s,d),u=Object.keys(s).map(m=>Eu(c,m,{vocab:!0}));d.merged=!u.includes("@graph"),d.is11=$s(c,1.1);const h=Su(f,p,d);d.graph=!a.omitGraph,d.skipExpansion=!0,d.link={},d.framing=!0;let g=await e.compact(h,l,d);return d.link={},g=Ou(g,d),g},e.link=async function(o,s,a){const l={};return s&&(l["@context"]=s),l["@embed"]="@link",e.frame(o,l,a)},e.normalize=e.canonize=async function(o,s){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(s=i(s,{base:vt(o)?o:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new Lt({sharedCache:n})}),"inputFormat"in s){if(s.inputFormat!=="application/n-quads"&&s.inputFormat!=="application/nquads")throw new gt("Unknown canonicalization input format.","jsonld.CanonizeError");const c=ti.parse(o);return Ha.canonize(c,s)}const a={...s};delete a.format,a.produceGeneralizedRdf=!1;const l=await e.toRDF(o,a);return Ha.canonize(l,s)},e.fromRDF=async function(o,s){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");s=i(s,{format:vt(o)?"application/n-quads":void 0});const{format:a}=s;let{rdfParser:l}=s;if(a){if(l=l||t[a],!l)throw new gt("Unknown input format.","jsonld.UnknownFormat",{format:a})}else l=()=>o;const c=await l(o);return $u(c,s)},e.toRDF=async function(o,s){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");s=i(s,{base:vt(o)?o:"",skipExpansion:!1,contextResolver:new Lt({sharedCache:n})});let a;s.skipExpansion?a=o:a=await e.expand(o,s);const l=_u(a,s);if(s.format){if(s.format==="application/n-quads"||s.format==="application/nquads")return ti.serialize(l);throw new gt("Unknown output format.","jsonld.UnknownFormat",{format:s.format})}return l},e.createNodeMap=async function(o,s){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");s=i(s,{base:vt(o)?o:"",contextResolver:new Lt({sharedCache:n})});const a=await e.expand(o,s);return Nu(a,s)},e.merge=async function(o,s,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Ar(o))throw new TypeError('Could not merge, "docs" must be an array.');typeof s=="function"?s=null:s=s||null,a=i(a,{contextResolver:new Lt({sharedCache:n})});const l=await Promise.all(o.map(m=>{const y={...a};return e.expand(m,y)}));let c=!0;"mergeNodes"in a&&(c=a.mergeNodes);const f=a.issuer||new bs("_:b"),d={"@default":{}};for(let m=0;m<l.length;++m){const y=Bt.relabelBlankNodes(l[m],{issuer:new bs("_:b"+m+"-")}),v=c||m===0?d:{"@default":{}};if(xu(y,v,"@default",f),v!==d)for(const _ in v){const w=v[_];if(!(_ in d)){d[_]=w;continue}const O=d[_];for(const $ in w)$ in O||(O[$]=w[$])}}const p=ku(d),u=[],h=Object.keys(p).sort();for(let m=0;m<h.length;++m){const y=p[h[m]];Iu(y)||u.push(y)}return s===null?u:(a.graph=!0,a.skipExpansion=!0,await e.compact(u,s,a))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:o=>e._documentLoader=o}),e.documentLoader=async o=>{throw new gt("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:o})},e.get=async function(o,s){let a;typeof s.documentLoader=="function"?a=s.documentLoader:a=e.documentLoader;const l=await a(o);try{if(!l.document)throw new gt("No remote document found at the given URL.","jsonld.NullRemoteDocument");vt(l.document)&&(l.document=JSON.parse(l.document))}catch(c){throw new gt("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:c,remoteDoc:l})}return l},e.processContext=async function(o,s,a){return a=i(a,{base:"",contextResolver:new Lt({sharedCache:n})}),s===null?ri(a):(s=Bt.clone(s),pr(s)&&"@context"in s||(s={"@context":s}),Ga({activeCtx:o,localCtx:s,options:a}))},e.getContextValue=fr.getContextValue,e.documentLoaders={},e.useDocumentLoader=function(o){if(!(o in e.documentLoaders))throw new gt('Unknown document loader type: "'+o+'"',"jsonld.UnknownDocumentLoader",{type:o});e.documentLoader=e.documentLoaders[o].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(o,s){t[o]=s},e.unregisterRDFParser=function(o){delete t[o]},e.registerRDFParser("application/n-quads",ti.parse),e.registerRDFParser("application/nquads",ti.parse),e.url=Ft,e.logEventHandler=Du,e.logWarningEventHandler=Au,e.safeEventHandler=Ru,e.setDefaultEventHandler=Tu,e.strictEventHandler=Mu,e.unhandledEventHandler=Cu,e.util=Bt,Object.assign(e,Bt),e.promises=e,e.RequestQueue=ta(),e.JsonLdProcessor=gu()(e),Ja.setupGlobals(e),Ja.setupDocumentLoaders(e);function i(o,{documentLoader:s=e.documentLoader,...a}){if(o&&"compactionMap"in o)throw new gt('"compactionMap" not supported.',"jsonld.OptionsError");if(o&&"expansionMap"in o)throw new gt('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:s},a,o,{eventHandler:Lu({options:o})})}return e},_s=function(){return Ba(function(){return _s()})};Ba(_s);var Uu=_s,Ka=en(Uu),Ss={exports:{}},Wa={},ft={},Rr={},hn={},Z={},mn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof r&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=n,e.nil=new n("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new n(_)}e._=i;const o=new n("+");function s(y,...v){const _=[u(y[0])];let w=0;for(;w<v.length;)_.push(o),a(_,v[w]),_.push(o,u(y[++w]));return l(_),new n(_)}e.str=s;function a(y,v){v instanceof n?y.push(...v._items):v instanceof r?y.push(v):y.push(d(v))}e.addCodeArg=a;function l(y){let v=1;for(;v<y.length-1;){if(y[v]===o){const _=c(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function c(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof r||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof r))return`"${y}${v.slice(1)}`}function f(y,v){return v.emptyStr()?y:y.emptyStr()?v:s`${y}${v}`}e.strConcat=f;function d(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:u(Array.isArray(y)?y.join(","):y)}function p(y){return new n(u(y))}e.stringify=p;function u(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=u;function h(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new n(`.${y}`):i`[${y}]`}e.getProperty=h;function g(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new n(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=g;function m(y){return new n(y.toString())}e.regexpCode=m})(mn);var Os={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=mn;class r extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var n;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:c,parent:f}={}){this._names={},this._prefixes=c,this._parent=f}toName(c){return c instanceof t.Name?c:this.name(c)}name(c){return new t.Name(this._newName(c))}_newName(c){const f=this._names[c]||this._nameGroup(c);return`${c}${f.index++}`}_nameGroup(c){var f,d;if(!((d=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||d===void 0)&&d.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}e.Scope=i;class o extends t.Name{constructor(c,f){super(f),this.prefix=c}setValue(c,{property:f,itemIndex:d}){this.value=c,this.scopePath=(0,t._)`.${new t.Name(f)}[${d}]`}}e.ValueScopeName=o;const s=(0,t._)`\n`;class a extends i{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?s:t.nil}}get(){return this._scope}name(c){return new o(c,this._newName(c))}value(c,f){var d;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const p=this.toName(c),{prefix:u}=p,h=(d=f.key)!==null&&d!==void 0?d:f.ref;let g=this._values[u];if(g){const v=g.get(h);if(v)return v}else g=this._values[u]=new Map;g.set(h,p);const m=this._scope[u]||(this._scope[u]=[]),y=m.length;return m[y]=f.ref,p.setValue(f,{property:u,itemIndex:y}),p}getValue(c,f){const d=this._values[c];if(d)return d.get(f)}scopeRefs(c,f=this._values){return this._reduceValues(f,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${c}${d.scopePath}`})}scopeCode(c=this._values,f,d){return this._reduceValues(c,p=>{if(p.value===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return p.value.code},f,d)}_reduceValues(c,f,d={},p){let u=t.nil;for(const h in c){const g=c[h];if(!g)continue;const m=d[h]=d[h]||new Map;g.forEach(y=>{if(m.has(y))return;m.set(y,n.Started);let v=f(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;u=(0,t._)`${u}${_} ${y} = ${v};${this.opts._n}`}else if(v=p==null?void 0:p(y))u=(0,t._)`${u}${v}${this.opts._n}`;else throw new r(y);m.set(y,n.Completed)})}return u}}e.ValueScope=a})(Os),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=mn,r=Os;var n=mn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var i=Os;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(b,E){return this}}class s extends o{constructor(b,E,R){super(),this.varKind=b,this.name=E,this.rhs=R}render({es5:b,_n:E}){const R=b?r.varKinds.var:this.varKind,M=this.rhs===void 0?"":` = ${this.rhs}`;return`${R} ${this.name}${M};`+E}optimizeNames(b,E){if(b[this.name.str])return this.rhs&&(this.rhs=K(this.rhs,b,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(b,E,R){super(),this.lhs=b,this.rhs=E,this.sideEffects=R}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,E){if(!(this.lhs instanceof t.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=K(this.rhs,b,E),this}get names(){const b=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ae(b,this.rhs)}}class l extends a{constructor(b,E,R,M){super(b,R,M),this.op=E}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class c extends o{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class f extends o{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class d extends o{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class p extends o{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,E){return this.code=K(this.code,b,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class u extends o{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((E,R)=>E+R.render(b),"")}optimizeNodes(){const{nodes:b}=this;let E=b.length;for(;E--;){const R=b[E].optimizeNodes();Array.isArray(R)?b.splice(E,1,...R):R?b[E]=R:b.splice(E,1)}return b.length>0?this:void 0}optimizeNames(b,E){const{nodes:R}=this;let M=R.length;for(;M--;){const U=R[M];U.optimizeNames(b,E)||(Oe(b,U.names),R.splice(M,1))}return R.length>0?this:void 0}get names(){return this.nodes.reduce((b,E)=>G(b,E.names),{})}}class h extends u{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class g extends u{}class m extends h{}m.kind="else";class y extends h{constructor(b,E){super(E),this.condition=b}render(b){let E=`if(${this.condition})`+super.render(b);return this.else&&(E+="else "+this.else.render(b)),E}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let E=this.else;if(E){const R=E.optimizeNodes();E=this.else=Array.isArray(R)?new m(R):R}if(E)return b===!1?E instanceof y?E:E.nodes:this.nodes.length?this:new y(nt(b),E instanceof y?[E]:E.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,E){var R;if(this.else=(R=this.else)===null||R===void 0?void 0:R.optimizeNames(b,E),!!(super.optimizeNames(b,E)||this.else))return this.condition=K(this.condition,b,E),this}get names(){const b=super.names;return ae(b,this.condition),this.else&&G(b,this.else.names),b}}y.kind="if";class v extends h{}v.kind="for";class _ extends v{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,E){if(super.optimizeNames(b,E))return this.iteration=K(this.iteration,b,E),this}get names(){return G(super.names,this.iteration.names)}}class w extends v{constructor(b,E,R,M){super(),this.varKind=b,this.name=E,this.from=R,this.to=M}render(b){const E=b.es5?r.varKinds.var:this.varKind,{name:R,from:M,to:U}=this;return`for(${E} ${R}=${M}; ${R}<${U}; ${R}++)`+super.render(b)}get names(){const b=ae(super.names,this.from);return ae(b,this.to)}}class O extends v{constructor(b,E,R,M){super(),this.loop=b,this.varKind=E,this.name=R,this.iterable=M}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,E){if(super.optimizeNames(b,E))return this.iterable=K(this.iterable,b,E),this}get names(){return G(super.names,this.iterable.names)}}class $ extends h{constructor(b,E,R){super(),this.name=b,this.args=E,this.async=R}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}$.kind="func";class j extends u{render(b){return"return "+super.render(b)}}j.kind="return";class D extends h{render(b){let E="try"+super.render(b);return this.catch&&(E+=this.catch.render(b)),this.finally&&(E+=this.finally.render(b)),E}optimizeNodes(){var b,E;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(b,E){var R,M;return super.optimizeNames(b,E),(R=this.catch)===null||R===void 0||R.optimizeNames(b,E),(M=this.finally)===null||M===void 0||M.optimizeNames(b,E),this}get names(){const b=super.names;return this.catch&&G(b,this.catch.names),this.finally&&G(b,this.finally.names),b}}class z extends h{constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}z.kind="catch";class oe extends h{render(b){return"finally"+super.render(b)}}oe.kind="finally";class q{constructor(b,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=b,this._scope=new r.Scope({parent:b}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,E){const R=this._extScope.value(b,E);return(this._values[R.prefix]||(this._values[R.prefix]=new Set)).add(R),R}getScopeValue(b,E){return this._extScope.getValue(b,E)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,E,R,M){const U=this._scope.toName(E);return R!==void 0&&M&&(this._constants[U.str]=R),this._leafNode(new s(b,U,R)),U}const(b,E,R){return this._def(r.varKinds.const,b,E,R)}let(b,E,R){return this._def(r.varKinds.let,b,E,R)}var(b,E,R){return this._def(r.varKinds.var,b,E,R)}assign(b,E,R){return this._leafNode(new a(b,E,R))}add(b,E){return this._leafNode(new l(b,e.operators.ADD,E))}code(b){return typeof b=="function"?b():b!==t.nil&&this._leafNode(new p(b)),this}object(...b){const E=["{"];for(const[R,M]of b)E.length>1&&E.push(","),E.push(R),(R!==M||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,M));return E.push("}"),new t._Code(E)}if(b,E,R){if(this._blockNode(new y(b)),E&&R)this.code(E).else().code(R).endIf();else if(E)this.code(E).endIf();else if(R)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new y(b))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(y,m)}_for(b,E){return this._blockNode(b),E&&this.code(E).endFor(),this}for(b,E){return this._for(new _(b),E)}forRange(b,E,R,M,U=this.opts.es5?r.varKinds.var:r.varKinds.let){const ee=this._scope.toName(b);return this._for(new w(U,ee,E,R),()=>M(ee))}forOf(b,E,R,M=r.varKinds.const){const U=this._scope.toName(b);if(this.opts.es5){const ee=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${ee}.length`,re=>{this.var(U,(0,t._)`${ee}[${re}]`),R(U)})}return this._for(new O("of",M,U,E),()=>R(U))}forIn(b,E,R,M=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,t._)`Object.keys(${E})`,R);const U=this._scope.toName(b);return this._for(new O("in",M,U,E),()=>R(U))}endFor(){return this._endBlockNode(v)}label(b){return this._leafNode(new c(b))}break(b){return this._leafNode(new f(b))}return(b){const E=new j;if(this._blockNode(E),this.code(b),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(j)}try(b,E,R){if(!E&&!R)throw new Error('CodeGen: "try" without "catch" and "finally"');const M=new D;if(this._blockNode(M),this.code(b),E){const U=this.name("e");this._currNode=M.catch=new z(U),E(U)}return R&&(this._currNode=M.finally=new oe,this.code(R)),this._endBlockNode(z,oe)}throw(b){return this._leafNode(new d(b))}block(b,E){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(E),this}endBlock(b){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const R=this._nodes.length-E;if(R<0||b!==void 0&&R!==b)throw new Error(`CodeGen: wrong number of nodes: ${R} vs ${b} expected`);return this._nodes.length=E,this}func(b,E=t.nil,R,M){return this._blockNode(new $(b,E,R)),M&&this.code(M).endFunc(),this}endFunc(){return this._endBlockNode($)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,E){const R=this._currNode;if(R instanceof b||E&&R instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${b.kind}/${E.kind}`:b.kind}"`)}_elseNode(b){const E=this._currNode;if(!(E instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const E=this._nodes;E[E.length-1]=b}}e.CodeGen=q;function G(N,b){for(const E in b)N[E]=(N[E]||0)+(b[E]||0);return N}function ae(N,b){return b instanceof t._CodeOrName?G(N,b.names):N}function K(N,b,E){if(N instanceof t.Name)return R(N);if(!M(N))return N;return new t._Code(N._items.reduce((U,ee)=>(ee instanceof t.Name&&(ee=R(ee)),ee instanceof t._Code?U.push(...ee._items):U.push(ee),U),[]));function R(U){const ee=E[U.str];return ee===void 0||b[U.str]!==1?U:(delete b[U.str],ee)}function M(U){return U instanceof t._Code&&U._items.some(ee=>ee instanceof t.Name&&b[ee.str]===1&&E[ee.str]!==void 0)}}function Oe(N,b){for(const E in b)N[E]=(N[E]||0)-(b[E]||0)}function nt(N){return typeof N=="boolean"||typeof N=="number"||N===null?!N:(0,t._)`!${T(N)}`}e.not=nt;const it=x(e.operators.AND);function Sr(...N){return N.reduce(it)}e.and=Sr;const qt=x(e.operators.OR);function L(...N){return N.reduce(qt)}e.or=L;function x(N){return(b,E)=>b===t.nil?E:E===t.nil?b:(0,t._)`${T(b)} ${N} ${T(E)}`}function T(N){return N instanceof t.Name?N:(0,t._)`(${N})`}}(Z);var C={};Object.defineProperty(C,"__esModule",{value:!0}),C.checkStrictMode=C.getErrorPath=C.Type=C.useFunc=C.setEvaluated=C.evaluatedPropsToName=C.mergeEvaluated=C.eachItem=C.unescapeJsonPointer=C.escapeJsonPointer=C.escapeFragment=C.unescapeFragment=C.schemaRefOrVal=C.schemaHasRulesButRef=C.schemaHasRules=C.checkUnknownRules=C.alwaysValidSchema=C.toHash=void 0;const le=Z,qu=mn;function zu(e){const t={};for(const r of e)t[r]=!0;return t}C.toHash=zu;function Fu(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Xa(e,t),!Qa(t,e.self.RULES.all))}C.alwaysValidSchema=Fu;function Xa(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const i=n.RULES.keywords;for(const o in t)i[o]||rc(e,`unknown keyword: "${o}"`)}C.checkUnknownRules=Xa;function Qa(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}C.schemaHasRules=Qa;function Vu(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}C.schemaHasRulesButRef=Vu;function Hu({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,le._)`${r}`}return(0,le._)`${e}${t}${(0,le.getProperty)(n)}`}C.schemaRefOrVal=Hu;function Ju(e){return Za(decodeURIComponent(e))}C.unescapeFragment=Ju;function Gu(e){return encodeURIComponent(Is(e))}C.escapeFragment=Gu;function Is(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}C.escapeJsonPointer=Is;function Za(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}C.unescapeJsonPointer=Za;function Bu(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}C.eachItem=Bu;function Ya({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,o,s,a)=>{const l=s===void 0?o:s instanceof le.Name?(o instanceof le.Name?e(i,o,s):t(i,o,s),s):o instanceof le.Name?(t(i,s,o),o):r(o,s);return a===le.Name&&!(l instanceof le.Name)?n(i,l):l}}C.mergeEvaluated={props:Ya({mergeNames:(e,t,r)=>e.if((0,le._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,le._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,le._)`${r} || {}`).code((0,le._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,le._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,le._)`${r} || {}`),Es(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:ec}),items:Ya({mergeNames:(e,t,r)=>e.if((0,le._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,le._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,le._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,le._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function ec(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,le._)`{}`);return t!==void 0&&Es(e,r,t),r}C.evaluatedPropsToName=ec;function Es(e,t,r){Object.keys(r).forEach(n=>e.assign((0,le._)`${t}${(0,le.getProperty)(n)}`,!0))}C.setEvaluated=Es;const tc={};function Ku(e,t){return e.scopeValue("func",{ref:t,code:tc[t.code]||(tc[t.code]=new qu._Code(t.code))})}C.useFunc=Ku;var Ps;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Ps||(C.Type=Ps={}));function Wu(e,t,r){if(e instanceof le.Name){const n=t===Ps.Num;return r?n?(0,le._)`"[" + ${e} + "]"`:(0,le._)`"['" + ${e} + "']"`:n?(0,le._)`"/" + ${e}`:(0,le._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,le.getProperty)(e).toString():"/"+Is(e)}C.getErrorPath=Wu;function rc(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}C.checkStrictMode=rc;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});const Ae=Z,Xu={data:new Ae.Name("data"),valCxt:new Ae.Name("valCxt"),instancePath:new Ae.Name("instancePath"),parentData:new Ae.Name("parentData"),parentDataProperty:new Ae.Name("parentDataProperty"),rootData:new Ae.Name("rootData"),dynamicAnchors:new Ae.Name("dynamicAnchors"),vErrors:new Ae.Name("vErrors"),errors:new Ae.Name("errors"),this:new Ae.Name("this"),self:new Ae.Name("self"),scope:new Ae.Name("scope"),json:new Ae.Name("json"),jsonPos:new Ae.Name("jsonPos"),jsonLen:new Ae.Name("jsonLen"),jsonPart:new Ae.Name("jsonPart")};wt.default=Xu,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Z,r=C,n=wt;e.keywordError={message:({keyword:m})=>(0,t.str)`must pass "${m}" keyword validation`},e.keyword$DataError={message:({keyword:m,schemaType:y})=>y?(0,t.str)`"${m}" keyword must be ${y} ($data)`:(0,t.str)`"${m}" keyword is invalid ($data)`};function i(m,y=e.keywordError,v,_){const{it:w}=m,{gen:O,compositeRule:$,allErrors:j}=w,D=d(m,y,v);_??($||j)?l(O,D):c(w,(0,t._)`[${D}]`)}e.reportError=i;function o(m,y=e.keywordError,v){const{it:_}=m,{gen:w,compositeRule:O,allErrors:$}=_,j=d(m,y,v);l(w,j),O||$||c(_,n.default.vErrors)}e.reportExtraError=o;function s(m,y){m.assign(n.default.errors,y),m.if((0,t._)`${n.default.vErrors} !== null`,()=>m.if(y,()=>m.assign((0,t._)`${n.default.vErrors}.length`,y),()=>m.assign(n.default.vErrors,null)))}e.resetErrorsCount=s;function a({gen:m,keyword:y,schemaValue:v,data:_,errsCount:w,it:O}){if(w===void 0)throw new Error("ajv implementation error");const $=m.name("err");m.forRange("i",w,n.default.errors,j=>{m.const($,(0,t._)`${n.default.vErrors}[${j}]`),m.if((0,t._)`${$}.instancePath === undefined`,()=>m.assign((0,t._)`${$}.instancePath`,(0,t.strConcat)(n.default.instancePath,O.errorPath))),m.assign((0,t._)`${$}.schemaPath`,(0,t.str)`${O.errSchemaPath}/${y}`),O.opts.verbose&&(m.assign((0,t._)`${$}.schema`,v),m.assign((0,t._)`${$}.data`,_))})}e.extendErrors=a;function l(m,y){const v=m.const("err",y);m.if((0,t._)`${n.default.vErrors} === null`,()=>m.assign(n.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${n.default.vErrors}.push(${v})`),m.code((0,t._)`${n.default.errors}++`)}function c(m,y){const{gen:v,validateName:_,schemaEnv:w}=m;w.$async?v.throw((0,t._)`new ${m.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const f={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(m,y,v){const{createErrors:_}=m.it;return _===!1?(0,t._)`{}`:p(m,y,v)}function p(m,y,v={}){const{gen:_,it:w}=m,O=[u(w,v),h(m,v)];return g(m,y,O),_.object(...O)}function u({errorPath:m},{instancePath:y}){const v=y?(0,t.str)`${m}${(0,r.getErrorPath)(y,r.Type.Str)}`:m;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,v)]}function h({keyword:m,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${m}`;return v&&(w=(0,t.str)`${w}${(0,r.getErrorPath)(v,r.Type.Str)}`),[f.schemaPath,w]}function g(m,{params:y,message:v},_){const{keyword:w,data:O,schemaValue:$,it:j}=m,{opts:D,propertyName:z,topSchemaRef:oe,schemaPath:q}=j;_.push([f.keyword,w],[f.params,typeof y=="function"?y(m):y||(0,t._)`{}`]),D.messages&&_.push([f.message,typeof v=="function"?v(m):v]),D.verbose&&_.push([f.schema,$],[f.parentSchema,(0,t._)`${oe}${q}`],[n.default.data,O]),z&&_.push([f.propertyName,z])}}(hn),Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.boolOrEmptySchema=Rr.topBoolOrEmptySchema=void 0;const Qu=hn,Zu=Z,Yu=wt,ep={message:"boolean schema is false"};function tp(e){const{gen:t,schema:r,validateName:n}=e;r===!1?nc(e,!1):typeof r=="object"&&r.$async===!0?t.return(Yu.default.data):(t.assign((0,Zu._)`${n}.errors`,null),t.return(!0))}Rr.topBoolOrEmptySchema=tp;function rp(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),nc(e)):r.var(t,!0)}Rr.boolOrEmptySchema=rp;function nc(e,t){const{gen:r,data:n}=e,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Qu.reportError)(i,ep,void 0,t)}var Se={},hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.getRules=hr.isJSONType=void 0;const np=["string","number","integer","boolean","null","object","array"],ip=new Set(np);function sp(e){return typeof e=="string"&&ip.has(e)}hr.isJSONType=sp;function op(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}hr.getRules=op;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.shouldUseRule=Mt.shouldUseGroup=Mt.schemaHasRulesForType=void 0;function ap({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&ic(e,n)}Mt.schemaHasRulesForType=ap;function ic(e,t){return t.rules.some(r=>sc(e,r))}Mt.shouldUseGroup=ic;function sc(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Mt.shouldUseRule=sc,Object.defineProperty(Se,"__esModule",{value:!0}),Se.reportTypeError=Se.checkDataTypes=Se.checkDataType=Se.coerceAndCheckDataType=Se.getJSONTypes=Se.getSchemaTypes=Se.DataType=void 0;const cp=hr,lp=Mt,fp=hn,X=Z,oc=C;var Tr;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Tr||(Se.DataType=Tr={}));function dp(e){const t=ac(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Se.getSchemaTypes=dp;function ac(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(cp.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Se.getJSONTypes=ac;function up(e,t){const{gen:r,data:n,opts:i}=e,o=pp(t,i.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,lp.schemaHasRulesForType)(e,t[0]));if(s){const a=xs(t,n,i.strictNumbers,Tr.Wrong);r.if(a,()=>{o.length?hp(e,t,o):Ns(e)})}return s}Se.coerceAndCheckDataType=up;const cc=new Set(["string","number","integer","boolean","null"]);function pp(e,t){return t?e.filter(r=>cc.has(r)||t==="array"&&r==="array"):[]}function hp(e,t,r){const{gen:n,data:i,opts:o}=e,s=n.let("dataType",(0,X._)`typeof ${i}`),a=n.let("coerced",(0,X._)`undefined`);o.coerceTypes==="array"&&n.if((0,X._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,X._)`${i}[0]`).assign(s,(0,X._)`typeof ${i}`).if(xs(t,i,o.strictNumbers),()=>n.assign(a,i))),n.if((0,X._)`${a} !== undefined`);for(const c of r)(cc.has(c)||c==="array"&&o.coerceTypes==="array")&&l(c);n.else(),Ns(e),n.endIf(),n.if((0,X._)`${a} !== undefined`,()=>{n.assign(i,a),mp(e,a)});function l(c){switch(c){case"string":n.elseIf((0,X._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,X._)`"" + ${i}`).elseIf((0,X._)`${i} === null`).assign(a,(0,X._)`""`);return;case"number":n.elseIf((0,X._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,X._)`+${i}`);return;case"integer":n.elseIf((0,X._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,X._)`+${i}`);return;case"boolean":n.elseIf((0,X._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,X._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,X._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,X._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(a,(0,X._)`[${i}]`)}}}function mp({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,X._)`${t} !== undefined`,()=>e.assign((0,X._)`${t}[${r}]`,n))}function js(e,t,r,n=Tr.Correct){const i=n===Tr.Correct?X.operators.EQ:X.operators.NEQ;let o;switch(e){case"null":return(0,X._)`${t} ${i} null`;case"array":o=(0,X._)`Array.isArray(${t})`;break;case"object":o=(0,X._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,X._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,X._)`typeof ${t} ${i} ${e}`}return n===Tr.Correct?o:(0,X.not)(o);function s(a=X.nil){return(0,X.and)((0,X._)`typeof ${t} == "number"`,a,r?(0,X._)`isFinite(${t})`:X.nil)}}Se.checkDataType=js;function xs(e,t,r,n){if(e.length===1)return js(e[0],t,r,n);let i;const o=(0,oc.toHash)(e);if(o.array&&o.object){const s=(0,X._)`typeof ${t} != "object"`;i=o.null?s:(0,X._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else i=X.nil;o.number&&delete o.integer;for(const s in o)i=(0,X.and)(i,js(s,t,r,n));return i}Se.checkDataTypes=xs;const yp={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,X._)`{type: ${e}}`:(0,X._)`{type: ${t}}`};function Ns(e){const t=gp(e);(0,fp.reportError)(t,yp)}Se.reportTypeError=Ns;function gp(e){const{gen:t,data:r,schema:n}=e,i=(0,oc.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}var ni={};Object.defineProperty(ni,"__esModule",{value:!0}),ni.assignDefaults=void 0;const Lr=Z,vp=C;function wp(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const i in r)lc(e,i,r[i].default);else t==="array"&&Array.isArray(n)&&n.forEach((i,o)=>lc(e,o,i.default))}ni.assignDefaults=wp;function lc(e,t,r){const{gen:n,compositeRule:i,data:o,opts:s}=e;if(r===void 0)return;const a=(0,Lr._)`${o}${(0,Lr.getProperty)(t)}`;if(i){(0,vp.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,Lr._)`${a} === undefined`;s.useDefaults==="empty"&&(l=(0,Lr._)`${l} || ${a} === null || ${a} === ""`),n.if(l,(0,Lr._)`${a} = ${(0,Lr.stringify)(r)}`)}var bt={},Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.validateUnion=Y.validateArray=Y.usePattern=Y.callValidateCode=Y.schemaProperties=Y.allSchemaProperties=Y.noPropertyInData=Y.propertyInData=Y.isOwnProperty=Y.hasPropFunc=Y.reportMissingProp=Y.checkMissingProp=Y.checkReportMissingProp=void 0;const ue=Z,ks=C,Kt=wt,bp=C;function $p(e,t){const{gen:r,data:n,it:i}=e;r.if(As(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ue._)`${t}`},!0),e.error()})}Y.checkReportMissingProp=$p;function _p({gen:e,data:t,it:{opts:r}},n,i){return(0,ue.or)(...n.map(o=>(0,ue.and)(As(e,t,o,r.ownProperties),(0,ue._)`${i} = ${o}`)))}Y.checkMissingProp=_p;function Sp(e,t){e.setParams({missingProperty:t},!0),e.error()}Y.reportMissingProp=Sp;function fc(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ue._)`Object.prototype.hasOwnProperty`})}Y.hasPropFunc=fc;function Ds(e,t,r){return(0,ue._)`${fc(e)}.call(${t}, ${r})`}Y.isOwnProperty=Ds;function Op(e,t,r,n){const i=(0,ue._)`${t}${(0,ue.getProperty)(r)} !== undefined`;return n?(0,ue._)`${i} && ${Ds(e,t,r)}`:i}Y.propertyInData=Op;function As(e,t,r,n){const i=(0,ue._)`${t}${(0,ue.getProperty)(r)} === undefined`;return n?(0,ue.or)(i,(0,ue.not)(Ds(e,t,r))):i}Y.noPropertyInData=As;function dc(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Y.allSchemaProperties=dc;function Ip(e,t){return dc(t).filter(r=>!(0,ks.alwaysValidSchema)(e,t[r]))}Y.schemaProperties=Ip;function Ep({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:o},it:s},a,l,c){const f=c?(0,ue._)`${e}, ${t}, ${n}${i}`:t,d=[[Kt.default.instancePath,(0,ue.strConcat)(Kt.default.instancePath,o)],[Kt.default.parentData,s.parentData],[Kt.default.parentDataProperty,s.parentDataProperty],[Kt.default.rootData,Kt.default.rootData]];s.opts.dynamicRef&&d.push([Kt.default.dynamicAnchors,Kt.default.dynamicAnchors]);const p=(0,ue._)`${f}, ${r.object(...d)}`;return l!==ue.nil?(0,ue._)`${a}.call(${l}, ${p})`:(0,ue._)`${a}(${p})`}Y.callValidateCode=Ep;const Pp=(0,ue._)`new RegExp`;function jp({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,ue._)`${i.code==="new RegExp"?Pp:(0,bp.useFunc)(e,i)}(${r}, ${n})`})}Y.usePattern=jp;function xp(e){const{gen:t,data:r,keyword:n,it:i}=e,o=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(o,!0),s(()=>t.break()),o;function s(a){const l=t.const("len",(0,ue._)`${r}.length`);t.forRange("i",0,l,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:ks.Type.Num},o),t.if((0,ue.not)(o),a)})}}Y.validateArray=xp;function Np(e){const{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,ks.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const s=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((l,c)=>{const f=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);t.assign(s,(0,ue._)`${s} || ${a}`),e.mergeValidEvaluated(f,a)||t.if((0,ue.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}Y.validateUnion=Np,Object.defineProperty(bt,"__esModule",{value:!0}),bt.validateKeywordUsage=bt.validSchemaType=bt.funcKeywordCode=bt.macroKeywordCode=void 0;const Le=Z,mr=wt,kp=Y,Dp=hn;function Ap(e,t){const{gen:r,keyword:n,schema:i,parentSchema:o,it:s}=e,a=t.macro.call(s.self,i,o,s),l=pc(r,n,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);const c=r.name("valid");e.subschema({schema:a,schemaPath:Le.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}bt.macroKeywordCode=Ap;function Rp(e,t){var r;const{gen:n,keyword:i,schema:o,parentSchema:s,$data:a,it:l}=e;Lp(l,t);const c=!a&&t.compile?t.compile.call(l.self,o,s,l):t.validate,f=pc(n,i,c),d=n.let("valid");e.block$data(d,p),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function p(){if(t.errors===!1)g(),t.modifying&&uc(e),m(()=>e.error());else{const y=t.async?u():h();t.modifying&&uc(e),m(()=>Tp(e,y))}}function u(){const y=n.let("ruleErrs",null);return n.try(()=>g((0,Le._)`await `),v=>n.assign(d,!1).if((0,Le._)`${v} instanceof ${l.ValidationError}`,()=>n.assign(y,(0,Le._)`${v}.errors`),()=>n.throw(v))),y}function h(){const y=(0,Le._)`${f}.errors`;return n.assign(y,null),g(Le.nil),y}function g(y=t.async?(0,Le._)`await `:Le.nil){const v=l.opts.passContext?mr.default.this:mr.default.self,_=!("compile"in t&&!a||t.schema===!1);n.assign(d,(0,Le._)`${y}${(0,kp.callValidateCode)(e,f,v,_)}`,t.modifying)}function m(y){var v;n.if((0,Le.not)((v=t.valid)!==null&&v!==void 0?v:d),y)}}bt.funcKeywordCode=Rp;function uc(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Le._)`${n.parentData}[${n.parentDataProperty}]`))}function Tp(e,t){const{gen:r}=e;r.if((0,Le._)`Array.isArray(${t})`,()=>{r.assign(mr.default.vErrors,(0,Le._)`${mr.default.vErrors} === null ? ${t} : ${mr.default.vErrors}.concat(${t})`).assign(mr.default.errors,(0,Le._)`${mr.default.vErrors}.length`),(0,Dp.extendErrors)(e)},()=>e.error())}function Lp({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function pc(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Le.stringify)(r)})}function Mp(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}bt.validSchemaType=Mp;function Cp({schema:e,opts:t,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(s!=null&&s.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const l=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}bt.validateKeywordUsage=Cp;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.extendSubschemaMode=Wt.extendSubschemaData=Wt.getSubschema=void 0;const $t=Z,hc=C;function Up(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,$t._)`${e.schemaPath}${(0,$t.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,$t._)`${e.schemaPath}${(0,$t.getProperty)(t)}${(0,$t.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,hc.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Wt.getSubschema=Up;function qp(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:o,propertyName:s}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(r!==void 0){const{errorPath:c,dataPathArr:f,opts:d}=t,p=a.let("data",(0,$t._)`${t.data}${(0,$t.getProperty)(r)}`,!0);l(p),e.errorPath=(0,$t.str)`${c}${(0,hc.getErrorPath)(r,n,d.jsPropertySyntax)}`,e.parentDataProperty=(0,$t._)`${r}`,e.dataPathArr=[...f,e.parentDataProperty]}if(i!==void 0){const c=i instanceof $t.Name?i:a.let("data",i,!0);l(c),s!==void 0&&(e.propertyName=s)}o&&(e.dataTypes=o);function l(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}Wt.extendSubschemaData=qp;function zp(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){n!==void 0&&(e.compositeRule=n),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Wt.extendSubschemaMode=zp;var Pe={},mc=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r},yc={exports:{}},Xt=yc.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};ii(t,n,i,e,"",e)};Xt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Xt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Xt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Xt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ii(e,t,r,n,i,o,s,a,l,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,i,o,s,a,l,c);for(var f in n){var d=n[f];if(Array.isArray(d)){if(f in Xt.arrayKeywords)for(var p=0;p<d.length;p++)ii(e,t,r,d[p],i+"/"+f+"/"+p,o,i,f,n,p)}else if(f in Xt.propsKeywords){if(d&&typeof d=="object")for(var u in d)ii(e,t,r,d[u],i+"/"+f+"/"+Fp(u),o,i,f,n,u)}else(f in Xt.keywords||e.allKeys&&!(f in Xt.skipKeywords))&&ii(e,t,r,d,i+"/"+f,o,i,f,n)}r(n,i,o,s,a,l,c)}}function Fp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Vp=yc.exports;Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.getSchemaRefs=Pe.resolveUrl=Pe.normalizeId=Pe._getFullPath=Pe.getFullPath=Pe.inlineRef=void 0;const Hp=C,Jp=mc,Gp=Vp,Bp=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Kp(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Rs(e):t?gc(e)<=t:!1}Pe.inlineRef=Kp;const Wp=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Rs(e){for(const t in e){if(Wp.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Rs)||typeof r=="object"&&Rs(r))return!0}return!1}function gc(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Bp.has(r)&&(typeof e[r]=="object"&&(0,Hp.eachItem)(e[r],n=>t+=gc(n)),t===1/0))return 1/0}return t}function vc(e,t="",r){r!==!1&&(t=Mr(t));const n=e.parse(t);return wc(e,n)}Pe.getFullPath=vc;function wc(e,t){return e.serialize(t).split("#")[0]+"#"}Pe._getFullPath=wc;const Xp=/#\/?$/;function Mr(e){return e?e.replace(Xp,""):""}Pe.normalizeId=Mr;function Qp(e,t,r){return r=Mr(r),e.resolve(t,r)}Pe.resolveUrl=Qp;const Zp=/^[a-z_][-a-z0-9._]*$/i;function Yp(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=Mr(e[r]||t),o={"":i},s=vc(n,i,!1),a={},l=new Set;return Gp(e,{allKeys:!0},(d,p,u,h)=>{if(h===void 0)return;const g=s+p;let m=o[h];typeof d[r]=="string"&&(m=y.call(this,d[r])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),o[p]=m;function y(_){const w=this.opts.uriResolver.resolve;if(_=Mr(m?w(m,_):_),l.has(_))throw f(_);l.add(_);let O=this.refs[_];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?c(d,O.schema,_):_!==Mr(g)&&(_[0]==="#"?(c(d,a[_],_),a[_]=d):this.refs[_]=g),_}function v(_){if(typeof _=="string"){if(!Zp.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function c(d,p,u){if(p!==void 0&&!Jp(d,p))throw f(u)}function f(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Pe.getSchemaRefs=Yp,Object.defineProperty(ft,"__esModule",{value:!0}),ft.getData=ft.KeywordCxt=ft.validateFunctionCode=void 0;const bc=Rr,$c=Se,Ts=Mt,si=Se,eh=ni,yn=bt,Ls=Wt,F=Z,B=wt,th=Pe,Ct=C,gn=hn;function rh(e){if(Ic(e)&&(Ec(e),Oc(e))){sh(e);return}_c(e,()=>(0,bc.topBoolOrEmptySchema)(e))}ft.validateFunctionCode=rh;function _c({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},o){i.code.es5?e.func(t,(0,F._)`${B.default.data}, ${B.default.valCxt}`,n.$async,()=>{e.code((0,F._)`"use strict"; ${Sc(r,i)}`),ih(e,i),e.code(o)}):e.func(t,(0,F._)`${B.default.data}, ${nh(i)}`,n.$async,()=>e.code(Sc(r,i)).code(o))}function nh(e){return(0,F._)`{${B.default.instancePath}="", ${B.default.parentData}, ${B.default.parentDataProperty}, ${B.default.rootData}=${B.default.data}${e.dynamicRef?(0,F._)`, ${B.default.dynamicAnchors}={}`:F.nil}}={}`}function ih(e,t){e.if(B.default.valCxt,()=>{e.var(B.default.instancePath,(0,F._)`${B.default.valCxt}.${B.default.instancePath}`),e.var(B.default.parentData,(0,F._)`${B.default.valCxt}.${B.default.parentData}`),e.var(B.default.parentDataProperty,(0,F._)`${B.default.valCxt}.${B.default.parentDataProperty}`),e.var(B.default.rootData,(0,F._)`${B.default.valCxt}.${B.default.rootData}`),t.dynamicRef&&e.var(B.default.dynamicAnchors,(0,F._)`${B.default.valCxt}.${B.default.dynamicAnchors}`)},()=>{e.var(B.default.instancePath,(0,F._)`""`),e.var(B.default.parentData,(0,F._)`undefined`),e.var(B.default.parentDataProperty,(0,F._)`undefined`),e.var(B.default.rootData,B.default.data),t.dynamicRef&&e.var(B.default.dynamicAnchors,(0,F._)`{}`)})}function sh(e){const{schema:t,opts:r,gen:n}=e;_c(e,()=>{r.$comment&&t.$comment&&jc(e),fh(e),n.let(B.default.vErrors,null),n.let(B.default.errors,0),r.unevaluated&&oh(e),Pc(e),ph(e)})}function oh(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,F._)`${r}.evaluated`),t.if((0,F._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,F._)`${e.evaluated}.props`,(0,F._)`undefined`)),t.if((0,F._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,F._)`${e.evaluated}.items`,(0,F._)`undefined`))}function Sc(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,F._)`/*# sourceURL=${r} */`:F.nil}function ah(e,t){if(Ic(e)&&(Ec(e),Oc(e))){ch(e,t);return}(0,bc.boolOrEmptySchema)(e,t)}function Oc({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Ic(e){return typeof e.schema!="boolean"}function ch(e,t){const{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&jc(e),dh(e),uh(e);const o=n.const("_errs",B.default.errors);Pc(e,o),n.var(t,(0,F._)`${o} === ${B.default.errors}`)}function Ec(e){(0,Ct.checkUnknownRules)(e),lh(e)}function Pc(e,t){if(e.opts.jtd)return xc(e,[],!1,t);const r=(0,$c.getSchemaTypes)(e.schema),n=(0,$c.coerceAndCheckDataType)(e,r);xc(e,r,!n,t)}function lh(e){const{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Ct.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function fh(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ct.checkStrictMode)(e,"default is ignored in the schema root")}function dh(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,th.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function uh(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function jc({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){const o=r.$comment;if(i.$comment===!0)e.code((0,F._)`${B.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){const s=(0,F.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,F._)`${B.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function ph(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:o}=e;r.$async?t.if((0,F._)`${B.default.errors} === 0`,()=>t.return(B.default.data),()=>t.throw((0,F._)`new ${i}(${B.default.vErrors})`)):(t.assign((0,F._)`${n}.errors`,B.default.vErrors),o.unevaluated&&hh(e),t.return((0,F._)`${B.default.errors} === 0`))}function hh({gen:e,evaluated:t,props:r,items:n}){r instanceof F.Name&&e.assign((0,F._)`${t}.props`,r),n instanceof F.Name&&e.assign((0,F._)`${t}.items`,n)}function xc(e,t,r,n){const{gen:i,schema:o,data:s,allErrors:a,opts:l,self:c}=e,{RULES:f}=c;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,Ct.schemaHasRulesButRef)(o,f))){i.block(()=>Ac(e,"$ref",f.all.$ref.definition));return}l.jtd||mh(e,t),i.block(()=>{for(const p of f.rules)d(p);d(f.post)});function d(p){(0,Ts.shouldUseGroup)(o,p)&&(p.type?(i.if((0,si.checkDataType)(p.type,s,l.strictNumbers)),Nc(e,p),t.length===1&&t[0]===p.type&&r&&(i.else(),(0,si.reportTypeError)(e)),i.endIf()):Nc(e,p),a||i.if((0,F._)`${B.default.errors} === ${n||0}`))}}function Nc(e,t){const{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,eh.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,Ts.shouldUseRule)(n,o)&&Ac(e,o.keyword,o.definition,t.type)})}function mh(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(yh(e,t),e.opts.allowUnionTypes||gh(e,t),vh(e,e.dataTypes))}function yh(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{kc(e.dataTypes,r)||Ms(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),bh(e,t)}}function gh(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Ms(e,"use allowUnionTypes to allow union type keyword")}function vh(e,t){const r=e.self.RULES.all;for(const n in r){const i=r[n];if(typeof i=="object"&&(0,Ts.shouldUseRule)(e.schema,i)){const{type:o}=i.definition;o.length&&!o.some(s=>wh(t,s))&&Ms(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function wh(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function kc(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function bh(e,t){const r=[];for(const n of e.dataTypes)kc(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Ms(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ct.checkStrictMode)(e,t,e.opts.strictTypes)}class Dc{constructor(t,r,n){if((0,yn.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ct.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Rc(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,yn.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",B.default.errors))}result(t,r,n){this.failResult((0,F.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,F.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,F._)`${r} !== undefined && (${(0,F.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?gn.reportExtraError:gn.reportError)(this,this.def.error,r)}$dataError(){(0,gn.reportError)(this,this.def.$dataError||gn.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,gn.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=F.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=F.nil,r=F.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:o,def:s}=this;n.if((0,F.or)((0,F._)`${i} === undefined`,r)),t!==F.nil&&n.assign(t,!0),(o.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==F.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:i,it:o}=this;return(0,F.or)(s(),a());function s(){if(n.length){if(!(r instanceof F.Name))throw new Error("ajv implementation error");const l=Array.isArray(n)?n:[n];return(0,F._)`${(0,si.checkDataTypes)(l,r,o.opts.strictNumbers,si.DataType.Wrong)}`}return F.nil}function a(){if(i.validateSchema){const l=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,F._)`!${l}(${r})`}return F.nil}}subschema(t,r){const n=(0,Ls.getSubschema)(this.it,t);(0,Ls.extendSubschemaData)(n,this.it,t),(0,Ls.extendSubschemaMode)(n,t);const i={...this.it,...n,items:void 0,props:void 0};return ah(i,r),i}mergeEvaluated(t,r){const{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Ct.mergeEvaluated.props(i,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Ct.mergeEvaluated.items(i,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,F.Name)),!0}}ft.KeywordCxt=Dc;function Ac(e,t,r,n){const i=new Dc(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,yn.funcKeywordCode)(i,r):"macro"in r?(0,yn.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,yn.funcKeywordCode)(i,r)}const $h=/^\/(?:[^~]|~0|~1)*$/,_h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Rc(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,o;if(e==="")return B.default.rootData;if(e[0]==="/"){if(!$h.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=B.default.rootData}else{const c=_h.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);const f=+c[1];if(i=c[2],i==="#"){if(f>=t)throw new Error(l("property/index",f));return n[t-f]}if(f>t)throw new Error(l("data",f));if(o=r[t-f],!i)return o}let s=o;const a=i.split("/");for(const c of a)c&&(o=(0,F._)`${o}${(0,F.getProperty)((0,Ct.unescapeJsonPointer)(c))}`,s=(0,F._)`${s} && ${o}`);return s;function l(c,f){return`Cannot access ${c} ${f} levels up, current level is ${t}`}}ft.getData=Rc;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});class Sh extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}vn.default=Sh;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});const Cs=Pe;class Oh extends Error{constructor(t,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Cs.resolveUrl)(t,r,n),this.missingSchema=(0,Cs.normalizeId)((0,Cs.getFullPath)(t,this.missingRef))}}Cr.default=Oh;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.resolveSchema=Ce.getCompilingSchema=Ce.resolveRef=Ce.compileSchema=Ce.SchemaEnv=void 0;const dt=Z,Ih=vn,yr=wt,ut=Pe,Tc=C,Eh=ft;class oi{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ut.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Ce.SchemaEnv=oi;function Us(e){const t=Lc.call(this,e);if(t)return t;const r=(0,ut.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new dt.CodeGen(this.scope,{es5:n,lines:i,ownProperties:o});let a;e.$async&&(a=s.scopeValue("Error",{ref:Ih.default,code:(0,dt._)`require("ajv/dist/runtime/validation_error").default`}));const l=s.scopeName("validate");e.validateName=l;const c={gen:s,allErrors:this.opts.allErrors,data:yr.default.data,parentData:yr.default.parentData,parentDataProperty:yr.default.parentDataProperty,dataNames:[yr.default.data],dataPathArr:[dt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,dt.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:dt.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,dt._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(e),(0,Eh.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);const d=s.toString();f=`${s.scopeRefs(yr.default.scope)}return ${d}`,this.opts.code.process&&(f=this.opts.code.process(f,e));const u=new Function(`${yr.default.self}`,`${yr.default.scope}`,f)(this,this.scope.get());if(this.scope.value(l,{ref:u}),u.errors=null,u.schema=e.schema,u.schemaEnv=e,e.$async&&(u.$async=!0),this.opts.code.source===!0&&(u.source={validateName:l,validateCode:d,scopeValues:s._values}),this.opts.unevaluated){const{props:h,items:g}=c;u.evaluated={props:h instanceof dt.Name?void 0:h,items:g instanceof dt.Name?void 0:g,dynamicProps:h instanceof dt.Name,dynamicItems:g instanceof dt.Name},u.source&&(u.source.evaluated=(0,dt.stringify)(u.evaluated))}return e.validate=u,e}catch(d){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),d}finally{this._compilations.delete(e)}}Ce.compileSchema=Us;function Ph(e,t,r){var n;r=(0,ut.resolveUrl)(this.opts.uriResolver,t,r);const i=e.refs[r];if(i)return i;let o=Nh.call(this,e,r);if(o===void 0){const s=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;s&&(o=new oi({schema:s,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=jh.call(this,o)}Ce.resolveRef=Ph;function jh(e){return(0,ut.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Us.call(this,e)}function Lc(e){for(const t of this._compilations)if(xh(t,e))return t}Ce.getCompilingSchema=Lc;function xh(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Nh(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||ai.call(this,e,t)}function ai(e,t){const r=this.opts.uriResolver.parse(t),n=(0,ut._getFullPath)(this.opts.uriResolver,r);let i=(0,ut.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return qs.call(this,r,e);const o=(0,ut.normalizeId)(n),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){const a=ai.call(this,e,s);return typeof(a==null?void 0:a.schema)!="object"?void 0:qs.call(this,r,a)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||Us.call(this,s),o===(0,ut.normalizeId)(t)){const{schema:a}=s,{schemaId:l}=this.opts,c=a[l];return c&&(i=(0,ut.resolveUrl)(this.opts.uriResolver,i,c)),new oi({schema:a,schemaId:l,root:e,baseId:i})}return qs.call(this,r,s)}}Ce.resolveSchema=ai;const kh=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function qs(e,{baseId:t,schema:r,root:n}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const l=r[(0,Tc.unescapeFragment)(a)];if(l===void 0)return;r=l;const c=typeof r=="object"&&r[this.opts.schemaId];!kh.has(a)&&c&&(t=(0,ut.resolveUrl)(this.opts.uriResolver,t,c))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Tc.schemaHasRulesButRef)(r,this.RULES)){const a=(0,ut.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=ai.call(this,n,a)}const{schemaId:s}=this.opts;if(o=o||new oi({schema:r,schemaId:s,root:n,baseId:t}),o.schema!==o.root.schema)return o}var Dh={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},zs={},ci={exports:{}};const Ah=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Mc=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function Cc(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const Rh=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Uc(e){return e.length=0,!0}function Th(e,t,r){if(e.length){const n=Cc(e);if(n!=="")t.push(n);else return r.error=!0,!1;e.length=0}return!0}function Lh(e){let t=0;const r={error:!1,address:"",zone:""},n=[],i=[];let o=!1,s=!1,a=Th;for(let l=0;l<e.length;l++){const c=e[l];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(s=!0),!a(i,n,r))break;if(++t>7){r.error=!0;break}l>0&&e[l-1]===":"&&(o=!0),n.push(":");continue}else if(c==="%"){if(!a(i,n,r))break;a=Uc}else{i.push(c);continue}}return i.length&&(a===Uc?r.zone=i.join(""):s?n.push(i.join("")):n.push(Cc(i))),r.address=n.join(""),r}function qc(e){if(Mh(e,":")<2)return{host:e,isIPV6:!1};const t=Lh(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:n}}}function Mh(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}function Ch(e){let t=e;const r=[];let n=-1,i=0;for(;i=t.length;){if(i===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(i===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(i===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((n=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")}function Uh(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function qh(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!Mc(r)){const n=qc(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var zc={nonSimpleDomain:Rh,recomposeAuthority:qh,normalizeComponentEncoding:Uh,removeDotSegments:Ch,isIPv4:Mc,isUUID:Ah,normalizeIPv6:qc};const{isUUID:zh}=zc,Fh=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Fc(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function Vc(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Hc(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Vh(e){return e.secure=Fc(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Hh(e){if((e.port===(Fc(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Jh(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(Fh);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const i=`${n}:${t.nid||e.nid}`,o=Fs(i);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Gh(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=`${r}:${t.nid||n}`,o=Fs(i);o&&(e=o.serialize(e,t));const s=e,a=e.nss;return s.path=`${n||t.nid}:${a}`,t.skipEscape=!0,s}function Bh(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!zh(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Kh(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const Jc={scheme:"http",domainHost:!0,parse:Vc,serialize:Hc},Wh={scheme:"https",domainHost:Jc.domainHost,parse:Vc,serialize:Hc},li={scheme:"ws",domainHost:!0,parse:Vh,serialize:Hh},Xh={scheme:"wss",domainHost:li.domainHost,parse:li.parse,serialize:li.serialize},fi={http:Jc,https:Wh,ws:li,wss:Xh,urn:{scheme:"urn",parse:Jh,serialize:Gh,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:Bh,serialize:Kh,skipNormalize:!0}};Object.setPrototypeOf(fi,null);function Fs(e){return e&&(fi[e]||fi[e.toLowerCase()])||void 0}var Qh={SCHEMES:fi,getSchemeHandler:Fs};const{normalizeIPv6:Zh,removeDotSegments:wn,recomposeAuthority:Yh,normalizeComponentEncoding:di,isIPv4:em,nonSimpleDomain:tm}=zc,{SCHEMES:rm,getSchemeHandler:Gc}=Qh;function nm(e,t){return typeof e=="string"?e=_t(Ut(e,t),t):typeof e=="object"&&(e=Ut(_t(e,t),t)),e}function im(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},i=Bc(Ut(e,n),Ut(t,n),n,!0);return n.skipEscape=!0,_t(i,n)}function Bc(e,t,r,n){const i={};return n||(e=Ut(_t(e,r),r),t=Ut(_t(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=wn(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=wn(t.path||""),i.query=t.query):(t.path?(t.path[0]==="/"?i.path=wn(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=wn(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function sm(e,t,r){return typeof e=="string"?(e=unescape(e),e=_t(di(Ut(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=_t(di(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=_t(di(Ut(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=_t(di(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function _t(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),i=[],o=Gc(n.scheme||r.scheme);o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");const s=Yh(r);if(s!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(s),r.path&&r.path[0]!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(a=wn(a)),s===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),i.push(a)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}const om=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Ut(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);const o=e.match(om);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host)if(em(n.host)===!1){const l=Zh(n.host);n.host=l.host.toLowerCase(),i=l.isIPV6}else i=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const s=Gc(r.scheme||n.scheme);if(!r.unicodeSupport&&(!s||!s.unicodeSupport)&&n.host&&(r.domainHost||s&&s.domainHost)&&i===!1&&tm(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!s||s&&!s.skipNormalize)&&(e.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),s&&s.parse&&s.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const Vs={SCHEMES:rm,normalize:nm,resolve:im,resolveComponent:Bc,equal:sm,serialize:_t,parse:Ut};ci.exports=Vs,ci.exports.default=Vs,ci.exports.fastUri=Vs;var am=ci.exports;Object.defineProperty(zs,"__esModule",{value:!0});const Kc=am;Kc.code='require("ajv/dist/runtime/uri").default',zs.default=Kc,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ft;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=Z;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=vn,i=Cr,o=hr,s=Ce,a=Z,l=Pe,c=Se,f=C,d=Dh,p=zs,u=(L,x)=>new RegExp(L,x);u.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(L){var x,T,N,b,E,R,M,U,ee,re,ge,It,Br,xn,Nn,Be,kn,Kr,Wr,Xr,Dn,Et,ze,Qr,An;const Or=L.strict,Rn=(x=L.code)===null||x===void 0?void 0:x.optimize,ki=Rn===!0||Rn===void 0?1:Rn||0,st=(N=(T=L.code)===null||T===void 0?void 0:T.regExp)!==null&&N!==void 0?N:u,Ir=(b=L.uriResolver)!==null&&b!==void 0?b:p.default;return{strictSchema:(R=(E=L.strictSchema)!==null&&E!==void 0?E:Or)!==null&&R!==void 0?R:!0,strictNumbers:(U=(M=L.strictNumbers)!==null&&M!==void 0?M:Or)!==null&&U!==void 0?U:!0,strictTypes:(re=(ee=L.strictTypes)!==null&&ee!==void 0?ee:Or)!==null&&re!==void 0?re:"log",strictTuples:(It=(ge=L.strictTuples)!==null&&ge!==void 0?ge:Or)!==null&&It!==void 0?It:"log",strictRequired:(xn=(Br=L.strictRequired)!==null&&Br!==void 0?Br:Or)!==null&&xn!==void 0?xn:!1,code:L.code?{...L.code,optimize:ki,regExp:st}:{optimize:ki,regExp:st},loopRequired:(Nn=L.loopRequired)!==null&&Nn!==void 0?Nn:v,loopEnum:(Be=L.loopEnum)!==null&&Be!==void 0?Be:v,meta:(kn=L.meta)!==null&&kn!==void 0?kn:!0,messages:(Kr=L.messages)!==null&&Kr!==void 0?Kr:!0,inlineRefs:(Wr=L.inlineRefs)!==null&&Wr!==void 0?Wr:!0,schemaId:(Xr=L.schemaId)!==null&&Xr!==void 0?Xr:"$id",addUsedSchema:(Dn=L.addUsedSchema)!==null&&Dn!==void 0?Dn:!0,validateSchema:(Et=L.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(ze=L.validateFormats)!==null&&ze!==void 0?ze:!0,unicodeRegExp:(Qr=L.unicodeRegExp)!==null&&Qr!==void 0?Qr:!0,int32range:(An=L.int32range)!==null&&An!==void 0?An:!0,uriResolver:Ir}}class w{constructor(x={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,x=this.opts={...x,..._(x)};const{es5:T,lines:N}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:g,es5:T,lines:N}),this.logger=G(x.logger);const b=x.validateFormats;x.validateFormats=!1,this.RULES=(0,o.getRules)(),O.call(this,m,x,"NOT SUPPORTED"),O.call(this,y,x,"DEPRECATED","warn"),this._metaOpts=oe.call(this),x.formats&&D.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),x.keywords&&z.call(this,x.keywords),typeof x.meta=="object"&&this.addMetaSchema(x.meta),j.call(this),x.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:x,meta:T,schemaId:N}=this.opts;let b=d;N==="id"&&(b={...d},b.id=b.$id,delete b.$id),T&&x&&this.addMetaSchema(b,b[N],!1)}defaultMeta(){const{meta:x,schemaId:T}=this.opts;return this.opts.defaultMeta=typeof x=="object"?x[T]||x:void 0}validate(x,T){let N;if(typeof x=="string"){if(N=this.getSchema(x),!N)throw new Error(`no schema with key or ref "${x}"`)}else N=this.compile(x);const b=N(T);return"$async"in N||(this.errors=N.errors),b}compile(x,T){const N=this._addSchema(x,T);return N.validate||this._compileSchemaEnv(N)}compileAsync(x,T){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:N}=this.opts;return b.call(this,x,T);async function b(re,ge){await E.call(this,re.$schema);const It=this._addSchema(re,ge);return It.validate||R.call(this,It)}async function E(re){re&&!this.getSchema(re)&&await b.call(this,{$ref:re},!0)}async function R(re){try{return this._compileSchemaEnv(re)}catch(ge){if(!(ge instanceof i.default))throw ge;return M.call(this,ge),await U.call(this,ge.missingSchema),R.call(this,re)}}function M({missingSchema:re,missingRef:ge}){if(this.refs[re])throw new Error(`AnySchema ${re} is loaded but ${ge} cannot be resolved`)}async function U(re){const ge=await ee.call(this,re);this.refs[re]||await E.call(this,ge.$schema),this.refs[re]||this.addSchema(ge,re,T)}async function ee(re){const ge=this._loading[re];if(ge)return ge;try{return await(this._loading[re]=N(re))}finally{delete this._loading[re]}}}addSchema(x,T,N,b=this.opts.validateSchema){if(Array.isArray(x)){for(const R of x)this.addSchema(R,void 0,N,b);return this}let E;if(typeof x=="object"){const{schemaId:R}=this.opts;if(E=x[R],E!==void 0&&typeof E!="string")throw new Error(`schema ${R} must be string`)}return T=(0,l.normalizeId)(T||E),this._checkUnique(T),this.schemas[T]=this._addSchema(x,N,T,b,!0),this}addMetaSchema(x,T,N=this.opts.validateSchema){return this.addSchema(x,T,!0,N),this}validateSchema(x,T){if(typeof x=="boolean")return!0;let N;if(N=x.$schema,N!==void 0&&typeof N!="string")throw new Error("$schema must be a string");if(N=N||this.opts.defaultMeta||this.defaultMeta(),!N)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(N,x);if(!b&&T){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return b}getSchema(x){let T;for(;typeof(T=$.call(this,x))=="string";)x=T;if(T===void 0){const{schemaId:N}=this.opts,b=new s.SchemaEnv({schema:{},schemaId:N});if(T=s.resolveSchema.call(this,b,x),!T)return;this.refs[x]=T}return T.validate||this._compileSchemaEnv(T)}removeSchema(x){if(x instanceof RegExp)return this._removeAllSchemas(this.schemas,x),this._removeAllSchemas(this.refs,x),this;switch(typeof x){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const T=$.call(this,x);return typeof T=="object"&&this._cache.delete(T.schema),delete this.schemas[x],delete this.refs[x],this}case"object":{const T=x;this._cache.delete(T);let N=x[this.opts.schemaId];return N&&(N=(0,l.normalizeId)(N),delete this.schemas[N],delete this.refs[N]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(x){for(const T of x)this.addKeyword(T);return this}addKeyword(x,T){let N;if(typeof x=="string")N=x,typeof T=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),T.keyword=N);else if(typeof x=="object"&&T===void 0){if(T=x,N=T.keyword,Array.isArray(N)&&!N.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(K.call(this,N,T),!T)return(0,f.eachItem)(N,E=>Oe.call(this,E)),this;it.call(this,T);const b={...T,type:(0,c.getJSONTypes)(T.type),schemaType:(0,c.getJSONTypes)(T.schemaType)};return(0,f.eachItem)(N,b.type.length===0?E=>Oe.call(this,E,b):E=>b.type.forEach(R=>Oe.call(this,E,b,R))),this}getKeyword(x){const T=this.RULES.all[x];return typeof T=="object"?T.definition:!!T}removeKeyword(x){const{RULES:T}=this;delete T.keywords[x],delete T.all[x];for(const N of T.rules){const b=N.rules.findIndex(E=>E.keyword===x);b>=0&&N.rules.splice(b,1)}return this}addFormat(x,T){return typeof T=="string"&&(T=new RegExp(T)),this.formats[x]=T,this}errorsText(x=this.errors,{separator:T=", ",dataVar:N="data"}={}){return!x||x.length===0?"No errors":x.map(b=>`${N}${b.instancePath} ${b.message}`).reduce((b,E)=>b+T+E)}$dataMetaSchema(x,T){const N=this.RULES.all;x=JSON.parse(JSON.stringify(x));for(const b of T){const E=b.split("/").slice(1);let R=x;for(const M of E)R=R[M];for(const M in N){const U=N[M];if(typeof U!="object")continue;const{$data:ee}=U.definition,re=R[M];ee&&re&&(R[M]=qt(re))}}return x}_removeAllSchemas(x,T){for(const N in x){const b=x[N];(!T||T.test(N))&&(typeof b=="string"?delete x[N]:b&&!b.meta&&(this._cache.delete(b.schema),delete x[N]))}}_addSchema(x,T,N,b=this.opts.validateSchema,E=this.opts.addUsedSchema){let R;const{schemaId:M}=this.opts;if(typeof x=="object")R=x[M];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof x!="boolean")throw new Error("schema must be object or boolean")}let U=this._cache.get(x);if(U!==void 0)return U;N=(0,l.normalizeId)(R||N);const ee=l.getSchemaRefs.call(this,x,N);return U=new s.SchemaEnv({schema:x,schemaId:M,meta:T,baseId:N,localRefs:ee}),this._cache.set(U.schema,U),E&&!N.startsWith("#")&&(N&&this._checkUnique(N),this.refs[N]=U),b&&this.validateSchema(x,!0),U}_checkUnique(x){if(this.schemas[x]||this.refs[x])throw new Error(`schema with key or id "${x}" already exists`)}_compileSchemaEnv(x){if(x.meta?this._compileMetaSchema(x):s.compileSchema.call(this,x),!x.validate)throw new Error("ajv implementation error");return x.validate}_compileMetaSchema(x){const T=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,x)}finally{this.opts=T}}}w.ValidationError=n.default,w.MissingRefError=i.default,e.default=w;function O(L,x,T,N="error"){for(const b in L){const E=b;E in x&&this.logger[N](`${T}: option ${b}. ${L[E]}`)}}function $(L){return L=(0,l.normalizeId)(L),this.schemas[L]||this.refs[L]}function j(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const x in L)this.addSchema(L[x],x)}function D(){for(const L in this.opts.formats){const x=this.opts.formats[L];x&&this.addFormat(L,x)}}function z(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const x in L){const T=L[x];T.keyword||(T.keyword=x),this.addKeyword(T)}}function oe(){const L={...this.opts};for(const x of h)delete L[x];return L}const q={log(){},warn(){},error(){}};function G(L){if(L===!1)return q;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const ae=/^[a-z_$][a-z0-9_$:-]*$/i;function K(L,x){const{RULES:T}=this;if((0,f.eachItem)(L,N=>{if(T.keywords[N])throw new Error(`Keyword ${N} is already defined`);if(!ae.test(N))throw new Error(`Keyword ${N} has invalid name`)}),!!x&&x.$data&&!("code"in x||"validate"in x))throw new Error('$data keyword must have "code" or "validate" function')}function Oe(L,x,T){var N;const b=x==null?void 0:x.post;if(T&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let R=b?E.post:E.rules.find(({type:U})=>U===T);if(R||(R={type:T,rules:[]},E.rules.push(R)),E.keywords[L]=!0,!x)return;const M={keyword:L,definition:{...x,type:(0,c.getJSONTypes)(x.type),schemaType:(0,c.getJSONTypes)(x.schemaType)}};x.before?nt.call(this,R,M,x.before):R.rules.push(M),E.all[L]=M,(N=x.implements)===null||N===void 0||N.forEach(U=>this.addKeyword(U))}function nt(L,x,T){const N=L.rules.findIndex(b=>b.keyword===T);N>=0?L.rules.splice(N,0,x):(L.rules.push(x),this.logger.warn(`rule ${T} is not defined`))}function it(L){let{metaSchema:x}=L;x!==void 0&&(L.$data&&this.opts.$data&&(x=qt(x)),L.validateSchema=this.compile(x,!0))}const Sr={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function qt(L){return{anyOf:[L,Sr]}}}(Wa);var Hs={},Js={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});const cm={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Gs.default=cm;var gr={};Object.defineProperty(gr,"__esModule",{value:!0}),gr.callRef=gr.getValidate=void 0;const lm=Cr,Wc=Y,Ue=Z,Ur=wt,Xc=Ce,ui=C,fm={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:l}=n,{root:c}=o;if((r==="#"||r==="#/")&&i===c.baseId)return d();const f=Xc.resolveRef.call(l,c,i,r);if(f===void 0)throw new lm.default(n.opts.uriResolver,i,r);if(f instanceof Xc.SchemaEnv)return p(f);return u(f);function d(){if(o===c)return pi(e,s,o,o.$async);const h=t.scopeValue("root",{ref:c});return pi(e,(0,Ue._)`${h}.validate`,c,c.$async)}function p(h){const g=Qc(e,h);pi(e,g,h,h.$async)}function u(h){const g=t.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Ue.stringify)(h)}:{ref:h}),m=t.name("valid"),y=e.subschema({schema:h,dataTypes:[],schemaPath:Ue.nil,topSchemaRef:g,errSchemaPath:r},m);e.mergeEvaluated(y),e.ok(m)}}};function Qc(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ue._)`${r.scopeValue("wrapper",{ref:t})}.validate`}gr.getValidate=Qc;function pi(e,t,r,n){const{gen:i,it:o}=e,{allErrors:s,schemaEnv:a,opts:l}=o,c=l.passContext?Ur.default.this:Ue.nil;n?f():d();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");const h=i.let("valid");i.try(()=>{i.code((0,Ue._)`await ${(0,Wc.callValidateCode)(e,t,c)}`),u(t),s||i.assign(h,!0)},g=>{i.if((0,Ue._)`!(${g} instanceof ${o.ValidationError})`,()=>i.throw(g)),p(g),s||i.assign(h,!1)}),e.ok(h)}function d(){e.result((0,Wc.callValidateCode)(e,t,c),()=>u(t),()=>p(t))}function p(h){const g=(0,Ue._)`${h}.errors`;i.assign(Ur.default.vErrors,(0,Ue._)`${Ur.default.vErrors} === null ? ${g} : ${Ur.default.vErrors}.concat(${g})`),i.assign(Ur.default.errors,(0,Ue._)`${Ur.default.vErrors}.length`)}function u(h){var g;if(!o.opts.unevaluated)return;const m=(g=r==null?void 0:r.validate)===null||g===void 0?void 0:g.evaluated;if(o.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(o.props=ui.mergeEvaluated.props(i,m.props,o.props));else{const y=i.var("props",(0,Ue._)`${h}.evaluated.props`);o.props=ui.mergeEvaluated.props(i,y,o.props,Ue.Name)}if(o.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(o.items=ui.mergeEvaluated.items(i,m.items,o.items));else{const y=i.var("items",(0,Ue._)`${h}.evaluated.items`);o.items=ui.mergeEvaluated.items(i,y,o.items,Ue.Name)}}}gr.callRef=pi,gr.default=fm,Object.defineProperty(Js,"__esModule",{value:!0});const dm=Gs,um=gr,pm=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",dm.default,um.default];Js.default=pm;var Bs={},Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});const hi=Z,Qt=hi.operators,mi={maximum:{okStr:"<=",ok:Qt.LTE,fail:Qt.GT},minimum:{okStr:">=",ok:Qt.GTE,fail:Qt.LT},exclusiveMaximum:{okStr:"<",ok:Qt.LT,fail:Qt.GTE},exclusiveMinimum:{okStr:">",ok:Qt.GT,fail:Qt.LTE}},hm={message:({keyword:e,schemaCode:t})=>(0,hi.str)`must be ${mi[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,hi._)`{comparison: ${mi[e].okStr}, limit: ${t}}`},mm={keyword:Object.keys(mi),type:"number",schemaType:"number",$data:!0,error:hm,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,hi._)`${r} ${mi[t].fail} ${n} || isNaN(${r})`)}};Ks.default=mm;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});const bn=Z,ym={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,bn.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,bn._)`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:n,it:i}=e,o=i.opts.multipleOfPrecision,s=t.let("res"),a=o?(0,bn._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,bn._)`${s} !== parseInt(${s})`;e.fail$data((0,bn._)`(${n} === 0 || (${s} = ${r}/${n}, ${a}))`)}};Ws.default=ym;var Xs={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});function Zc(e){const t=e.length;let r=0,n=0,i;for(;n<t;)r++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=e.charCodeAt(n),(i&64512)===56320&&n++);return r}Qs.default=Zc,Zc.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(Xs,"__esModule",{value:!0});const vr=Z,gm=C,vm=Qs,wm={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,vr.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,vr._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n,it:i}=e,o=t==="maxLength"?vr.operators.GT:vr.operators.LT,s=i.opts.unicode===!1?(0,vr._)`${r}.length`:(0,vr._)`${(0,gm.useFunc)(e.gen,vm.default)}(${r})`;e.fail$data((0,vr._)`${s} ${o} ${n}`)}};Xs.default=wm;var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});const bm=Y,yi=Z,$m={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,yi.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,yi._)`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:n,schemaCode:i,it:o}=e,s=o.opts.unicodeRegExp?"u":"",a=r?(0,yi._)`(new RegExp(${i}, ${s}))`:(0,bm.usePattern)(e,n);e.fail$data((0,yi._)`!${a}.test(${t})`)}};Zs.default=$m;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});const $n=Z,_m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,$n.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,$n._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,i=t==="maxProperties"?$n.operators.GT:$n.operators.LT;e.fail$data((0,$n._)`Object.keys(${r}).length ${i} ${n}`)}};Ys.default=_m;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});const _n=Y,Sn=Z,Sm=C,Om={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,Sn.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Sn._)`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:n,data:i,$data:o,it:s}=e,{opts:a}=s;if(!o&&r.length===0)return;const l=r.length>=a.loopRequired;if(s.allErrors?c():f(),a.strictRequired){const u=e.parentSchema.properties,{definedProperties:h}=e.it;for(const g of r)if((u==null?void 0:u[g])===void 0&&!h.has(g)){const m=s.schemaEnv.baseId+s.errSchemaPath,y=`required property "${g}" is not defined at "${m}" (strictRequired)`;(0,Sm.checkStrictMode)(s,y,s.opts.strictRequired)}}function c(){if(l||o)e.block$data(Sn.nil,d);else for(const u of r)(0,_n.checkReportMissingProp)(e,u)}function f(){const u=t.let("missing");if(l||o){const h=t.let("valid",!0);e.block$data(h,()=>p(u,h)),e.ok(h)}else t.if((0,_n.checkMissingProp)(e,r,u)),(0,_n.reportMissingProp)(e,u),t.else()}function d(){t.forOf("prop",n,u=>{e.setParams({missingProperty:u}),t.if((0,_n.noPropertyInData)(t,i,u,a.ownProperties),()=>e.error())})}function p(u,h){e.setParams({missingProperty:u}),t.forOf(u,n,()=>{t.assign(h,(0,_n.propertyInData)(t,i,u,a.ownProperties)),t.if((0,Sn.not)(h),()=>{e.error(),t.break()})},Sn.nil)}}};eo.default=Om;var to={};Object.defineProperty(to,"__esModule",{value:!0});const On=Z,Im={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,On.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,On._)`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:n}=e,i=t==="maxItems"?On.operators.GT:On.operators.LT;e.fail$data((0,On._)`${r}.length ${i} ${n}`)}};to.default=Im;var ro={},In={};Object.defineProperty(In,"__esModule",{value:!0});const Yc=mc;Yc.code='require("ajv/dist/runtime/equal").default',In.default=Yc,Object.defineProperty(ro,"__esModule",{value:!0});const no=Se,je=Z,Em=C,Pm=In,jm={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,je.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,je._)`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:n,schema:i,parentSchema:o,schemaCode:s,it:a}=e;if(!n&&!i)return;const l=t.let("valid"),c=o.items?(0,no.getSchemaTypes)(o.items):[];e.block$data(l,f,(0,je._)`${s} === false`),e.ok(l);function f(){const h=t.let("i",(0,je._)`${r}.length`),g=t.let("j");e.setParams({i:h,j:g}),t.assign(l,!0),t.if((0,je._)`${h} > 1`,()=>(d()?p:u)(h,g))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,g){const m=t.name("item"),y=(0,no.checkDataTypes)(c,m,a.opts.strictNumbers,no.DataType.Wrong),v=t.const("indices",(0,je._)`{}`);t.for((0,je._)`;${h}--;`,()=>{t.let(m,(0,je._)`${r}[${h}]`),t.if(y,(0,je._)`continue`),c.length>1&&t.if((0,je._)`typeof ${m} == "string"`,(0,je._)`${m} += "_"`),t.if((0,je._)`typeof ${v}[${m}] == "number"`,()=>{t.assign(g,(0,je._)`${v}[${m}]`),e.error(),t.assign(l,!1).break()}).code((0,je._)`${v}[${m}] = ${h}`)})}function u(h,g){const m=(0,Em.useFunc)(t,Pm.default),y=t.name("outer");t.label(y).for((0,je._)`;${h}--;`,()=>t.for((0,je._)`${g} = ${h}; ${g}--;`,()=>t.if((0,je._)`${m}(${r}[${h}], ${r}[${g}])`,()=>{e.error(),t.assign(l,!1).break(y)})))}}};ro.default=jm;var io={};Object.defineProperty(io,"__esModule",{value:!0});const so=Z,xm=C,Nm=In,km={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,so._)`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:n,schemaCode:i,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,so._)`!${(0,xm.useFunc)(t,Nm.default)}(${r}, ${i})`):e.fail((0,so._)`${o} !== ${r}`)}};io.default=km;var oo={};Object.defineProperty(oo,"__esModule",{value:!0});const En=Z,Dm=C,Am=In,Rm={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,En._)`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:n,schema:i,schemaCode:o,it:s}=e;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=s.opts.loopEnum;let l;const c=()=>l??(l=(0,Dm.useFunc)(t,Am.default));let f;if(a||n)f=t.let("valid"),e.block$data(f,d);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const u=t.const("vSchema",o);f=(0,En.or)(...i.map((h,g)=>p(u,g)))}e.pass(f);function d(){t.assign(f,!1),t.forOf("v",o,u=>t.if((0,En._)`${c()}(${r}, ${u})`,()=>t.assign(f,!0).break()))}function p(u,h){const g=i[h];return typeof g=="object"&&g!==null?(0,En._)`${c()}(${r}, ${u}[${h}])`:(0,En._)`${r} === ${g}`}}};oo.default=Rm,Object.defineProperty(Bs,"__esModule",{value:!0});const Tm=Ks,Lm=Ws,Mm=Xs,Cm=Zs,Um=Ys,qm=eo,zm=to,Fm=ro,Vm=io,Hm=oo,Jm=[Tm.default,Lm.default,Mm.default,Cm.default,Um.default,qm.default,zm.default,Fm.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Vm.default,Hm.default];Bs.default=Jm;var ao={},qr={};Object.defineProperty(qr,"__esModule",{value:!0}),qr.validateAdditionalItems=void 0;const wr=Z,co=C,Gm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,wr.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,wr._)`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,co.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}el(e,n)}};function el(e,t){const{gen:r,schema:n,data:i,keyword:o,it:s}=e;s.items=!0;const a=r.const("len",(0,wr._)`${i}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,wr._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,co.alwaysValidSchema)(s,n)){const c=r.var("valid",(0,wr._)`${a} <= ${t.length}`);r.if((0,wr.not)(c),()=>l(c)),e.ok(c)}function l(c){r.forRange("i",t.length,a,f=>{e.subschema({keyword:o,dataProp:f,dataPropType:co.Type.Num},c),s.allErrors||r.if((0,wr.not)(c),()=>r.break())})}}qr.validateAdditionalItems=el,qr.default=Gm;var lo={},zr={};Object.defineProperty(zr,"__esModule",{value:!0}),zr.validateTuple=void 0;const tl=Z,gi=C,Bm=Y,Km={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return rl(e,"additionalItems",t);r.items=!0,!(0,gi.alwaysValidSchema)(r,t)&&e.ok((0,Bm.validateArray)(e))}};function rl(e,t,r=e.schema){const{gen:n,parentSchema:i,data:o,keyword:s,it:a}=e;f(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=gi.mergeEvaluated.items(n,r.length,a.items));const l=n.name("valid"),c=n.const("len",(0,tl._)`${o}.length`);r.forEach((d,p)=>{(0,gi.alwaysValidSchema)(a,d)||(n.if((0,tl._)`${c} > ${p}`,()=>e.subschema({keyword:s,schemaProp:p,dataProp:p},l)),e.ok(l))});function f(d){const{opts:p,errSchemaPath:u}=a,h=r.length,g=h===d.minItems&&(h===d.maxItems||d[t]===!1);if(p.strictTuples&&!g){const m=`"${s}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${u}"`;(0,gi.checkStrictMode)(a,m,p.strictTuples)}}}zr.validateTuple=rl,zr.default=Km,Object.defineProperty(lo,"__esModule",{value:!0});const Wm=zr,Xm={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Wm.validateTuple)(e,"items")};lo.default=Xm;var fo={};Object.defineProperty(fo,"__esModule",{value:!0});const nl=Z,Qm=C,Zm=Y,Ym=qr,ey={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,nl.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,nl._)`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,!(0,Qm.alwaysValidSchema)(n,t)&&(i?(0,Ym.validateAdditionalItems)(e,i):e.ok((0,Zm.validateArray)(e)))}};fo.default=ey;var uo={};Object.defineProperty(uo,"__esModule",{value:!0});const rt=Z,vi=C,ty={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>t===void 0?(0,rt.str)`must contain at least ${e} valid item(s)`:(0,rt.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,rt._)`{minContains: ${e}}`:(0,rt._)`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:i,it:o}=e;let s,a;const{minContains:l,maxContains:c}=n;o.opts.next?(s=l===void 0?1:l,a=c):s=1;const f=t.const("len",(0,rt._)`${i}.length`);if(e.setParams({min:s,max:a}),a===void 0&&s===0){(0,vi.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,vi.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,vi.alwaysValidSchema)(o,r)){let g=(0,rt._)`${f} >= ${s}`;a!==void 0&&(g=(0,rt._)`${g} && ${f} <= ${a}`),e.pass(g);return}o.items=!0;const d=t.name("valid");a===void 0&&s===1?u(d,()=>t.if(d,()=>t.break())):s===0?(t.let(d,!0),a!==void 0&&t.if((0,rt._)`${i}.length > 0`,p)):(t.let(d,!1),p()),e.result(d,()=>e.reset());function p(){const g=t.name("_valid"),m=t.let("count",0);u(g,()=>t.if(g,()=>h(m)))}function u(g,m){t.forRange("i",0,f,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:vi.Type.Num,compositeRule:!0},g),m()})}function h(g){t.code((0,rt._)`${g}++`),a===void 0?t.if((0,rt._)`${g} >= ${s}`,()=>t.assign(d,!0).break()):(t.if((0,rt._)`${g} > ${a}`,()=>t.assign(d,!1).break()),s===1?t.assign(d,!0):t.if((0,rt._)`${g} >= ${s}`,()=>t.assign(d,!0)))}}};uo.default=ty;var il={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Z,r=C,n=Y;e.error={message:({params:{property:l,depsCount:c,deps:f}})=>{const d=c===1?"property":"properties";return(0,t.str)`must have ${d} ${f} when property ${l} is present`},params:({params:{property:l,depsCount:c,deps:f,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${c},
    deps: ${f}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[c,f]=o(l);s(l,c),a(l,f)}};function o({schema:l}){const c={},f={};for(const d in l){if(d==="__proto__")continue;const p=Array.isArray(l[d])?c:f;p[d]=l[d]}return[c,f]}function s(l,c=l.schema){const{gen:f,data:d,it:p}=l;if(Object.keys(c).length===0)return;const u=f.let("missing");for(const h in c){const g=c[h];if(g.length===0)continue;const m=(0,n.propertyInData)(f,d,h,p.opts.ownProperties);l.setParams({property:h,depsCount:g.length,deps:g.join(", ")}),p.allErrors?f.if(m,()=>{for(const y of g)(0,n.checkReportMissingProp)(l,y)}):(f.if((0,t._)`${m} && (${(0,n.checkMissingProp)(l,g,u)})`),(0,n.reportMissingProp)(l,u),f.else())}}e.validatePropertyDeps=s;function a(l,c=l.schema){const{gen:f,data:d,keyword:p,it:u}=l,h=f.name("valid");for(const g in c)(0,r.alwaysValidSchema)(u,c[g])||(f.if((0,n.propertyInData)(f,d,g,u.opts.ownProperties),()=>{const m=l.subschema({keyword:p,schemaProp:g},h);l.mergeValidEvaluated(m,h)},()=>f.var(h,!0)),l.ok(h))}e.validateSchemaDeps=a,e.default=i})(il);var po={};Object.defineProperty(po,"__esModule",{value:!0});const sl=Z,ry=C,ny={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,sl._)`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:n,it:i}=e;if((0,ry.alwaysValidSchema)(i,r))return;const o=t.name("valid");t.forIn("key",n,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,sl.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};po.default=ny;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});const bi=Y,pt=Z,iy=wt,$i=C,sy={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,pt._)`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:n,data:i,errsCount:o,it:s}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=s;if(s.props=!0,l.removeAdditional!=="all"&&(0,$i.alwaysValidSchema)(s,r))return;const c=(0,bi.allSchemaProperties)(n.properties),f=(0,bi.allSchemaProperties)(n.patternProperties);d(),e.ok((0,pt._)`${o} === ${iy.default.errors}`);function d(){t.forIn("key",i,m=>{!c.length&&!f.length?h(m):t.if(p(m),()=>h(m))})}function p(m){let y;if(c.length>8){const v=(0,$i.schemaRefOrVal)(s,n.properties,"properties");y=(0,bi.isOwnProperty)(t,v,m)}else c.length?y=(0,pt.or)(...c.map(v=>(0,pt._)`${m} === ${v}`)):y=pt.nil;return f.length&&(y=(0,pt.or)(y,...f.map(v=>(0,pt._)`${(0,bi.usePattern)(e,v)}.test(${m})`))),(0,pt.not)(y)}function u(m){t.code((0,pt._)`delete ${i}[${m}]`)}function h(m){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){u(m);return}if(r===!1){e.setParams({additionalProperty:m}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,$i.alwaysValidSchema)(s,r)){const y=t.name("valid");l.removeAdditional==="failing"?(g(m,y,!1),t.if((0,pt.not)(y),()=>{e.reset(),u(m)})):(g(m,y),a||t.if((0,pt.not)(y),()=>t.break()))}}function g(m,y,v){const _={keyword:"additionalProperties",dataProp:m,dataPropType:$i.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};wi.default=sy;var ho={};Object.defineProperty(ho,"__esModule",{value:!0});const oy=ft,ol=Y,mo=C,al=wi,ay={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:i,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&al.default.code(new oy.KeywordCxt(o,al.default,"additionalProperties"));const s=(0,ol.allSchemaProperties)(r);for(const d of s)o.definedProperties.add(d);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=mo.mergeEvaluated.props(t,(0,mo.toHash)(s),o.props));const a=s.filter(d=>!(0,mo.alwaysValidSchema)(o,r[d]));if(a.length===0)return;const l=t.name("valid");for(const d of a)c(d)?f(d):(t.if((0,ol.propertyInData)(t,i,d,o.opts.ownProperties)),f(d),o.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(l);function c(d){return o.opts.useDefaults&&!o.compositeRule&&r[d].default!==void 0}function f(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};ho.default=ay;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});const cl=Y,_i=Z,ll=C,fl=C,cy={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:i,it:o}=e,{opts:s}=o,a=(0,cl.allSchemaProperties)(r),l=a.filter(g=>(0,ll.alwaysValidSchema)(o,r[g]));if(a.length===0||l.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const c=s.strictSchema&&!s.allowMatchingProperties&&i.properties,f=t.name("valid");o.props!==!0&&!(o.props instanceof _i.Name)&&(o.props=(0,fl.evaluatedPropsToName)(t,o.props));const{props:d}=o;p();function p(){for(const g of a)c&&u(g),o.allErrors?h(g):(t.var(f,!0),h(g),t.if(f))}function u(g){for(const m in c)new RegExp(g).test(m)&&(0,ll.checkStrictMode)(o,`property ${m} matches pattern ${g} (use allowMatchingProperties)`)}function h(g){t.forIn("key",n,m=>{t.if((0,_i._)`${(0,cl.usePattern)(e,g)}.test(${m})`,()=>{const y=l.includes(g);y||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:m,dataPropType:fl.Type.Str},f),o.opts.unevaluated&&d!==!0?t.assign((0,_i._)`${d}[${m}]`,!0):!y&&!o.allErrors&&t.if((0,_i.not)(f),()=>t.break())})})}}};yo.default=cy;var go={};Object.defineProperty(go,"__esModule",{value:!0});const ly=C,fy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,ly.alwaysValidSchema)(n,r)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};go.default=fy;var vo={};Object.defineProperty(vo,"__esModule",{value:!0});const dy={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Y.validateUnion,error:{message:"must match a schema in anyOf"}};vo.default=dy;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});const Si=Z,uy=C,py={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Si._)`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const o=r,s=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(c),e.result(s,()=>e.reset(),()=>e.error(!0));function c(){o.forEach((f,d)=>{let p;(0,uy.alwaysValidSchema)(i,f)?t.var(l,!0):p=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&t.if((0,Si._)`${l} && ${s}`).assign(s,!1).assign(a,(0,Si._)`[${a}, ${d}]`).else(),t.if(l,()=>{t.assign(s,!0),t.assign(a,d),p&&e.mergeEvaluated(p,Si.Name)})})}}};wo.default=py;var bo={};Object.defineProperty(bo,"__esModule",{value:!0});const hy=C,my={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((o,s)=>{if((0,hy.alwaysValidSchema)(n,o))return;const a=e.subschema({keyword:"allOf",schemaProp:s},i);e.ok(i),e.mergeEvaluated(a)})}};bo.default=my;var $o={};Object.defineProperty($o,"__esModule",{value:!0});const Oi=Z,dl=C,yy={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,Oi.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Oi._)`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,dl.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=ul(n,"then"),o=ul(n,"else");if(!i&&!o)return;const s=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),i&&o){const f=t.let("ifClause");e.setParams({ifClause:f}),t.if(a,c("then",f),c("else",f))}else i?t.if(a,c("then")):t.if((0,Oi.not)(a),c("else"));e.pass(s,()=>e.error(!0));function l(){const f=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(f)}function c(f,d){return()=>{const p=e.subschema({keyword:f},a);t.assign(s,a),e.mergeValidEvaluated(p,s),d?t.assign(d,(0,Oi._)`${f}`):e.setParams({ifClause:f})}}}};function ul(e,t){const r=e.schema[t];return r!==void 0&&!(0,dl.alwaysValidSchema)(e,r)}$o.default=yy;var _o={};Object.defineProperty(_o,"__esModule",{value:!0});const gy=C,vy={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,gy.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};_o.default=vy,Object.defineProperty(ao,"__esModule",{value:!0});const wy=qr,by=lo,$y=zr,_y=fo,Sy=uo,Oy=il,Iy=po,Ey=wi,Py=ho,jy=yo,xy=go,Ny=vo,ky=wo,Dy=bo,Ay=$o,Ry=_o;function Ty(e=!1){const t=[xy.default,Ny.default,ky.default,Dy.default,Ay.default,Ry.default,Iy.default,Ey.default,Oy.default,Py.default,jy.default];return e?t.push(by.default,_y.default):t.push(wy.default,$y.default),t.push(Sy.default),t}ao.default=Ty;var So={},Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});const ve=Z,Ly={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,ve.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ve._)`{format: ${e}}`},code(e,t){const{gen:r,data:n,$data:i,schema:o,schemaCode:s,it:a}=e,{opts:l,errSchemaPath:c,schemaEnv:f,self:d}=a;if(!l.validateFormats)return;i?p():u();function p(){const h=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),g=r.const("fDef",(0,ve._)`${h}[${s}]`),m=r.let("fType"),y=r.let("format");r.if((0,ve._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(m,(0,ve._)`${g}.type || "string"`).assign(y,(0,ve._)`${g}.validate`),()=>r.assign(m,(0,ve._)`"string"`).assign(y,g)),e.fail$data((0,ve.or)(v(),_()));function v(){return l.strictSchema===!1?ve.nil:(0,ve._)`${s} && !${y}`}function _(){const w=f.$async?(0,ve._)`(${g}.async ? await ${y}(${n}) : ${y}(${n}))`:(0,ve._)`${y}(${n})`,O=(0,ve._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${n}))`;return(0,ve._)`${y} && ${y} !== true && ${m} === ${t} && !${O}`}}function u(){const h=d.formats[o];if(!h){v();return}if(h===!0)return;const[g,m,y]=_(h);g===t&&e.pass(w());function v(){if(l.strictSchema===!1){d.logger.warn(O());return}throw new Error(O());function O(){return`unknown format "${o}" ignored in schema at path "${c}"`}}function _(O){const $=O instanceof RegExp?(0,ve.regexpCode)(O):l.code.formats?(0,ve._)`${l.code.formats}${(0,ve.getProperty)(o)}`:void 0,j=r.scopeValue("formats",{key:o,ref:O,code:$});return typeof O=="object"&&!(O instanceof RegExp)?[O.type||"string",O.validate,(0,ve._)`${j}.validate`]:["string",O,j]}function w(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!f.$async)throw new Error("async format in sync schema");return(0,ve._)`await ${y}(${n})`}return typeof m=="function"?(0,ve._)`${y}(${n})`:(0,ve._)`${y}.test(${n})`}}}};Oo.default=Ly,Object.defineProperty(So,"__esModule",{value:!0});const My=[Oo.default];So.default=My;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.contentVocabulary=Fr.metadataVocabulary=void 0,Fr.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Fr.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(Hs,"__esModule",{value:!0});const Cy=Js,Uy=Bs,qy=ao,zy=So,pl=Fr,Fy=[Cy.default,Uy.default,(0,qy.default)(),zy.default,pl.metadataVocabulary,pl.contentVocabulary];Hs.default=Fy;var Io={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.DiscrError=void 0;var hl;(function(e){e.Tag="tag",e.Mapping="mapping"})(hl||(Ii.DiscrError=hl={})),Object.defineProperty(Io,"__esModule",{value:!0});const Vr=Z,Eo=Ii,ml=Ce,Vy=Cr,Hy=C,Jy={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===Eo.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Vr._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:n,parentSchema:i,it:o}=e,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),c=t.const("tag",(0,Vr._)`${r}${(0,Vr.getProperty)(a)}`);t.if((0,Vr._)`typeof ${c} == "string"`,()=>f(),()=>e.error(!1,{discrError:Eo.DiscrError.Tag,tag:c,tagName:a})),e.ok(l);function f(){const u=p();t.if(!1);for(const h in u)t.elseIf((0,Vr._)`${c} === ${h}`),t.assign(l,d(u[h]));t.else(),e.error(!1,{discrError:Eo.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function d(u){const h=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:u},h);return e.mergeEvaluated(g,Vr.Name),h}function p(){var u;const h={},g=y(i);let m=!0;for(let w=0;w<s.length;w++){let O=s[w];if(O!=null&&O.$ref&&!(0,Hy.schemaHasRulesButRef)(O,o.self.RULES)){const j=O.$ref;if(O=ml.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,j),O instanceof ml.SchemaEnv&&(O=O.schema),O===void 0)throw new Vy.default(o.opts.uriResolver,o.baseId,j)}const $=(u=O==null?void 0:O.properties)===null||u===void 0?void 0:u[a];if(typeof $!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);m=m&&(g||y(O)),v($,w)}if(!m)throw new Error(`discriminator: "${a}" must be required`);return h;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,O){if(w.const)_(w.const,O);else if(w.enum)for(const $ of w.enum)_($,O);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,O){if(typeof w!="string"||w in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[w]=O}}}};Io.default=Jy;var Gy={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Wa,n=Hs,i=Io,o=Gy,s=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(h=>this.addVocabulary(h)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const h=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(h,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var c=ft;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var f=Z;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var d=vn;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var p=Cr;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})})(Ss,Ss.exports);var yl=Ss.exports,gl=en(yl),Po={exports:{}},vl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(q,G){return{validate:q,compare:G}}e.fullFormats={date:t(o,s),time:t(l(!0),c),"date-time":t(p(!0),u),"iso-time":t(l(),f),"iso-date-time":t(p(),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:y,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:oe,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:_,int32:{type:"number",validate:$},int64:{type:"number",validate:j},float:{type:"number",validate:D},double:{type:"number",validate:D},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(q){return q%4===0&&(q%100!==0||q%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(q){const G=n.exec(q);if(!G)return!1;const ae=+G[1],K=+G[2],Oe=+G[3];return K>=1&&K<=12&&Oe>=1&&Oe<=(K===2&&r(ae)?29:i[K])}function s(q,G){if(q&&G)return q>G?1:q<G?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(q){return function(ae){const K=a.exec(ae);if(!K)return!1;const Oe=+K[1],nt=+K[2],it=+K[3],Sr=K[4],qt=K[5]==="-"?-1:1,L=+(K[6]||0),x=+(K[7]||0);if(L>23||x>59||q&&!Sr)return!1;if(Oe<=23&&nt<=59&&it<60)return!0;const T=nt-x*qt,N=Oe-L*qt-(T<0?1:0);return(N===23||N===-1)&&(T===59||T===-1)&&it<61}}function c(q,G){if(!(q&&G))return;const ae=new Date("2020-01-01T"+q).valueOf(),K=new Date("2020-01-01T"+G).valueOf();if(ae&&K)return ae-K}function f(q,G){if(!(q&&G))return;const ae=a.exec(q),K=a.exec(G);if(ae&&K)return q=ae[1]+ae[2]+ae[3],G=K[1]+K[2]+K[3],q>G?1:q<G?-1:0}const d=/t|\s/i;function p(q){const G=l(q);return function(K){const Oe=K.split(d);return Oe.length===2&&o(Oe[0])&&G(Oe[1])}}function u(q,G){if(!(q&&G))return;const ae=new Date(q).valueOf(),K=new Date(G).valueOf();if(ae&&K)return ae-K}function h(q,G){if(!(q&&G))return;const[ae,K]=q.split(d),[Oe,nt]=G.split(d),it=s(ae,Oe);if(it!==void 0)return it||c(K,nt)}const g=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function y(q){return g.test(q)&&m.test(q)}const v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function _(q){return v.lastIndex=0,v.test(q)}const w=-2147483648,O=2**31-1;function $(q){return Number.isInteger(q)&&q<=O&&q>=w}function j(q){return Number.isInteger(q)}function D(){return!0}const z=/[^\\]\\Z/;function oe(q){if(z.test(q))return!1;try{return new RegExp(q),!0}catch{return!1}}})(vl);var wl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=yl,r=Z,n=r.operators,i={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:a,schemaCode:l})=>(0,r.str)`should be ${i[a].okStr} ${l}`,params:({keyword:a,schemaCode:l})=>(0,r._)`{comparison: ${i[a].okStr}, limit: ${l}}`};e.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:o,code(a){const{gen:l,data:c,schemaCode:f,keyword:d,it:p}=a,{opts:u,self:h}=p;if(!u.validateFormats)return;const g=new t.KeywordCxt(p,h.RULES.all.format.definition,"format");g.$data?m():y();function m(){const _=l.scopeValue("formats",{ref:h.formats,code:u.code.formats}),w=l.const("fmt",(0,r._)`${_}[${g.schemaCode}]`);a.fail$data((0,r.or)((0,r._)`typeof ${w} != "object"`,(0,r._)`${w} instanceof RegExp`,(0,r._)`typeof ${w}.compare != "function"`,v(w)))}function y(){const _=g.schema,w=h.formats[_];if(!w||w===!0)return;if(typeof w!="object"||w instanceof RegExp||typeof w.compare!="function")throw new Error(`"${d}": format "${_}" does not define "compare" function`);const O=l.scopeValue("formats",{key:_,ref:w,code:u.code.formats?(0,r._)`${u.code.formats}${(0,r.getProperty)(_)}`:void 0});a.fail$data(v(O))}function v(_){return(0,r._)`${_}.compare(${c}, ${f}) ${i[d].fail} 0`}},dependencies:["format"]};const s=a=>(a.addKeyword(e.formatLimitDefinition),a);e.default=s})(wl),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=vl,n=wl,i=Z,o=new i.Name("fullFormats"),s=new i.Name("fastFormats"),a=(c,f={keywords:!0})=>{if(Array.isArray(f))return l(c,f,r.fullFormats,o),c;const[d,p]=f.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,o],u=f.formats||r.formatNames;return l(c,u,d,p),f.keywords&&(0,n.default)(c),c};a.get=(c,f="full")=>{const p=(f==="fast"?r.fastFormats:r.fullFormats)[c];if(!p)throw new Error(`Unknown format "${c}"`);return p};function l(c,f,d,p){var u,h;(u=(h=c.opts.code).formats)!==null&&u!==void 0||(h.formats=(0,i._)`require("ajv-formats/dist/formats").${p}`);for(const g of f)c.addFormat(g,d[g])}e.exports=t=a,Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}(Po,Po.exports);var By=Po.exports,Ky=en(By),bl={exports:{}},jo={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,n){n(t)})(rr,function(r){function n(){for(var I=arguments.length,S=Array(I),P=0;P<I;P++)S[P]=arguments[P];if(S.length>1){S[0]=S[0].slice(0,-1);for(var A=S.length-1,k=1;k<A;++k)S[k]=S[k].slice(1,-1);return S[A]=S[A].slice(1),S.join("")}else return S[0]}function i(I){return"(?:"+I+")"}function o(I){return I===void 0?"undefined":I===null?"null":Object.prototype.toString.call(I).split(" ").pop().split("]").shift().toLowerCase()}function s(I){return I.toUpperCase()}function a(I){return I!=null?I instanceof Array?I:typeof I.length!="number"||I.split||I.setInterval||I.call?[I]:Array.prototype.slice.call(I):[]}function l(I,S){var P=I;if(S)for(var A in S)P[A]=S[A];return P}function c(I){var S="[A-Za-z]",P="[0-9]",A=n(P,"[A-Fa-f]"),k=i(i("%[EFef]"+A+"%"+A+A+"%"+A+A)+"|"+i("%[89A-Fa-f]"+A+"%"+A+A)+"|"+i("%"+A+A)),V="[\\:\\/\\?\\#\\[\\]\\@]",H="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ne=n(V,H),pe=I?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",we=I?"[\\uE000-\\uF8FF]":"[]",te=n(S,P,"[\\-\\.\\_\\~]",pe);i(S+n(S,P,"[\\+\\-\\.]")+"*"),i(i(k+"|"+n(te,H,"[\\:]"))+"*");var fe=i(i("25[0-5]")+"|"+i("2[0-4]"+P)+"|"+i("1"+P+P)+"|"+i("0?[1-9]"+P)+"|0?0?"+P),be=i(fe+"\\."+fe+"\\."+fe+"\\."+fe),W=i(A+"{1,4}"),me=i(i(W+"\\:"+W)+"|"+be),_e=i(i(W+"\\:")+"{6}"+me),ye=i("\\:\\:"+i(W+"\\:")+"{5}"+me),tr=i(i(W)+"?\\:\\:"+i(W+"\\:")+"{4}"+me),jt=i(i(i(W+"\\:")+"{0,1}"+W)+"?\\:\\:"+i(W+"\\:")+"{3}"+me),xt=i(i(i(W+"\\:")+"{0,2}"+W)+"?\\:\\:"+i(W+"\\:")+"{2}"+me),Yr=i(i(i(W+"\\:")+"{0,3}"+W)+"?\\:\\:"+W+"\\:"+me),Er=i(i(i(W+"\\:")+"{0,4}"+W)+"?\\:\\:"+me),ot=i(i(i(W+"\\:")+"{0,5}"+W)+"?\\:\\:"+W),Nt=i(i(i(W+"\\:")+"{0,6}"+W)+"?\\:\\:"),Pr=i([_e,ye,tr,jt,xt,Yr,Er,ot,Nt].join("|")),zt=i(i(te+"|"+k)+"+");i("[vV]"+A+"+\\."+n(te,H,"[\\:]")+"+"),i(i(k+"|"+n(te,H))+"*");var Ln=i(k+"|"+n(te,H,"[\\:\\@]"));return i(i(k+"|"+n(te,H,"[\\@]"))+"+"),i(i(Ln+"|"+n("[\\/\\?]",we))+"*"),{NOT_SCHEME:new RegExp(n("[^]",S,P,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",te,H),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",te,H),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",te,H),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",te,H),"g"),NOT_QUERY:new RegExp(n("[^\\%]",te,H,"[\\:\\@\\/\\?]",we),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",te,H,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",te,H),"g"),UNRESERVED:new RegExp(te,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",te,ne),"g"),PCT_ENCODED:new RegExp(k,"g"),IPV4ADDRESS:new RegExp("^("+be+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Pr+")"+i(i("\\%25|\\%(?!"+A+"{2})")+"("+zt+")")+"?\\]?$")}}var f=c(!1),d=c(!0),p=function(){function I(S,P){var A=[],k=!0,V=!1,H=void 0;try{for(var ne=S[Symbol.iterator](),pe;!(k=(pe=ne.next()).done)&&(A.push(pe.value),!(P&&A.length===P));k=!0);}catch(we){V=!0,H=we}finally{try{!k&&ne.return&&ne.return()}finally{if(V)throw H}}return A}return function(S,P){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return I(S,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(I){if(Array.isArray(I)){for(var S=0,P=Array(I.length);S<I.length;S++)P[S]=I[S];return P}else return Array.from(I)},h=2147483647,g=36,m=1,y=26,v=38,_=700,w=72,O=128,$="-",j=/^xn--/,D=/[^\0-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=g-m,G=Math.floor,ae=String.fromCharCode;function K(I){throw new RangeError(oe[I])}function Oe(I,S){for(var P=[],A=I.length;A--;)P[A]=S(I[A]);return P}function nt(I,S){var P=I.split("@"),A="";P.length>1&&(A=P[0]+"@",I=P[1]),I=I.replace(z,".");var k=I.split("."),V=Oe(k,S).join(".");return A+V}function it(I){for(var S=[],P=0,A=I.length;P<A;){var k=I.charCodeAt(P++);if(k>=55296&&k<=56319&&P<A){var V=I.charCodeAt(P++);(V&64512)==56320?S.push(((k&1023)<<10)+(V&1023)+65536):(S.push(k),P--)}else S.push(k)}return S}var Sr=function(S){return String.fromCodePoint.apply(String,u(S))},qt=function(S){return S-48<10?S-22:S-65<26?S-65:S-97<26?S-97:g},L=function(S,P){return S+22+75*(S<26)-((P!=0)<<5)},x=function(S,P,A){var k=0;for(S=A?G(S/_):S>>1,S+=G(S/P);S>q*y>>1;k+=g)S=G(S/q);return G(k+(q+1)*S/(S+v))},T=function(S){var P=[],A=S.length,k=0,V=O,H=w,ne=S.lastIndexOf($);ne<0&&(ne=0);for(var pe=0;pe<ne;++pe)S.charCodeAt(pe)>=128&&K("not-basic"),P.push(S.charCodeAt(pe));for(var we=ne>0?ne+1:0;we<A;){for(var te=k,fe=1,be=g;;be+=g){we>=A&&K("invalid-input");var W=qt(S.charCodeAt(we++));(W>=g||W>G((h-k)/fe))&&K("overflow"),k+=W*fe;var me=be<=H?m:be>=H+y?y:be-H;if(W<me)break;var _e=g-me;fe>G(h/_e)&&K("overflow"),fe*=_e}var ye=P.length+1;H=x(k-te,ye,te==0),G(k/ye)>h-V&&K("overflow"),V+=G(k/ye),k%=ye,P.splice(k++,0,V)}return String.fromCodePoint.apply(String,P)},N=function(S){var P=[];S=it(S);var A=S.length,k=O,V=0,H=w,ne=!0,pe=!1,we=void 0;try{for(var te=S[Symbol.iterator](),fe;!(ne=(fe=te.next()).done);ne=!0){var be=fe.value;be<128&&P.push(ae(be))}}catch(Mn){pe=!0,we=Mn}finally{try{!ne&&te.return&&te.return()}finally{if(pe)throw we}}var W=P.length,me=W;for(W&&P.push($);me<A;){var _e=h,ye=!0,tr=!1,jt=void 0;try{for(var xt=S[Symbol.iterator](),Yr;!(ye=(Yr=xt.next()).done);ye=!0){var Er=Yr.value;Er>=k&&Er<_e&&(_e=Er)}}catch(Mn){tr=!0,jt=Mn}finally{try{!ye&&xt.return&&xt.return()}finally{if(tr)throw jt}}var ot=me+1;_e-k>G((h-V)/ot)&&K("overflow"),V+=(_e-k)*ot,k=_e;var Nt=!0,Pr=!1,zt=void 0;try{for(var Ln=S[Symbol.iterator](),yf;!(Nt=(yf=Ln.next()).done);Nt=!0){var gf=yf.value;if(gf<k&&++V>h&&K("overflow"),gf==k){for(var Di=V,Ai=g;;Ai+=g){var Ri=Ai<=H?m:Ai>=H+y?y:Ai-H;if(Di<Ri)break;var vf=Di-Ri,wf=g-Ri;P.push(ae(L(Ri+vf%wf,0))),Di=G(vf/wf)}P.push(ae(L(Di,0))),H=x(V,ot,me==W),V=0,++me}}}catch(Mn){Pr=!0,zt=Mn}finally{try{!Nt&&Ln.return&&Ln.return()}finally{if(Pr)throw zt}}++V,++k}return P.join("")},b=function(S){return nt(S,function(P){return j.test(P)?T(P.slice(4).toLowerCase()):P})},E=function(S){return nt(S,function(P){return D.test(P)?"xn--"+N(P):P})},R={version:"2.1.0",ucs2:{decode:it,encode:Sr},decode:T,encode:N,toASCII:E,toUnicode:b},M={};function U(I){var S=I.charCodeAt(0),P=void 0;return S<16?P="%0"+S.toString(16).toUpperCase():S<128?P="%"+S.toString(16).toUpperCase():S<2048?P="%"+(S>>6|192).toString(16).toUpperCase()+"%"+(S&63|128).toString(16).toUpperCase():P="%"+(S>>12|224).toString(16).toUpperCase()+"%"+(S>>6&63|128).toString(16).toUpperCase()+"%"+(S&63|128).toString(16).toUpperCase(),P}function ee(I){for(var S="",P=0,A=I.length;P<A;){var k=parseInt(I.substr(P+1,2),16);if(k<128)S+=String.fromCharCode(k),P+=3;else if(k>=194&&k<224){if(A-P>=6){var V=parseInt(I.substr(P+4,2),16);S+=String.fromCharCode((k&31)<<6|V&63)}else S+=I.substr(P,6);P+=6}else if(k>=224){if(A-P>=9){var H=parseInt(I.substr(P+4,2),16),ne=parseInt(I.substr(P+7,2),16);S+=String.fromCharCode((k&15)<<12|(H&63)<<6|ne&63)}else S+=I.substr(P,9);P+=9}else S+=I.substr(P,3),P+=3}return S}function re(I,S){function P(A){var k=ee(A);return k.match(S.UNRESERVED)?k:A}return I.scheme&&(I.scheme=String(I.scheme).replace(S.PCT_ENCODED,P).toLowerCase().replace(S.NOT_SCHEME,"")),I.userinfo!==void 0&&(I.userinfo=String(I.userinfo).replace(S.PCT_ENCODED,P).replace(S.NOT_USERINFO,U).replace(S.PCT_ENCODED,s)),I.host!==void 0&&(I.host=String(I.host).replace(S.PCT_ENCODED,P).toLowerCase().replace(S.NOT_HOST,U).replace(S.PCT_ENCODED,s)),I.path!==void 0&&(I.path=String(I.path).replace(S.PCT_ENCODED,P).replace(I.scheme?S.NOT_PATH:S.NOT_PATH_NOSCHEME,U).replace(S.PCT_ENCODED,s)),I.query!==void 0&&(I.query=String(I.query).replace(S.PCT_ENCODED,P).replace(S.NOT_QUERY,U).replace(S.PCT_ENCODED,s)),I.fragment!==void 0&&(I.fragment=String(I.fragment).replace(S.PCT_ENCODED,P).replace(S.NOT_FRAGMENT,U).replace(S.PCT_ENCODED,s)),I}function ge(I){return I.replace(/^0*(.*)/,"$1")||"0"}function It(I,S){var P=I.match(S.IPV4ADDRESS)||[],A=p(P,2),k=A[1];return k?k.split(".").map(ge).join("."):I}function Br(I,S){var P=I.match(S.IPV6ADDRESS)||[],A=p(P,3),k=A[1],V=A[2];if(k){for(var H=k.toLowerCase().split("::").reverse(),ne=p(H,2),pe=ne[0],we=ne[1],te=we?we.split(":").map(ge):[],fe=pe.split(":").map(ge),be=S.IPV4ADDRESS.test(fe[fe.length-1]),W=be?7:8,me=fe.length-W,_e=Array(W),ye=0;ye<W;++ye)_e[ye]=te[ye]||fe[me+ye]||"";be&&(_e[W-1]=It(_e[W-1],S));var tr=_e.reduce(function(ot,Nt,Pr){if(!Nt||Nt==="0"){var zt=ot[ot.length-1];zt&&zt.index+zt.length===Pr?zt.length++:ot.push({index:Pr,length:1})}return ot},[]),jt=tr.sort(function(ot,Nt){return Nt.length-ot.length})[0],xt=void 0;if(jt&&jt.length>1){var Yr=_e.slice(0,jt.index),Er=_e.slice(jt.index+jt.length);xt=Yr.join(":")+"::"+Er.join(":")}else xt=_e.join(":");return V&&(xt+="%"+V),xt}else return I}var xn=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Nn="".match(/(){0}/)[1]===void 0;function Be(I){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P={},A=S.iri!==!1?d:f;S.reference==="suffix"&&(I=(S.scheme?S.scheme+":":"")+"//"+I);var k=I.match(xn);if(k){Nn?(P.scheme=k[1],P.userinfo=k[3],P.host=k[4],P.port=parseInt(k[5],10),P.path=k[6]||"",P.query=k[7],P.fragment=k[8],isNaN(P.port)&&(P.port=k[5])):(P.scheme=k[1]||void 0,P.userinfo=I.indexOf("@")!==-1?k[3]:void 0,P.host=I.indexOf("//")!==-1?k[4]:void 0,P.port=parseInt(k[5],10),P.path=k[6]||"",P.query=I.indexOf("?")!==-1?k[7]:void 0,P.fragment=I.indexOf("#")!==-1?k[8]:void 0,isNaN(P.port)&&(P.port=I.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?k[4]:void 0)),P.host&&(P.host=Br(It(P.host,A),A)),P.scheme===void 0&&P.userinfo===void 0&&P.host===void 0&&P.port===void 0&&!P.path&&P.query===void 0?P.reference="same-document":P.scheme===void 0?P.reference="relative":P.fragment===void 0?P.reference="absolute":P.reference="uri",S.reference&&S.reference!=="suffix"&&S.reference!==P.reference&&(P.error=P.error||"URI is not a "+S.reference+" reference.");var V=M[(S.scheme||P.scheme||"").toLowerCase()];if(!S.unicodeSupport&&(!V||!V.unicodeSupport)){if(P.host&&(S.domainHost||V&&V.domainHost))try{P.host=R.toASCII(P.host.replace(A.PCT_ENCODED,ee).toLowerCase())}catch(H){P.error=P.error||"Host's domain name can not be converted to ASCII via punycode: "+H}re(P,f)}else re(P,A);V&&V.parse&&V.parse(P,S)}else P.error=P.error||"URI can not be parsed.";return P}function kn(I,S){var P=S.iri!==!1?d:f,A=[];return I.userinfo!==void 0&&(A.push(I.userinfo),A.push("@")),I.host!==void 0&&A.push(Br(It(String(I.host),P),P).replace(P.IPV6ADDRESS,function(k,V,H){return"["+V+(H?"%25"+H:"")+"]"})),(typeof I.port=="number"||typeof I.port=="string")&&(A.push(":"),A.push(String(I.port))),A.length?A.join(""):void 0}var Kr=/^\.\.?\//,Wr=/^\/\.(\/|$)/,Xr=/^\/\.\.(\/|$)/,Dn=/^\/?(?:.|\n)*?(?=\/|$)/;function Et(I){for(var S=[];I.length;)if(I.match(Kr))I=I.replace(Kr,"");else if(I.match(Wr))I=I.replace(Wr,"/");else if(I.match(Xr))I=I.replace(Xr,"/"),S.pop();else if(I==="."||I==="..")I="";else{var P=I.match(Dn);if(P){var A=P[0];I=I.slice(A.length),S.push(A)}else throw new Error("Unexpected dot segment condition")}return S.join("")}function ze(I){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=S.iri?d:f,A=[],k=M[(S.scheme||I.scheme||"").toLowerCase()];if(k&&k.serialize&&k.serialize(I,S),I.host&&!P.IPV6ADDRESS.test(I.host)){if(S.domainHost||k&&k.domainHost)try{I.host=S.iri?R.toUnicode(I.host):R.toASCII(I.host.replace(P.PCT_ENCODED,ee).toLowerCase())}catch(ne){I.error=I.error||"Host's domain name can not be converted to "+(S.iri?"Unicode":"ASCII")+" via punycode: "+ne}}re(I,P),S.reference!=="suffix"&&I.scheme&&(A.push(I.scheme),A.push(":"));var V=kn(I,S);if(V!==void 0&&(S.reference!=="suffix"&&A.push("//"),A.push(V),I.path&&I.path.charAt(0)!=="/"&&A.push("/")),I.path!==void 0){var H=I.path;!S.absolutePath&&(!k||!k.absolutePath)&&(H=Et(H)),V===void 0&&(H=H.replace(/^\/\//,"/%2F")),A.push(H)}return I.query!==void 0&&(A.push("?"),A.push(I.query)),I.fragment!==void 0&&(A.push("#"),A.push(I.fragment)),A.join("")}function Qr(I,S){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments[3],k={};return A||(I=Be(ze(I,P),P),S=Be(ze(S,P),P)),P=P||{},!P.tolerant&&S.scheme?(k.scheme=S.scheme,k.userinfo=S.userinfo,k.host=S.host,k.port=S.port,k.path=Et(S.path||""),k.query=S.query):(S.userinfo!==void 0||S.host!==void 0||S.port!==void 0?(k.userinfo=S.userinfo,k.host=S.host,k.port=S.port,k.path=Et(S.path||""),k.query=S.query):(S.path?(S.path.charAt(0)==="/"?k.path=Et(S.path):((I.userinfo!==void 0||I.host!==void 0||I.port!==void 0)&&!I.path?k.path="/"+S.path:I.path?k.path=I.path.slice(0,I.path.lastIndexOf("/")+1)+S.path:k.path=S.path,k.path=Et(k.path)),k.query=S.query):(k.path=I.path,S.query!==void 0?k.query=S.query:k.query=I.query),k.userinfo=I.userinfo,k.host=I.host,k.port=I.port),k.scheme=I.scheme),k.fragment=S.fragment,k}function An(I,S,P){var A=l({scheme:"null"},P);return ze(Qr(Be(I,A),Be(S,A),A,!0),A)}function Or(I,S){return typeof I=="string"?I=ze(Be(I,S),S):o(I)==="object"&&(I=Be(ze(I,S),S)),I}function Rn(I,S,P){return typeof I=="string"?I=ze(Be(I,P),P):o(I)==="object"&&(I=ze(I,P)),typeof S=="string"?S=ze(Be(S,P),P):o(S)==="object"&&(S=ze(S,P)),I===S}function ki(I,S){return I&&I.toString().replace(!S||!S.iri?f.ESCAPE:d.ESCAPE,U)}function st(I,S){return I&&I.toString().replace(!S||!S.iri?f.PCT_ENCODED:d.PCT_ENCODED,ee)}var Ir={scheme:"http",domainHost:!0,parse:function(S,P){return S.host||(S.error=S.error||"HTTP URIs must have a host."),S},serialize:function(S,P){var A=String(S.scheme).toLowerCase()==="https";return(S.port===(A?443:80)||S.port==="")&&(S.port=void 0),S.path||(S.path="/"),S}},cf={scheme:"https",domainHost:Ir.domainHost,parse:Ir.parse,serialize:Ir.serialize};function lf(I){return typeof I.secure=="boolean"?I.secure:String(I.scheme).toLowerCase()==="wss"}var Tn={scheme:"ws",domainHost:!0,parse:function(S,P){var A=S;return A.secure=lf(A),A.resourceName=(A.path||"/")+(A.query?"?"+A.query:""),A.path=void 0,A.query=void 0,A},serialize:function(S,P){if((S.port===(lf(S)?443:80)||S.port==="")&&(S.port=void 0),typeof S.secure=="boolean"&&(S.scheme=S.secure?"wss":"ws",S.secure=void 0),S.resourceName){var A=S.resourceName.split("?"),k=p(A,2),V=k[0],H=k[1];S.path=V&&V!=="/"?V:void 0,S.query=H,S.resourceName=void 0}return S.fragment=void 0,S}},ff={scheme:"wss",domainHost:Tn.domainHost,parse:Tn.parse,serialize:Tn.serialize},fv={},df="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Pt="[0-9A-Fa-f]",dv=i(i("%[EFef]"+Pt+"%"+Pt+Pt+"%"+Pt+Pt)+"|"+i("%[89A-Fa-f]"+Pt+"%"+Pt+Pt)+"|"+i("%"+Pt+Pt)),uv="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",pv="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",hv=n(pv,'[\\"\\\\]'),mv="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",yv=new RegExp(df,"g"),Zr=new RegExp(dv,"g"),gv=new RegExp(n("[^]",uv,"[\\.]",'[\\"]',hv),"g"),uf=new RegExp(n("[^]",df,mv),"g"),vv=uf;function zo(I){var S=ee(I);return S.match(yv)?S:I}var pf={scheme:"mailto",parse:function(S,P){var A=S,k=A.to=A.path?A.path.split(","):[];if(A.path=void 0,A.query){for(var V=!1,H={},ne=A.query.split("&"),pe=0,we=ne.length;pe<we;++pe){var te=ne[pe].split("=");switch(te[0]){case"to":for(var fe=te[1].split(","),be=0,W=fe.length;be<W;++be)k.push(fe[be]);break;case"subject":A.subject=st(te[1],P);break;case"body":A.body=st(te[1],P);break;default:V=!0,H[st(te[0],P)]=st(te[1],P);break}}V&&(A.headers=H)}A.query=void 0;for(var me=0,_e=k.length;me<_e;++me){var ye=k[me].split("@");if(ye[0]=st(ye[0]),P.unicodeSupport)ye[1]=st(ye[1],P).toLowerCase();else try{ye[1]=R.toASCII(st(ye[1],P).toLowerCase())}catch(tr){A.error=A.error||"Email address's domain name can not be converted to ASCII via punycode: "+tr}k[me]=ye.join("@")}return A},serialize:function(S,P){var A=S,k=a(S.to);if(k){for(var V=0,H=k.length;V<H;++V){var ne=String(k[V]),pe=ne.lastIndexOf("@"),we=ne.slice(0,pe).replace(Zr,zo).replace(Zr,s).replace(gv,U),te=ne.slice(pe+1);try{te=P.iri?R.toUnicode(te):R.toASCII(st(te,P).toLowerCase())}catch(me){A.error=A.error||"Email address's domain name can not be converted to "+(P.iri?"Unicode":"ASCII")+" via punycode: "+me}k[V]=we+"@"+te}A.path=k.join(",")}var fe=S.headers=S.headers||{};S.subject&&(fe.subject=S.subject),S.body&&(fe.body=S.body);var be=[];for(var W in fe)fe[W]!==fv[W]&&be.push(W.replace(Zr,zo).replace(Zr,s).replace(uf,U)+"="+fe[W].replace(Zr,zo).replace(Zr,s).replace(vv,U));return be.length&&(A.query=be.join("&")),A}},wv=/^([^\:]+)\:(.*)/,hf={scheme:"urn",parse:function(S,P){var A=S.path&&S.path.match(wv),k=S;if(A){var V=P.scheme||k.scheme||"urn",H=A[1].toLowerCase(),ne=A[2],pe=V+":"+(P.nid||H),we=M[pe];k.nid=H,k.nss=ne,k.path=void 0,we&&(k=we.parse(k,P))}else k.error=k.error||"URN can not be parsed.";return k},serialize:function(S,P){var A=P.scheme||S.scheme||"urn",k=S.nid,V=A+":"+(P.nid||k),H=M[V];H&&(S=H.serialize(S,P));var ne=S,pe=S.nss;return ne.path=(k||P.nid)+":"+pe,ne}},bv=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,mf={scheme:"urn:uuid",parse:function(S,P){var A=S;return A.uuid=A.nss,A.nss=void 0,!P.tolerant&&(!A.uuid||!A.uuid.match(bv))&&(A.error=A.error||"UUID is not valid."),A},serialize:function(S,P){var A=S;return A.nss=(S.uuid||"").toLowerCase(),A}};M[Ir.scheme]=Ir,M[cf.scheme]=cf,M[Tn.scheme]=Tn,M[ff.scheme]=ff,M[pf.scheme]=pf,M[hf.scheme]=hf,M[mf.scheme]=mf,r.SCHEMES=M,r.pctEncChar=U,r.pctDecChars=ee,r.parse=Be,r.removeDotSegments=Et,r.serialize=ze,r.resolveComponents=Qr,r.resolve=An,r.normalize=Or,r.equal=Rn,r.escapeComponent=ki,r.unescapeComponent=st,Object.defineProperty(r,"__esModule",{value:!0})})})(jo,jo.exports);var $l=jo.exports,qe={},_l={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.nearley=r()})(rr,function(){function t(c,f,d){return this.id=++t.highestId,this.name=c,this.symbols=f,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(c){var f=typeof c>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,c).map(l).join(" ")+" ● "+this.symbols.slice(c).map(l).join(" ");return this.name+" → "+f};function r(c,f,d,p){this.rule=c,this.dot=f,this.reference=d,this.data=[],this.wantedBy=p,this.isComplete=this.dot===c.symbols.length}r.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},r.prototype.nextState=function(c){var f=new r(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=c,f.isComplete&&(f.data=f.build(),f.right=void 0),f},r.prototype.build=function(){var c=[],f=this;do c.push(f.right.data),f=f.left;while(f.left);return c.reverse(),c},r.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function n(c,f){this.grammar=c,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}n.prototype.process=function(c){for(var f=this.states,d=this.wants,p=this.completed,u=0;u<f.length;u++){var h=f[u];if(h.isComplete){if(h.finish(),h.data!==s.fail){for(var g=h.wantedBy,m=g.length;m--;){var y=g[m];this.complete(y,h)}if(h.reference===this.index){var v=h.rule.name;(this.completed[v]=this.completed[v]||[]).push(h)}}}else{var v=h.rule.symbols[h.dot];if(typeof v!="string"){this.scannable.push(h);continue}if(d[v]){if(d[v].push(h),p.hasOwnProperty(v))for(var _=p[v],m=0;m<_.length;m++){var w=_[m];this.complete(h,w)}}else d[v]=[h],this.predict(v)}}},n.prototype.predict=function(c){for(var f=this.grammar.byName[c]||[],d=0;d<f.length;d++){var p=f[d],u=this.wants[c],h=new r(p,0,this.index,u);this.states.push(h)}},n.prototype.complete=function(c,f){var d=c.nextState(f);this.states.push(d)};function i(c,f){this.rules=c,this.start=f||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(p){d.hasOwnProperty(p.name)||(d[p.name]=[]),d[p.name].push(p)})}i.fromCompiled=function(p,f){var d=p.Lexer;p.ParserStart&&(f=p.ParserStart,p=p.ParserRules);var p=p.map(function(h){return new t(h.name,h.symbols,h.postprocess)}),u=new i(p,f);return u.lexer=d,u};function o(){this.reset("")}o.prototype.reset=function(c,f){this.buffer=c,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},o.prototype.next=function(){if(this.index<this.buffer.length){var c=this.buffer[this.index++];return c===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:c}}},o.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},o.prototype.formatError=function(c,f){var d=this.buffer;if(typeof d=="string"){var p=d.split(`
`).slice(Math.max(0,this.line-5),this.line),u=d.indexOf(`
`,this.index);u===-1&&(u=d.length);var h=this.index-this.lastLineBreak,g=String(this.line).length;return f+=" at line "+this.line+" col "+h+`:

`,f+=p.map(function(y,v){return m(this.line-p.length+v+1,g)+" "+y},this).join(`
`),f+=`
`+m("",g+h)+`^
`,f}else return f+" at index "+(this.index-1);function m(y,v){var _=String(y);return Array(v-_.length+1).join(" ")+_}};function s(c,f,d){if(c instanceof i)var p=c,d=f;else var p=i.fromCompiled(c,f);this.grammar=p,this.options={keepHistory:!1,lexer:p.lexer||new o};for(var u in d||{})this.options[u]=d[u];this.lexer=this.options.lexer,this.lexerState=void 0;var h=new n(p,0);this.table=[h],h.wants[p.start]=[],h.predict(p.start),h.process(),this.current=0}s.fail={},s.prototype.feed=function(c){var f=this.lexer;f.reset(c,this.lexerState);for(var d;;){try{if(d=f.next(),!d)break}catch(j){var g=new n(this.grammar,this.current+1);this.table.push(g);var p=new Error(this.reportLexerError(j));throw p.offset=this.current,p.token=j.token,p}var u=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var h=this.current+1,g=new n(this.grammar,h);this.table.push(g);for(var m=d.text!==void 0?d.text:d.value,y=f.constructor===o?d.value:d,v=u.scannable,_=v.length;_--;){var w=v[_],O=w.rule.symbols[w.dot];if(O.test?O.test(y):O.type?O.type===d.type:O.literal===m){var $=w.nextState({data:y,token:d,isToken:!0,reference:h-1});g.states.push($)}}if(g.process(),g.states.length===0){var p=new Error(this.reportError(d));throw p.offset=this.current,p.token=d,p}this.options.keepHistory&&(u.lexerState=f.save()),this.current++}return u&&(this.lexerState=f.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(c){var f,d,p=c.token;return p?(f="input "+JSON.stringify(p.text[0])+" (lexer error)",d=this.lexer.formatError(p,"Syntax error")):(f="input (lexer error)",d=c.message),this.reportErrorCommon(d,f)},s.prototype.reportError=function(c){var f=(c.type?c.type+" token: ":"")+JSON.stringify(c.value!==void 0?c.value:c),d=this.lexer.formatError(c,"Syntax error");return this.reportErrorCommon(d,f)},s.prototype.reportErrorCommon=function(c,f){var d=[];d.push(c);var p=this.table.length-2,u=this.table[p],h=u.states.filter(function(m){var y=m.rule.symbols[m.dot];return y&&typeof y!="string"});if(h.length===0)d.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(u.states,d);else{d.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var g=h.map(function(m){return this.buildFirstStateStack(m,[])||[m]},this);g.forEach(function(m){var y=m[0],v=y.rule.symbols[y.dot],_=this.getSymbolDisplay(v);d.push("A "+_+" based on:"),this.displayStateStack(m,d)},this)}return d.push(""),d.join(`
`)},s.prototype.displayStateStack=function(c,f){for(var d,p=0,u=0;u<c.length;u++){var h=c[u],g=h.rule.toString(h.dot);g===d?p++:(p>0&&f.push("    ^ "+p+" more lines identical to this"),p=0,f.push("    "+g)),d=g}},s.prototype.getSymbolDisplay=function(c){return a(c)},s.prototype.buildFirstStateStack=function(c,f){if(f.indexOf(c)!==-1)return null;if(c.wantedBy.length===0)return[c];var d=c.wantedBy[0],p=[c].concat(f),u=this.buildFirstStateStack(d,p);return u===null?null:[c].concat(u)},s.prototype.save=function(){var c=this.table[this.current];return c.lexerState=this.lexerState,c},s.prototype.restore=function(c){var f=c.index;this.current=f,this.table[f]=c,this.table.splice(f+1),this.lexerState=c.lexerState,this.results=this.finish()},s.prototype.rewind=function(c){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[c])},s.prototype.finish=function(){var c=[],f=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(p){p.rule.name===f&&p.dot===p.rule.symbols.length&&p.reference===0&&p.data!==s.fail&&c.push(p)}),c.map(function(p){return p.data})};function a(c){var f=typeof c;if(f==="string")return c;if(f==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return"character matching "+c;if(c.type)return c.type+" token";if(c.test)return"token matching "+String(c.test);throw new Error("Unknown symbol type: "+c)}}function l(c){var f=typeof c;if(f==="string")return c;if(f==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return c.toString();if(c.type)return"%"+c.type;if(c.test)return"<"+String(c.test)+">";throw new Error("Unknown symbol type: "+c)}}return{Parser:s,Grammar:i,Rule:t}})})(_l);var Wy=_l.exports,xo={};Object.defineProperty(xo,"__esModule",{value:!0});function xe(e){return e[0]}const Sl=e=>[].concat(...e.map(t=>Array.isArray(t)?Sl(t):t));function Hr(e){return e?Array.isArray(e)?Sl(e).join(""):e:""}const Xy={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:e=>e.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(e){return e.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(e){return e.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:xe},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:xe},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:e=>e[0].concat([e[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:xe},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:e=>e[0].concat([e[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:xe},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(e){return{DomainName:Hr(e[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(e){return{AddressLiteral:Hr(e[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(e){return{localPart:Hr(e[0]),domainPart:Hr(e[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(e){return{DotString:Hr(e[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(e){return{QuotedString:Hr(e[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:e=>e[0].concat([e[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:e=>e[0].concat([e[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:xe},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(e){return e.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:e=>e[0].concat([e[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:xe},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:xe},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:e=>e.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:xe},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:xe},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:e=>e.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:xe},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:xe},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:xe},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:xe},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:xe},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:xe},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:xe},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:xe}],ParserStart:"Reverse_path"};xo.default=Xy;var Qy=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0}),qe.canonicalize=qe.canonicalize_quoted_string=qe.normalize=qe.normalize_dot_string=qe.parse=void 0;const Ol=Wy,Il=Qy(xo);Il.default.ParserStart="Mailbox";const Zy=Ol.Grammar.fromCompiled(Il.default);function No(e){if(e.length>986)throw new Error("address too long");const r=new Ol.Parser(Zy);if(r.feed(e),r.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");const n=e.lastIndexOf("@"),i=e.substring(n+1);if(i[0]!=="["){if(i.length>253)throw new Error("domain too long");const o=i.split(".");if(o.length<2)throw new Error("domain not fully qualified");if(o[o.length-1].length<2)throw new Error("top level domain label too short");if(o.sort(function(s,a){return a.length-s.length}),o[0].length>63)throw new Error("domain label too long")}return r.results[0]}qe.parse=No;function El(e){return function(){const n=e.indexOf("+");return n===-1?e:e.substr(0,n)}().replace(/\./g,"").toLowerCase()}qe.normalize_dot_string=El;function Yy(e){var t,r;const n=No(e),i=(t=n.domainPart.AddressLiteral)!==null&&t!==void 0?t:n.domainPart.DomainName.toLowerCase();return`${(r=n.localPart.QuotedString)!==null&&r!==void 0?r:El(n.localPart.DotString)}@${i}`}qe.normalize=Yy;function Pl(e){return`"${e.substr(1).substr(0,e.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}qe.canonicalize_quoted_string=Pl;function eg(e){var t;const r=No(e),n=(t=r.domainPart.AddressLiteral)!==null&&t!==void 0?t:r.domainPart.DomainName.toLowerCase();return`${r.localPart.QuotedString?Pl(r.localPart.QuotedString):r.localPart.DotString}@${n}`}qe.canonicalize=eg;var Ei=Object.prototype.hasOwnProperty,jl=Object.prototype.toString,xl=Object.defineProperty,Nl=Object.getOwnPropertyDescriptor,kl=function(t){return typeof Array.isArray=="function"?Array.isArray(t):jl.call(t)==="[object Array]"},Dl=function(t){if(!t||jl.call(t)!=="[object Object]")return!1;var r=Ei.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Ei.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var i;for(i in t);return typeof i>"u"||Ei.call(t,i)},Al=function(t,r){xl&&r.name==="__proto__"?xl(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Rl=function(t,r){if(r==="__proto__")if(Ei.call(t,r)){if(Nl)return Nl(t,r).value}else return;return t[r]},tg=function e(){var t,r,n,i,o,s,a=arguments[0],l=1,c=arguments.length,f=!1;for(typeof a=="boolean"&&(f=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(t=arguments[l],t!=null)for(r in t)n=Rl(a,r),i=Rl(t,r),a!==i&&(f&&i&&(Dl(i)||(o=kl(i)))?(o?(o=!1,s=n&&kl(n)?n:[]):s=n&&Dl(n)?n:{},Al(a,{name:r,newValue:e(f,s,i)})):typeof i<"u"&&Al(a,{name:r,newValue:i}));return a},rg=[{scheme:"aaa",description:"Diameter Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6733"}]},{scheme:"aaas",description:"Diameter Protocol with Secure Transport",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6733"}]},{scheme:"about",description:"about",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6694"}]},{scheme:"acap",description:"application configuration access protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2244"}]},{scheme:"acct",description:"acct",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7565"}]},{scheme:"cap",description:"Calendar Access Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4324"}]},{scheme:"cid",description:"content identifier",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2392"}]},{scheme:"coap",description:"coap",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7252"}]},{scheme:"coaps",description:"coaps",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7252"}]},{scheme:"crid",description:"TV-Anytime Content Reference Identifier",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4078"}]},{scheme:"data",description:"data",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2397"}]},{scheme:"dav",description:"dav",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4918"}]},{scheme:"dict",description:"dictionary service protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2229"}]},{scheme:"dns",description:"Domain Name System",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4501"}]},{scheme:"example",description:"example",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7595"}]},{scheme:"file",description:"Host-specific file names",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc1738"}]},{scheme:"ftp",description:"File Transfer Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc1738"}]},{scheme:"geo",description:"Geographic Locations",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5870"}]},{scheme:"go",description:"go",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3368"}]},{scheme:"gopher",description:"The Gopher Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4266"}]},{scheme:"h323",description:"H.323",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3508"}]},{scheme:"http",description:"Hypertext Transfer Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7230"}]},{scheme:"https",description:"Hypertext Transfer Protocol Secure",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7230"}]},{scheme:"iax",description:"Inter-Asterisk eXchange Version 2",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5456"}]},{scheme:"icap",description:"Internet Content Adaptation Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3507"}]},{scheme:"im",description:"Instant Messaging",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3860"}]},{scheme:"imap",description:"internet message access protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5092"}]},{scheme:"info",description:`Information Assets with Identifiers in Public Namespaces. 
       (section 3) defines an "info" registry 
        of public namespaces, which is maintained by NISO and can be accessed 
        from .`,reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4452"}]},{scheme:"ipp",description:"Internet Printing Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3510"}]},{scheme:"ipps",description:"Internet Printing Protocol over HTTPS",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7472"}]},{scheme:"iris",description:"Internet Registry Information Service",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3981"}]},{scheme:"iris.beep",description:"iris.beep",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3983"}]},{scheme:"iris.lwz",description:"iris.lwz",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4993"}]},{scheme:"iris.xpc",description:"iris.xpc",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4992"}]},{scheme:"iris.xpcs",description:"iris.xpcs",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4992"}]},{scheme:"jabber",description:"jabber",reference:[],template:"http://www.iana.org/assignments/uri-schemes/perm/jabber"},{scheme:"ldap",description:"Lightweight Directory Access Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4516"}]},{scheme:"mailto",description:"Electronic mail address",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6068"}]},{scheme:"mid",description:"message identifier",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2392"}]},{scheme:"msrp",description:"Message Session Relay Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4975"}]},{scheme:"msrps",description:"Message Session Relay Protocol Secure",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4975"}]},{scheme:"mtqp",description:"Message Tracking Query Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3887"}]},{scheme:"mupdate",description:"Mailbox Update (MUPDATE) Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3656"}]},{scheme:"news",description:"USENET news",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5538"}]},{scheme:"nfs",description:"network file system protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2224"}]},{scheme:"ni",description:"ni",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6920"}]},{scheme:"nih",description:"nih",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6920"}]},{scheme:"nntp",description:"USENET news using NNTP access",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5538"}]},{scheme:"opaquelocktoken",description:"opaquelocktokent",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4918"}]},{scheme:"pkcs11",description:"PKCS#11",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7512"}]},{scheme:"pop",description:"Post Office Protocol v3",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2384"}]},{scheme:"pres",description:"Presence",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3859"}]},{scheme:"reload",description:"reload",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6940"}]},{scheme:"rtsp",description:"Real-time Streaming Protocol (RTSP)",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2326"},{type:"draft",href:"http://www.iana.org/go/RFC-ietf-mmusic-rfc2326bis-40"}]},{scheme:"rtsps",description:"Real-time Streaming Protocol (RTSP) over TLS",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2326"},{type:"draft",href:"http://www.iana.org/go/RFC-ietf-mmusic-rfc2326bis-40"}]},{scheme:"rtspu",description:"Real-time Streaming Protocol (RTSP) over unreliable datagram transport",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2326"}]},{scheme:"service",description:"service location",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2609"}]},{scheme:"session",description:"session",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6787"}]},{scheme:"shttp",description:"Secure Hypertext Transfer Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2660"}]},{scheme:"sieve",description:"ManageSieve Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5804"}]},{scheme:"sip",description:"session initiation protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3261"}]},{scheme:"sips",description:"secure session initiation protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3261"}]},{scheme:"sms",description:"Short Message Service",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5724"}]},{scheme:"snmp",description:"Simple Network Management Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4088"}]},{scheme:"soap.beep",description:"soap.beep",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4227"}]},{scheme:"soap.beeps",description:"soap.beeps",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4227"}]},{scheme:"stun",description:"stun",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7064"}]},{scheme:"stuns",description:"stuns",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7064"}]},{scheme:"tag",description:"tag",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4151"}]},{scheme:"tel",description:"telephone",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3966"}]},{scheme:"telnet",description:"Reference to interactive sessions",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4248"}]},{scheme:"tftp",description:"Trivial File Transfer Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3617"}]},{scheme:"thismessage",description:"multipart/related relative reference resolution",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2557"}],template:"http://www.iana.org/assignments/uri-schemes/perm/thismessage"},{scheme:"tip",description:"Transaction Internet Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2371"}]},{scheme:"tn3270",description:"Interactive 3270 emulation sessions",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6270"}]},{scheme:"turn",description:"turn",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7065"}]},{scheme:"turns",description:"turns",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7065"}]},{scheme:"tv",description:"TV Broadcasts",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2838"}]},{scheme:"urn",description:"Uniform Resource Names",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2141"},{type:"registry",href:"http://www.iana.org/assignments/urn-namespaces"}]},{scheme:"vemmi",description:"versatile multimedia interface",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2122"}]},{scheme:"vnc",description:"Remote Framebuffer Protocol",reference:[{type:"draft",href:"http://www.iana.org/go/RFC-warden-appsawg-vnc-scheme-10"}]},{scheme:"ws",description:"WebSocket connections",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6455"}]},{scheme:"wss",description:"Encrypted WebSocket connections",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6455"}]},{scheme:"xcon",description:"xcon",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6501"}]},{scheme:"xcon-userid",description:"xcon-userid",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6501"}]},{scheme:"xmlrpc.beep",description:"xmlrpc.beep",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3529"}]},{scheme:"xmlrpc.beeps",description:"xmlrpc.beeps",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc3529"}]},{scheme:"xmpp",description:"Extensible Messaging and Presence Protocol",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5122"}]},{scheme:"z39.50r",description:"Z39.50 Retrieval",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2056"}]},{scheme:"z39.50s",description:"Z39.50 Session",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2056"}]}],ng=[{scheme:"acr",description:"acr",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/acr"},{scheme:"adiumxtra",description:"adiumxtra",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/adiumxtra"},{scheme:"afp",description:"afp",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/afp"},{scheme:"afs",description:"Andrew File System global file names",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc1738"}]},{scheme:"aim",description:"aim",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/aim"},{scheme:"appdata",description:"appdata",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/appdata"},{scheme:"apt",description:"apt",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/apt"},{scheme:"attachment",description:"attachment",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/attachment"},{scheme:"aw",description:"aw",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/aw"},{scheme:"barion",description:"barion",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/barion"},{scheme:"beshare",description:"beshare",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/beshare"},{scheme:"bitcoin",description:"bitcoin",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/bitcoin"},{scheme:"blob",description:"blob",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/blob"},{scheme:"bolo",description:"bolo",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/bolo"},{scheme:"callto",description:"callto",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/callto"},{scheme:"chrome",description:"chrome",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/chrome"},{scheme:"chrome-extension",description:"chrome-extension",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/chrome-extension"},{scheme:"com-eventbrite-attendee",description:"com-eventbrite-attendee",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/com-eventbrite-attendee"},{scheme:"content",description:"content",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/content"},{scheme:"cvs",description:"cvs",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/cvs"},{scheme:"dis",description:"dis",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/dis"},{scheme:"dlna-playcontainer",description:"dlna-playcontainer",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/dlna-playcontainer"},{scheme:"dlna-playsingle",description:"dlna-playsingle",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/dlna-playsingle"},{scheme:"dntp",description:"dntp",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/dntp"},{scheme:"dtn",description:"DTNRG research and development",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5050"}]},{scheme:"dvb",description:"dvb",reference:[{type:"draft",href:"http://www.iana.org/go/draft-mcroberts-uri-dvb"}]},{scheme:"ed2k",description:"ed2k",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ed2k"},{scheme:"facetime",description:"facetime",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/facetime"},{scheme:"feed",description:"feed",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/feed"},{scheme:"feedready",description:"feedready",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/feedready"},{scheme:"finger",description:"finger",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/finger"},{scheme:"fish",description:"fish",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/fish"},{scheme:"gg",description:"gg",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/gg"},{scheme:"git",description:"git",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/git"},{scheme:"gizmoproject",description:"gizmoproject",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/gizmoproject"},{scheme:"gtalk",description:"gtalk",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/gtalk"},{scheme:"ham",description:"ham",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7046"}]},{scheme:"hcp",description:"hcp",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/hcp"},{scheme:"icon",description:"icon",reference:[{type:"draft",href:"http://www.iana.org/go/draft-lafayette-icon-uri-scheme"}]},{scheme:"iotdisco",description:"iotdisco",reference:[{type:"uri",href:"http://www.iana.org/assignments/uri-schemes/prov/iotdisco.pdf"}],template:"http://www.iana.org/assignments/uri-schemes/prov/iotdisco"},{scheme:"ipn",description:"ipn",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6260"}]},{scheme:"irc",description:"irc",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/irc"},{scheme:"irc6",description:"irc6",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/irc6"},{scheme:"ircs",description:"ircs",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ircs"},{scheme:"isostore",description:"isostore",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/isostore"},{scheme:"itms",description:"itms",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/itms"},{scheme:"jar",description:"jar",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/jar"},{scheme:"jms",description:"Java Message Service",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6167"}]},{scheme:"keyparc",description:"keyparc",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/keyparc"},{scheme:"lastfm",description:"lastfm",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/lastfm"},{scheme:"ldaps",description:"ldaps",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ldaps"},{scheme:"magnet",description:"magnet",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/magnet"},{scheme:"maps",description:"maps",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/maps"},{scheme:"market",description:"market",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/market"},{scheme:"message",description:"message",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/message"},{scheme:"mms",description:"mms",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/mms"},{scheme:"ms-access",description:"ms-access",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-access"},{scheme:"ms-drive-to",description:"ms-drive-to",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-drive-to"},{scheme:"ms-enrollment",description:"ms-enrollment",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-enrollment"},{scheme:"ms-excel",description:"ms-excel",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-excel"},{scheme:"ms-getoffice",description:"ms-getoffice",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-getoffice"},{scheme:"ms-help",description:"ms-help",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-help"},{scheme:"ms-infopath",description:"ms-infopath",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-infopath"},{scheme:"ms-media-stream-id",description:"ms-media-stream-id",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-media-stream-id"},{scheme:"ms-powerpoint",description:"ms-powerpoint",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-powerpoint"},{scheme:"ms-project",description:"ms-project",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-project"},{scheme:"ms-publisher",description:"ms-publisher",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-publisher"},{scheme:"ms-search-repair",description:"ms-search-repair",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-search-repair"},{scheme:"ms-secondary-screen-controller",description:"ms-secondary-screen-controller",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-secondary-screen-controller"},{scheme:"ms-secondary-screen-setup",description:"ms-secondary-screen-setup",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-secondary-screen-setup"},{scheme:"ms-settings",description:"ms-settings",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings"},{scheme:"ms-settings-airplanemode",description:"ms-settings-airplanemode",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-airplanemode"},{scheme:"ms-settings-bluetooth",description:"ms-settings-bluetooth",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-bluetooth"},{scheme:"ms-settings-camera",description:"ms-settings-camera",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-camera"},{scheme:"ms-settings-cellular",description:"ms-settings-cellular",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-cellular"},{scheme:"ms-settings-cloudstorage",description:"ms-settings-cloudstorage",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-cloudstorage"},{scheme:"ms-settings-connectabledevices",description:"ms-settings-connectabledevices",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-connectabledevices"},{scheme:"ms-settings-displays-topology",description:"ms-settings-displays-topology",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-displays-topology"},{scheme:"ms-settings-emailandaccounts",description:"ms-settings-emailandaccounts",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-emailandaccounts"},{scheme:"ms-settings-language",description:"ms-settings-language",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-language"},{scheme:"ms-settings-location",description:"ms-settings-location",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-location"},{scheme:"ms-settings-lock",description:"ms-settings-lock",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-lock"},{scheme:"ms-settings-nfctransactions",description:"ms-settings-nfctransactions",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-nfctransactions"},{scheme:"ms-settings-notifications",description:"ms-settings-notifications",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-notifications"},{scheme:"ms-settings-power",description:"ms-settings-power",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-power"},{scheme:"ms-settings-privacy",description:"ms-settings-privacy",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-privacy"},{scheme:"ms-settings-proximity",description:"ms-settings-proximity",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-proximity"},{scheme:"ms-settings-screenrotation",description:"ms-settings-screenrotation",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-screenrotation"},{scheme:"ms-settings-wifi",description:"ms-settings-wifi",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-wifi"},{scheme:"ms-settings-workplace",description:"ms-settings-workplace",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-settings-workplace"},{scheme:"ms-spd",description:"ms-spd",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-spd"},{scheme:"ms-transit-to",description:"ms-transit-to",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-transit-to"},{scheme:"ms-visio",description:"ms-visio",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-visio"},{scheme:"ms-walk-to",description:"ms-walk-to",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-walk-to"},{scheme:"ms-word",description:"ms-word",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ms-word"},{scheme:"msnim",description:"msnim",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/msnim"},{scheme:"mumble",description:"mumble",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/mumble"},{scheme:"mvn",description:"mvn",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/mvn"},{scheme:"notes",description:"notes",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/notes"},{scheme:"oid",description:"oid",reference:[{type:"draft",href:"http://www.iana.org/go/draft-larmouth-oid-iri"}],template:"http://www.iana.org/assignments/uri-schemes/prov/oid"},{scheme:"palm",description:"palm",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/palm"},{scheme:"paparazzi",description:"paparazzi",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/paparazzi"},{scheme:"platform",description:"platform",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/platform"},{scheme:"proxy",description:"proxy",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/proxy"},{scheme:"psyc",description:"psyc",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/psyc"},{scheme:"query",description:"query",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/query"},{scheme:"redis",description:"redis",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/redis"},{scheme:"rediss",description:"rediss",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/rediss"},{scheme:"res",description:"res",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/res"},{scheme:"resource",description:"resource",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/resource"},{scheme:"rmi",description:"rmi",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/rmi"},{scheme:"rsync",description:"rsync",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5781"}]},{scheme:"rtmfp",description:"rtmfp",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc7425"}],template:"http://www.iana.org/assignments/uri-schemes/prov/rtmfp"},{scheme:"rtmp",description:"rtmp",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/rtmp"},{scheme:"secondlife",description:"query",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/secondlife"},{scheme:"sftp",description:"query",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/sftp"},{scheme:"sgn",description:"sgn",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/sgn"},{scheme:"skype",description:"skype",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/skype"},{scheme:"smb",description:"smb",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/smb"},{scheme:"smtp",description:"smtp",reference:[{type:"draft",href:"http://www.iana.org/go/draft-melnikov-smime-msa-to-mda"}],template:"http://www.iana.org/assignments/uri-schemes/prov/smtp"},{scheme:"soldat",description:"soldat",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/soldat"},{scheme:"spotify",description:"spotify",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/spotify"},{scheme:"ssh",description:"ssh",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ssh"},{scheme:"steam",description:"steam",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/steam"},{scheme:"submit",description:"submit",reference:[{type:"draft",href:"http://www.iana.org/go/draft-melnikov-smime-msa-to-mda"}],template:"http://www.iana.org/assignments/uri-schemes/prov/submit"},{scheme:"svn",description:"svn",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/svn"},{scheme:"teamspeak",description:"teamspeak",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/teamspeak"},{scheme:"teliaeid",description:"teliaeid",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/teliaeid"},{scheme:"things",description:"things",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/things"},{scheme:"tool",description:"tool",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/tool"},{scheme:"udp",description:"udp",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/udp"},{scheme:"unreal",description:"unreal",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/unreal"},{scheme:"ut2004",description:"ut2004",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ut2004"},{scheme:"v-event",description:"v-event",reference:[{type:"draft",href:"http://www.iana.org/go/draft-menderico-v-event-uri"}],template:"http://www.iana.org/assignments/uri-schemes/prov/v-event"},{scheme:"ventrilo",description:"ventrilo",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ventrilo"},{scheme:"view-source",description:"view-source",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/view-source"},{scheme:"webcal",description:"webcal",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/webcal"},{scheme:"wpid",description:"wpid",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/wpid"},{scheme:"wtai",description:"wtai",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/wtai"},{scheme:"wyciwyg",description:"wyciwyg",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/wyciwyg"},{scheme:"xfire",description:"xfire",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/xfire"},{scheme:"xri",description:"xri",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/xri"},{scheme:"ymsgr",description:"ymsgr",reference:[],template:"http://www.iana.org/assignments/uri-schemes/prov/ymsgr"}],ig=[{scheme:"fax",description:"fax",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2806"},{type:"rfc",href:"http://www.iana.org/go/rfc3966"}]},{scheme:"filesystem",description:"filesystem",reference:[],template:"http://www.iana.org/assignments/uri-schemes/historic/filesystem"},{scheme:"mailserver",description:"Access to data available from mail servers",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc6196"}]},{scheme:"modem",description:"modem",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc2806"},{type:"rfc",href:"http://www.iana.org/go/rfc3966"}]},{scheme:"pack",description:"pack",reference:[{type:"draft",href:"http://www.iana.org/go/draft-shur-pack-uri-scheme"}],template:"http://www.iana.org/assignments/uri-schemes/historic/pack"},{scheme:"prospero",description:"Prospero Directory Service",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4157"}]},{scheme:"snews",description:"NNTP over SSL/TLS",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc5538"}]},{scheme:"videotex",description:"videotex",reference:[{type:"draft",href:"http://www.iana.org/go/draft-mavrakis-videotex-url-spec"},{type:"rfc",href:"http://www.iana.org/go/rfc2122"},{type:"rfc",href:"http://www.iana.org/go/rfc3986"}],template:"http://www.iana.org/assignments/uri-schemes/historic/videotex"},{scheme:"wais",description:"Wide Area Information Servers",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc4156"}]},{scheme:"z39.50",description:"Z39.50 information access",reference:[{type:"rfc",href:"http://www.iana.org/go/rfc1738"},{type:"rfc",href:"http://www.iana.org/go/rfc2056"}]}],sg=[{scheme:"android-app"},{scheme:"webpack"},{scheme:"s3",description:"Amazon Web Services S3 bucket"},{scheme:"gs",description:"Google Cloud Storage"},{scheme:"mqtt",description:"Message Queuing Telemetry Transport Protocol"},{scheme:"modbus+tcp",description:"Modbus over TCP"}],ko=tg,Pn={permanent:rg,provosional:ng,historical:ig},Pi={};Object.keys(Pn).forEach(function(e){Pn[e].forEach(function(t){Pi[t.scheme]=ko(t,{type:e})})}),Pn.unofficial=sg.filter(function(e){return!Pi[e.scheme]}),Pn.unofficial.forEach(function(e){Pi[e.scheme]=ko(e,{type:"unofficial"})});var Tl=ko(Pn,{allByName:Pi});const{parse:og}=$l,{addressParser:ag}=qe,cg=Tl;function lg(e){try{return ag(e),!0}catch{return!1}}var fg=e=>{const t=og(e);return!!(t.scheme==="mailto"&&t.to.every(lg)||t.reference==="absolute"&&cg.allByName[t.scheme])},dg=/^P(?!$)(\d+(?:\.\d+)?Y)?(\d+(?:\.\d+)?M)?(\d+(?:\.\d+)?W)?(\d+(?:\.\d+)?D)?(T(?=\d)(\d+(?:\.\d+)?H)?(\d+(?:\.\d+)?M)?(\d+(?:\.\d+)?S)?)?$/;const{parse:ug}=qe;var pg=e=>{try{return ug(e),!0}catch{return!1}};const Jr=2147483647,St=36,Do=1,jn=26,hg=38,mg=700,Ll=72,Ml=128,Cl="-",yg=/^xn--/,gg=/[^\0-\x7F]/,vg=/[\x2E\u3002\uFF0E\uFF61]/g,wg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ao=St-Do,Ot=Math.floor,Ro=String.fromCharCode;function Zt(e){throw new RangeError(wg[e])}function bg(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}function Ul(e,t){const r=e.split("@");let n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(vg,".");const i=e.split("."),o=bg(i,t).join(".");return n+o}function To(e){const t=[];let r=0;const n=e.length;for(;r<n;){const i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){const o=e.charCodeAt(r++);(o&64512)==56320?t.push(((i&1023)<<10)+(o&1023)+65536):(t.push(i),r--)}else t.push(i)}return t}const ql=e=>String.fromCodePoint(...e),$g=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:St},zl=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Fl=function(e,t,r){let n=0;for(e=r?Ot(e/mg):e>>1,e+=Ot(e/t);e>Ao*jn>>1;n+=St)e=Ot(e/Ao);return Ot(n+(Ao+1)*e/(e+hg))},Lo=function(e){const t=[],r=e.length;let n=0,i=Ml,o=Ll,s=e.lastIndexOf(Cl);s<0&&(s=0);for(let a=0;a<s;++a)e.charCodeAt(a)>=128&&Zt("not-basic"),t.push(e.charCodeAt(a));for(let a=s>0?s+1:0;a<r;){const l=n;for(let f=1,d=St;;d+=St){a>=r&&Zt("invalid-input");const p=$g(e.charCodeAt(a++));p>=St&&Zt("invalid-input"),p>Ot((Jr-n)/f)&&Zt("overflow"),n+=p*f;const u=d<=o?Do:d>=o+jn?jn:d-o;if(p<u)break;const h=St-u;f>Ot(Jr/h)&&Zt("overflow"),f*=h}const c=t.length+1;o=Fl(n-l,c,l==0),Ot(n/c)>Jr-i&&Zt("overflow"),i+=Ot(n/c),n%=c,t.splice(n++,0,i)}return String.fromCodePoint(...t)},Mo=function(e){const t=[];e=To(e);const r=e.length;let n=Ml,i=0,o=Ll;for(const l of e)l<128&&t.push(Ro(l));const s=t.length;let a=s;for(s&&t.push(Cl);a<r;){let l=Jr;for(const f of e)f>=n&&f<l&&(l=f);const c=a+1;l-n>Ot((Jr-i)/c)&&Zt("overflow"),i+=(l-n)*c,n=l;for(const f of e)if(f<n&&++i>Jr&&Zt("overflow"),f===n){let d=i;for(let p=St;;p+=St){const u=p<=o?Do:p>=o+jn?jn:p-o;if(d<u)break;const h=d-u,g=St-u;t.push(Ro(zl(u+h%g,0))),d=Ot(h/g)}t.push(Ro(zl(d,0))),o=Fl(i,c,a===s),i=0,++a}++i,++n}return t.join("")},Vl=function(e){return Ul(e,function(t){return yg.test(t)?Lo(t.slice(4).toLowerCase()):t})},Hl=function(e){return Ul(e,function(t){return gg.test(t)?"xn--"+Mo(t):t})};var _g=Object.freeze({__proto__:null,decode:Lo,default:{version:"2.3.1",ucs2:{decode:To,encode:ql},decode:Lo,encode:Mo,toASCII:Hl,toUnicode:Vl},encode:Mo,toASCII:Hl,toUnicode:Vl,ucs2decode:To,ucs2encode:ql}),Jl=Fo(_g);const{toASCII:Sg}=Jl,Og=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i;var Ig=e=>{const t=Sg(e);return t.replace(/\.$/,"").length<=253&&Og.test(t)};const{parse:Eg}=$l,{addressParser:Pg}=qe,Gl=Tl;function jg(e){try{return Pg(e),!0}catch{return!1}}var xg=e=>{const t=Eg(e);return t.scheme==="mailto"&&t.to.every(jg)||t.reference==="absolute"&&t.path!==void 0&&Gl.allByName[t.scheme]?!0:t.scheme&&!Gl.allByName[t.scheme]?!1:t.path!==void 0&&(t.reference==="relative"||t.reference==="same-document"||t.reference==="uri")};(function(e){e.exports.iri=fg,e.exports.duration=dg,e.exports["idn-email"]=pg,e.exports["idn-hostname"]=Ig,e.exports["iri-reference"]=xg})(bl);var Ng=bl.exports;const Bl=Ng;var kg=(e,t={})=>{const r=Object.keys(Bl);let n=r;if(t.formats){if(!Array.isArray(t.formats))throw new Error("options.formats must be an array");n=t.formats}return r.filter(i=>n.includes(i)).forEach(i=>{e.addFormat(i,Bl[i])}),e},Kl=en(kg),Dg={exports:{}};(function(e){var t=function(){var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function s(l,c){if(!o[l]){o[l]={};for(var f=0;f<l.length;f++)o[l][l.charAt(f)]=f}return o[l][c]}var a={compressToBase64:function(l){if(l==null)return"";var c=a._compress(l,6,function(f){return n.charAt(f)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(c){return s(n,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(c){return r(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=a.compress(l),f=new Uint8Array(c.length*2),d=0,p=c.length;d<p;d++){var u=c.charCodeAt(d);f[d*2]=u>>>8,f[d*2+1]=u%256}return f},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var c=new Array(l.length/2),f=0,d=c.length;f<d;f++)c[f]=l[f*2]*256+l[f*2+1];var p=[];return c.forEach(function(u){p.push(r(u))}),a.decompress(p.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(c){return i.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(c){return s(i,l.charAt(c))}))},compress:function(l){return a._compress(l,16,function(c){return r(c)})},_compress:function(l,c,f){if(l==null)return"";var d,p,u={},h={},g="",m="",y="",v=2,_=3,w=2,O=[],$=0,j=0,D;for(D=0;D<l.length;D+=1)if(g=l.charAt(D),Object.prototype.hasOwnProperty.call(u,g)||(u[g]=_++,h[g]=!0),m=y+g,Object.prototype.hasOwnProperty.call(u,m))y=m;else{if(Object.prototype.hasOwnProperty.call(h,y)){if(y.charCodeAt(0)<256){for(d=0;d<w;d++)$=$<<1,j==c-1?(j=0,O.push(f($)),$=0):j++;for(p=y.charCodeAt(0),d=0;d<8;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1}else{for(p=1,d=0;d<w;d++)$=$<<1|p,j==c-1?(j=0,O.push(f($)),$=0):j++,p=0;for(p=y.charCodeAt(0),d=0;d<16;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1}v--,v==0&&(v=Math.pow(2,w),w++),delete h[y]}else for(p=u[y],d=0;d<w;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1;v--,v==0&&(v=Math.pow(2,w),w++),u[m]=_++,y=String(g)}if(y!==""){if(Object.prototype.hasOwnProperty.call(h,y)){if(y.charCodeAt(0)<256){for(d=0;d<w;d++)$=$<<1,j==c-1?(j=0,O.push(f($)),$=0):j++;for(p=y.charCodeAt(0),d=0;d<8;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1}else{for(p=1,d=0;d<w;d++)$=$<<1|p,j==c-1?(j=0,O.push(f($)),$=0):j++,p=0;for(p=y.charCodeAt(0),d=0;d<16;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1}v--,v==0&&(v=Math.pow(2,w),w++),delete h[y]}else for(p=u[y],d=0;d<w;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1;v--,v==0&&(v=Math.pow(2,w),w++)}for(p=2,d=0;d<w;d++)$=$<<1|p&1,j==c-1?(j=0,O.push(f($)),$=0):j++,p=p>>1;for(;;)if($=$<<1,j==c-1){O.push(f($));break}else j++;return O.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,f){var d=[],p=4,u=4,h=3,g="",m=[],y,v,_,w,O,$,j,D={val:f(0),position:c,index:1};for(y=0;y<3;y+=1)d[y]=y;for(_=0,O=Math.pow(2,2),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;switch(_){case 0:for(_=0,O=Math.pow(2,8),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;j=r(_);break;case 1:for(_=0,O=Math.pow(2,16),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;j=r(_);break;case 2:return""}for(d[3]=j,v=j,m.push(j);;){if(D.index>l)return"";for(_=0,O=Math.pow(2,h),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;switch(j=_){case 0:for(_=0,O=Math.pow(2,8),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;d[u++]=r(_),j=u-1,p--;break;case 1:for(_=0,O=Math.pow(2,16),$=1;$!=O;)w=D.val&D.position,D.position>>=1,D.position==0&&(D.position=c,D.val=f(D.index++)),_|=(w>0?1:0)*$,$<<=1;d[u++]=r(_),j=u-1,p--;break;case 2:return m.join("")}if(p==0&&(p=Math.pow(2,h),h++),d[j])g=d[j];else if(j===u)g=v+v.charAt(0);else return null;m.push(g),d[u++]=v+g.charAt(0),p--,v=g,p==0&&(p=Math.pow(2,h),h++)}}};return a}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(Dg);var Co={exports:{}},Wl=Jl;function Ag(e,t){this.__proto__=new Error(t),this.__proto__.name="BackslashError",this.offset=e}function Uo(e){return e>="0"&&e<="7"}function Rg(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"}function Xl(e){return e=parseInt(e,16),Wl.ucs2.encode([e])}function Ql(e,t,r){var n=!1,i=[];function o(l){var c=e[l];if(!Rg(c))throw new Ag(l,"Unexpected token ILLEGAL");return c}for(;t<e.length;){var s=e[t];if(t++,n){switch(n=!1,s){case"n":i.push(`
`);continue;case"r":i.push("\r");continue;case"f":i.push("\f");continue;case"b":i.push("\b");continue;case"t":i.push("	");continue;case"v":i.push("\v");continue;case"\\":i.push("\\");continue}if(s==="x"){i.push(Xl(o(t)+o(t+1))),t+=2;continue}if(s==="u"){i.push(Xl(o(t)+o(t+1)+o(t+2)+o(t+3))),t+=4;continue}if(Uo(s)){var a;Uo(a=e[t])&&(t++,s+=a,Uo(a=e[t])&&s[0]<="3"&&(t++,s+=a)),i.push(Wl.ucs2.encode([parseInt(s,8)]));continue}i.push(s)}else if(s==="\\")n=!0;else if(s===r){t--;break}else i.push(s)}return arguments.length===3?{end:t,value:i.join("")}:i.join("")}Co.exports=function(t){return Ql(t,0)},Co.exports.parseUntil=function(t,r,n){return Ql(t,r,n)};var Tg=Co.exports,Zl=Tg,Lg={validate:Mg,parse:Cg};function Mg(e,t){var r;if(t=t||!1,typeof e!="string")r="Input must be a string";else try{ji(e,0,t,!1)}catch(n){r=n.message}return r}function Cg(e,t){if(typeof e!="string")throw new Error("Input must be a string");t=t||!1;var r=ji(e,0,t,!0);return r.value}function Yl(e,t){for(var r=e.length,n=t,i,o=t;o<r;o++){var s=e[o];if(s===","){i=o;break}else if(s==="]"||s==="}"){i=o-1;break}else if(!br(s))throw ht(e,o,"expecting end of expression or separator")}var a;return i===void 0?(i=r,a=e[i]):(a=e[i],i++),{start:n,end:i,value:a}}function Ug(e,t){for(var r=e.length,n=t,i,o=t;o<r;o++){var s=e[o];if(s===":"){i=o;break}else if(!br(s))throw ht(e,o,"expecting ':'")}if(i===void 0)throw ht(e,o,"expecting ':'");return i++,{start:n,end:i}}function ji(e,t,r,n){for(var i=e.length,o,s,a=!1,l=!1,c=!1,f=!1,d=!1,p,u=0,h=!1,g,m=t;m<i;m++){var y=e[m];if(o===void 0){if(!br(y)){if(y==="[")a=!0;else if(y==="{")l=!0;else if(y==='"')c=!0;else if(Vg(e,m)){o=m,m=m+3,s=m,g=!0;break}else if(Hg(e,m)){o=m,m=m+4,s=m,g=!1;break}else if(Jg(e,m)){o=m,m=m+3,s=m,g=null;break}else if(tf(y))f=!0;else if(y==="-")f=!0;else throw ht(e,m,"");o=m}}else if(a){var v=Fg(e,m,r,n);s=v.end,g=v.value;break}else if(l){var _=zg(e,m,r,n);s=_.end,g=_.value;break}else if(c&&y==='"'&&ef(e,m-1)){s=m,g=Zl(e.substring(o+1,s));break}else if(f)if(br(y))h=!0;else if(y===","||y==="]"||y==="}"){g=parseFloat(e.substring(o,s),10),s=m-1;break}else if(tf(y)&&!h){p&&u++;continue}else if(y==="."&&!d&&!p&&!h)d=!0;else if((y==="e"||y==="E")&&!p&&!h)p=m;else{if((y==="+"||y==="-")&&p===m-1&&!h)continue;throw ht(e,m,"expecting number")}}if(f&&p&&!u)throw ht(e,m,"expecting number");if(s===void 0)if(f)g=parseFloat(e.substring(o,m),10),s=m-1;else throw ht(e,m,"unclosed statement");return s++,{value:g,start:o,end:s}}function qg(e,t){for(var r=e.length,n,i,o=t;o<r;o++){var s=e[o];if(n===void 0){if(!br(s)){if(s!=='"')throw ht(e,o,"expecting String");n=o}}else if(s==='"'&&ef(e,o-1)){i=o;break}}if(i===void 0)throw ht(e,r,"expecting String");var a=Zl(e.substring(n+1,i));if(a==="")throw ht(e,n,"empty string");return i++,{start:n,end:i,value:a}}function zg(e,t,r,n){for(var i=t,o=",",s={},a=[],l=[],c=t;br(e[c]);)c++;if(e[c]==="}")return{start:t,end:c,value:s};for(;o===",";){var f=qg(e,i),d=Ug(e,f.end),p=ji(e,d.end,r,n),u=Yl(e,p.end);if(!r&&a.indexOf(f.value)!==-1)throw ht(e,f.end,'duplicated keys "'+f.value+'"');a.push(f.value),l.push(p.value),i=u.end,o=u.value}if(n){var h=0;for(h=0;h<a.length;h++)s[a[h]]=l[h]}return{start:t,end:i,value:s}}function ef(e,t){for(var r=t,n=0;r>-1&&e[r]==="\\";)n++,r--;return n%2===0}function Fg(e,t,r,n){for(var i=t,o=",",s=[],a=t;br(e[a]);)a++;if(e[a]==="]")return{start:t,end:a,value:s};for(;o===",";){var l=ji(e,i,r,n),c=Yl(e,l.end);n&&s.push(l.value),i=c.end,o=c.value}return{start:t,end:i,value:s}}function Vg(e,t){return e.substr(t,4)==="true"}function Hg(e,t){return e.substr(t,5)==="false"}function Jg(e,t){return e.substr(t,4)==="null"}var Gg=new RegExp(/^\s$/);function br(e){return Gg.test(e)}var Bg=new RegExp(/^\d$/);function tf(e){return Bg.test(e)}function ht(e,t,r){var n=10,i;e.length<t+n?i=e.substr(rf(e.length-n),e.length):t-n/2<0?i=e.substr(0,n):i=e.substr(rf(t-n/2),n);var o;return r?o="Syntax error: "+r+" near "+i:o="Syntax error near "+i,new Error(o)}function rf(e){return e<0?0:e}var qo=en(Lg);const Kg=/^(?:(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))$|^((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[\da-z]{5,8}|\d[\da-z]{3}))*)?((?:-[\da-wy-z](?:-[\da-z]{2,8})+)*)?(-x(?:-[\da-z]{1,8})+)?$|^(x(?:-[\da-z]{1,8})+)$/i,Wg=(e,t,r)=>t.split(/[\.\[\]\'\"]/).filter(n=>n).reduce((n,i)=>n?n[i]:r,e);function nf(e){const t=[];try{qo.parse(e,!1);const r=JSON.parse(e);return Object.prototype.hasOwnProperty.call(r,"properties")?t.push({ID:"td-properties_uniqueness",Status:"pass",Comment:""}):t.push({ID:"td-properties_uniqueness",Status:"not-impl",Comment:"no properties"}),Object.prototype.hasOwnProperty.call(r,"actions")?t.push({ID:"td-actions_uniqueness",Status:"pass",Comment:""}):t.push({ID:"td-actions_uniqueness",Status:"not-impl",Comment:"no actions"}),Object.prototype.hasOwnProperty.call(r,"events")?t.push({ID:"td-events_uniqueness",Status:"pass",Comment:""}):t.push({ID:"td-events_uniqueness",Status:"not-impl",Comment:"no events"}),t}catch(r){const n=r.toString(),i=n.indexOf('"'),o=n.slice(i+1),s=o.indexOf('"'),a=o.slice(0,s),l=JSON.parse(e);if(Object.prototype.hasOwnProperty.call(l,"properties")){const c=l.properties;Object.prototype.hasOwnProperty.call(c,a)?(t.push({ID:"td-properties_uniqueness",Status:"fail",Comment:"duplicate property names"}),e=e.replace(a,"duplicateName")):t.push({ID:"td-properties_uniqueness",Status:"pass",Comment:""})}else t.push({ID:"td-properties_uniqueness",Status:"not-impl",Comment:"no properties"});if(Object.prototype.hasOwnProperty.call(l,"actions")){const c=l.actions;Object.prototype.hasOwnProperty.call(c,a)?(t.push({ID:"td-actions_uniqueness",Status:"fail",Comment:"duplicate action names"}),e=e.replace(a,"duplicateName")):t.push({ID:"td-actions_uniqueness",Status:"pass",Comment:""})}else t.push({ID:"td-actions_uniqueness",Status:"not-impl",Comment:"no actions"});if(Object.prototype.hasOwnProperty.call(l,"events")){const c=l.events;Object.prototype.hasOwnProperty.call(c,a)?(t.push({ID:"td-events_uniqueness",Status:"fail",Comment:"duplicate event names"}),e=e.replace(a,"duplicateName")):t.push({ID:"td-events_uniqueness",Status:"pass",Comment:""})}else t.push({ID:"td-events_uniqueness",Status:"not-impl",Comment:"no events"});return t}}function Xg(e){const t=[];if(Object.prototype.hasOwnProperty.call(e,"securityDefinitions")){const r=e.securityDefinitions,n=Object.keys(r),i=e.security;if(!xi(n,i))return t.push({ID:"td-security-scheme-name",Status:"fail",Comment:"used a non defined security scheme in root level"}),t;if(Object.prototype.hasOwnProperty.call(e,"properties")){let o=Object.keys(e.properties);for(let s=0;s<o.length;s++){const a=o[s],c=e.properties[a].forms;for(let f=0;f<c.length;f++){const d=c[f];if(Object.prototype.hasOwnProperty.call(d,"security")){const p=d.security;if(!xi(n,p))return t.push({ID:"td-security-scheme-name",Status:"fail",Comment:"used a non defined security scheme in a property form"}),t}}}}if(Object.prototype.hasOwnProperty.call(e,"actions")){let o=Object.keys(e.actions);for(let s=0;s<o.length;s++){const a=o[s],c=e.actions[a].forms;for(let f=0;f<c.length;f++){const d=c[f];if(Object.prototype.hasOwnProperty.call(d,"security")){const p=d.security;if(!xi(n,p))return t.push({ID:"td-security-scheme-name",Status:"fail",Comment:"used a non defined security scheme in an action form"}),t}}}}if(Object.prototype.hasOwnProperty.call(e,"events")){let o=Object.keys(e.events);for(let s=0;s<o.length;s++){const a=o[s],c=e.events[a].forms;for(let f=0;f<c.length;f++){const d=c[f];if(Object.prototype.hasOwnProperty.call(d,"security")){const p=d.security;if(!xi(n,p))return t.push({ID:"td-security-scheme-name",Status:"fail",Comment:"used a non defined security scheme in an event form"}),t}}}}return t.push({ID:"td-security-scheme-name",Status:"pass"}),t}return t}function xi(e,t){return typeof t=="string"&&(t=[t]),t.every(r=>e.indexOf(r)>-1)}function sf(e){const t=[],r=[],n=[];if(Object.prototype.hasOwnProperty.call(e,"titles")){const s=e.titles,a=Object.keys(s);r.push(a),n.push({root_title:Yt(e.title,s)})}if(Object.prototype.hasOwnProperty.call(e,"descriptions")){const s=e.descriptions,a=Object.keys(s);r.push(a),Object.prototype.hasOwnProperty.call(e,"description")&&n.push({root_description:Yt(e.description,s)})}if(Object.prototype.hasOwnProperty.call(e,"properties")){let s=Object.keys(e.properties);for(let a=0;a<s.length;a++){const l=s[a],c=e.properties[l];if(Object.prototype.hasOwnProperty.call(c,"titles")){const f=Object.keys(c.titles);r.push(f),Object.prototype.hasOwnProperty.call(c,"title")&&n.push({["property_"+l+"_title"]:Yt(c.title,c.titles)})}if(Object.prototype.hasOwnProperty.call(c,"descriptions")){const f=Object.keys(c.descriptions);r.push(f),Object.prototype.hasOwnProperty.call(c,"description")&&n.push({["property_"+l+"_desc"]:Yt(c.description,c.descriptions)})}}}if(Object.prototype.hasOwnProperty.call(e,"actions")){let s=Object.keys(e.actions);for(let a=0;a<s.length;a++){const l=s[a],c=e.actions[l];if(Object.prototype.hasOwnProperty.call(c,"titles")){const f=Object.keys(c.titles);r.push(f),Object.prototype.hasOwnProperty.call(c,"title")&&n.push({["action_"+l+"_title"]:Yt(c.title,c.titles)})}if(Object.prototype.hasOwnProperty.call(c,"descriptions")){const f=Object.keys(c.descriptions);r.push(f),Object.prototype.hasOwnProperty.call(c,"description")&&n.push({["action_"+l+"_desc"]:Yt(c.description,c.descriptions)})}}}if(Object.prototype.hasOwnProperty.call(e,"events")){let s=Object.keys(e.events);for(let a=0;a<s.length;a++){const l=s[a],c=e.events[l];if(Object.prototype.hasOwnProperty.call(c,"titles")){const f=Object.keys(c.titles);r.push(f),Object.prototype.hasOwnProperty.call(c,"title")&&n.push({["event_"+l+"_title"]:Yt(c.title,c.titles)})}if(Object.prototype.hasOwnProperty.call(c,"descriptions")){const f=Object.keys(c.descriptions);r.push(f),Object.prototype.hasOwnProperty.call(c,"description")&&n.push({["event_"+l+"_desc"]:Yt(c.description,c.descriptions)})}}}Qg(r)?t.push({ID:"td-multi-languages-consistent",Status:"pass"}):t.push({ID:"td-multi-languages-consistent",Status:"fail",Comment:"not all multilang objects have same language tags"});const i=[];for(let s=0;s<r.length;s++){let a=r[s];a=JSON.parse(a);for(let l=0;l<a.length;l++){const c=a[l];i.push(c)}}const o=Zg(i);if(o==="ok"?t.push({ID:"td-multilanguage-language-tag",Status:"pass"}):t.push({ID:"td-multilanguage-language-tag",Status:"fail",Comment:o+" is not a BCP47 tag"}),n.length===0)return t.push({ID:"td-titles-descriptions",Status:"not-impl",Comment:"no multilang objects in the td"}),t;for(let s=0;s<n.length;s++){const a=n[s],l=Object.keys(a);if(!a[l])return t.push({ID:"td-titles-descriptions",Status:"fail",Comment:l+" is not on the multilang object at the same level"}),t}return t.push({ID:"td-titles-descriptions",Status:"pass"}),t}function Qg(e){if(e.length===0)return!0;for(let t=e.length;t--;)e[t]=JSON.stringify(e[t]);for(let t=e.length;t--;){if(t===0)return!0;if(e[t]!==e[t-1])return!1}}function Zg(e){for(let t=0;t<e.length;t++){const r=e[t];if(!Kg.test(r))return r}return"ok"}function Yt(e,t){const r=Object.keys(t);if(r.length===0)return!1;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]===e)return!0}return!1}function of(e){const t=[];if(Object.prototype.hasOwnProperty.call(e,"links")){let r=0;for(let n=0;n<e.links.length;n++){const i=e.links[n];Object.prototype.hasOwnProperty.call(i,"rel")&&i.rel==="type"&&r++}r===0?t.push({ID:"tm-rel-type-maximum",Status:"not-impl",Comment:"no rel:type in any link"}):r===1?t.push({ID:"tm-rel-type-maximum",Status:"pass",Comment:""}):t.push({ID:"tm-rel-type-maximum",Status:"fail",Comment:"too many rel:type in links array"})}else t.push({ID:"tm-rel-type-maximum",Status:"not-impl",Comment:"no links array in the td"});return t}function Yg(e){const t=[];if(Object.prototype.hasOwnProperty.call(e,"securityDefinitions")){const r=e.securityDefinitions,n=Object.keys(r),i=[];for(let o=0;o<n.length;o++){const s=r[n[o]];s.scheme==="apikey"&&Object.prototype.hasOwnProperty.call(s,"in")&&s.in==="uri"&&Object.prototype.hasOwnProperty.call(s,"name")&&i.push(s.name)}if(i.length===0)return t.push({ID:"td-security-in-uri-variable",Status:"not-impl",Comment:"no use of name in a uri apikey scheme"}),t.push({ID:"td-security-uri-variables-distinct",Status:"not-impl",Comment:"no use of name in a uri apikey scheme"}),t;{let o="not-impl",s="not-impl",a=[];if(Object.prototype.hasOwnProperty.call(e,"uriVariables")&&(a=Object.keys(e.uriVariables)),Object.prototype.hasOwnProperty.call(e,"properties")){let l=Object.keys(e.properties);for(let c=0;c<l.length;c++){const f=l[c],d=e.properties[f],p=d.forms;for(let u=0;u<p.length;u++){const h=p[u];if(Object.prototype.hasOwnProperty.call(h,"href")){const g=h.href;i.some(m=>g.includes(m))&&o!=="fail"&&(o="pass")}}if(Object.prototype.hasOwnProperty.call(d,"uriVariables")){let u=Object.keys(d.uriVariables);u.push(...a),u.length>0&&(u.filter(g=>i.includes(g)).length>0?s="fail":s!=="fail"&&(s="pass"))}}}if(Object.prototype.hasOwnProperty.call(e,"actions")){let l=Object.keys(e.actions);for(let c=0;c<l.length;c++){const f=l[c],d=e.actions[f],p=d.forms;for(let u=0;u<p.length;u++){const h=p[u];if(Object.prototype.hasOwnProperty.call(h,"href")){const g=h.href;i.some(m=>g.includes(m))&&o!=="fail"&&(o="pass")}}if(Object.prototype.hasOwnProperty.call(d,"uriVariables")){let u=Object.keys(d.uriVariables);u.push(...a),u.length>0&&(u.filter(g=>i.includes(g)).length>0?s="fail":s!=="fail"&&(s="pass"))}}}if(Object.prototype.hasOwnProperty.call(e,"events")){let l=Object.keys(e.events);for(let c=0;c<l.length;c++){const f=l[c],d=e.events[f],p=d.forms;for(let u=0;u<p.length;u++){const h=p[u];if(Object.prototype.hasOwnProperty.call(h,"href")){const g=h.href;i.some(m=>g.includes(m))&&o!=="fail"&&(o="pass")}}if(Object.prototype.hasOwnProperty.call(d,"uriVariables")){let u=Object.keys(d.uriVariables);u.push(...a),u.length>0&&(u.filter(g=>i.includes(g)).length>0?s="fail":s!=="fail"&&(s="pass"))}}}return t.push({ID:"td-security-in-uri-variable",Status:o}),t.push({ID:"td-security-in-uri-variable-distinct",Status:s}),t}}return t}function ev(e){const t=[];return Object.prototype.hasOwnProperty.call(e,"tm:optional")?e["tm:optional"].forEach(r=>{r=r.substring(1),r=r.replace("/",".");const n=Wg(e,r,"noTarget");n==="noTarget"||n===void 0?t.push({ID:"tm-tmOptional-resolver",Status:"fail",Comment:"tm:optional does not resolve to an affordance"}):t.push({ID:"tm-tmOptional-resolver",Status:"pass",Comment:""})}):t.push({ID:"tm-tmOptional-resolver",Status:"not-impl",Comment:"no use of tm:optional"}),t}var Gr={title:"Thing Description",version:"1.1-05-September-2022",description:"JSON Schema for validating TD instances against the TD information model. TD instances can be with or without terms that have default values",$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/td-json-schema-validation.json",definitions:{anyUri:{type:"string"},description:{type:"string"},descriptions:{type:"object",additionalProperties:{type:"string"}},title:{type:"string"},titles:{type:"object",additionalProperties:{type:"string"}},security:{oneOf:[{type:"array",items:{type:"string"},minItems:1},{type:"string"}]},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},subprotocol:{type:"string",examples:["longpoll","websub","sse"]},"thing-context-td-uri-v1":{type:"string",const:"https://www.w3.org/2019/wot/td/v1"},"thing-context-td-uri-v1.1":{type:"string",const:"https://www.w3.org/2022/wot/td/v1.1"},"thing-context-td-uri-temp":{type:"string",const:"http://www.w3.org/ns/td"},"thing-context":{anyOf:[{$comment:"New context URI with other vocabularies after it but not the old one",type:"array",items:[{$ref:"#/definitions/thing-context-td-uri-v1.1"}],additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}],not:{$ref:"#/definitions/thing-context-td-uri-v1"}}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1.1"},{$comment:"Old context URI, followed by the new one and possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"},{$ref:"#/definitions/thing-context-td-uri-v1.1"}],minItems:2,contains:{$ref:"#/definitions/thing-context-td-uri-v1.1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Old context URI, followed by possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"}],minItems:1,contains:{$ref:"#/definitions/thing-context-td-uri-v1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1"}]},bcp47_string:{type:"string",pattern:"^(((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+)|((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$"},type_declaration:{oneOf:[{type:"string",not:{const:"tm:ThingModel"}},{type:"array",items:{type:"string",not:{const:"tm:ThingModel"}}}]},"dataSchema-type":{type:"string",enum:["boolean","integer","number","string","object","array","null"]},dataSchema:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},title:{$ref:"#/definitions/title"},descriptions:{$ref:"#/definitions/descriptions"},titles:{$ref:"#/definitions/titles"},writeOnly:{type:"boolean"},readOnly:{type:"boolean"},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{type:"array",minItems:1,uniqueItems:!0},format:{type:"string"},const:{},default:{},contentEncoding:{type:"string"},contentMediaType:{type:"string"},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{type:"integer",minimum:0},minItems:{type:"integer",minimum:0},minimum:{type:"number"},maximum:{type:"number"},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{type:"integer",minimum:0},maxLength:{type:"integer",minimum:0},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{type:"array",items:{type:"string"}}}},additionalResponsesDefinition:{type:"array",items:{type:"object",properties:{contentType:{type:"string"},schema:{type:"string"},success:{type:"boolean"}}}},multipleOfDefinition:{type:["integer","number"],exclusiveMinimum:0},expectedResponse:{type:"object",properties:{contentType:{type:"string"}}},form_element_base:{type:"object",properties:{op:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},href:{$ref:"#/definitions/anyUri"},contentType:{type:"string"},contentCoding:{type:"string"},subprotocol:{$ref:"#/definitions/subprotocol"},security:{$ref:"#/definitions/security"},scopes:{$ref:"#/definitions/scopes"},response:{$ref:"#/definitions/expectedResponse"},additionalResponses:{$ref:"#/definitions/additionalResponsesDefinition"}},required:["href"],additionalProperties:!0},form_element_property:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]},{type:"array",items:{type:"string",enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]}}]}},additionalProperties:!0},form_element_action:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["invokeaction","queryaction","cancelaction"]},{type:"array",items:{type:"string",enum:["invokeaction","queryaction","cancelaction"]}}]}},additionalProperties:!0},form_element_event:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["subscribeevent","unsubscribeevent"]},{type:"array",items:{type:"string",enum:["subscribeevent","unsubscribeevent"]}}]}},additionalProperties:!0},form_element_root:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]},{type:"array",items:{type:"string",enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]}}]}},additionalProperties:!0,required:["op"]},form:{$comment:"This is NOT for validation purposes but for automatic generation of TS types. For more info, please see: https://github.com/w3c/wot-thing-description/pull/1319#issuecomment-994950057",oneOf:[{$ref:"#/definitions/form_element_property"},{$ref:"#/definitions/form_element_action"},{$ref:"#/definitions/form_element_event"},{$ref:"#/definitions/form_element_root"}]},property_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_property"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},observable:{type:"boolean"},writeOnly:{type:"boolean"},readOnly:{type:"boolean"},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{type:"array",minItems:1,uniqueItems:!0},format:{type:"string"},const:{},default:{},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{type:"integer",minimum:0},minItems:{type:"integer",minimum:0},minimum:{type:"number"},maximum:{type:"number"},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{type:"integer",minimum:0},maxLength:{type:"integer",minimum:0},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{type:"array",items:{type:"string"}}},required:["forms"],additionalProperties:!0},action_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_action"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},input:{$ref:"#/definitions/dataSchema"},output:{$ref:"#/definitions/dataSchema"},safe:{type:"boolean"},idempotent:{type:"boolean"},synchronous:{type:"boolean"}},required:["forms"],additionalProperties:!0},event_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_event"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},subscription:{$ref:"#/definitions/dataSchema"},data:{$ref:"#/definitions/dataSchema"},dataResponse:{$ref:"#/definitions/dataSchema"},cancellation:{$ref:"#/definitions/dataSchema"}},required:["forms"],additionalProperties:!0},base_link_element:{type:"object",properties:{href:{$ref:"#/definitions/anyUri"},type:{type:"string"},rel:{type:"string"},anchor:{$ref:"#/definitions/anyUri"},hreflang:{anyOf:[{$ref:"#/definitions/bcp47_string"},{type:"array",items:{$ref:"#/definitions/bcp47_string"}}]}},required:["href"],additionalProperties:!0},link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{not:{description:"A basic link element should not contain sizes",type:"object",properties:{sizes:{}},required:["sizes"]}},{not:{description:"A basic link element should not contain icon or tm:extends",properties:{rel:{enum:["icon","tm:extends"]}},required:["rel"]}}]},icon_link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{properties:{rel:{const:"icon"},sizes:{type:"string",pattern:"[0-9]*x[0-9]+"}},required:["rel"]}]},additionalSecurityScheme:{description:"Applies to additional SecuritySchemes not defined in the WoT TD specification.",$comment:"Additional SecuritySchemes should always be defined via a context extension, using a prefixed value for the scheme. This prefix (e.g. 'ace', see the example below) must contain at least one character in order to reference a valid JSON-LD context extension.",examples:[{scheme:"ace:ACESecurityScheme","ace:as":"coaps://as.example.com/token","ace:audience":"coaps://rs.example.com","ace:scopes":["limited","special"],"ace:cnonce":!0}],type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",pattern:".+:.*"}},required:["scheme"],additionalProperties:!0},noSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["nosec"]}},required:["scheme"],additionalProperties:!0},autoSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["auto"]}},not:{required:["name"]},required:["scheme"],additionalProperties:!0},comboSecurityScheme:{oneOf:[{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["combo"]},oneOf:{type:"array",minItems:2,items:{type:"string"}}},required:["scheme","oneOf"],additionalProperties:!0},{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["combo"]},allOf:{type:"array",minItems:2,items:{type:"string"}}},required:["scheme","allOf"],additionalProperties:!0}]},basicSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["basic"]},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme"],additionalProperties:!0},digestSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["digest"]},qop:{type:"string",enum:["auth","auth-int"]},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme"],additionalProperties:!0},apiKeySecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["apikey"]},in:{type:"string",enum:["header","query","body","cookie","uri","auto"]},name:{type:"string"}},required:["scheme"],additionalProperties:!0},bearerSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["bearer"]},authorization:{$ref:"#/definitions/anyUri"},alg:{type:"string"},format:{type:"string"},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme"],additionalProperties:!0},pskSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["psk"]},identity:{type:"string"}},required:["scheme"],additionalProperties:!0},oAuth2SecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["oauth2"]},authorization:{$ref:"#/definitions/anyUri"},token:{$ref:"#/definitions/anyUri"},refresh:{$ref:"#/definitions/anyUri"},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},flow:{anyOf:[{type:"string"},{type:"string",enum:["code","client","device"]}]}},required:["scheme"],additionalProperties:!0},securityScheme:{oneOf:[{$ref:"#/definitions/noSecurityScheme"},{$ref:"#/definitions/autoSecurityScheme"},{$ref:"#/definitions/comboSecurityScheme"},{$ref:"#/definitions/basicSecurityScheme"},{$ref:"#/definitions/digestSecurityScheme"},{$ref:"#/definitions/apiKeySecurityScheme"},{$ref:"#/definitions/bearerSecurityScheme"},{$ref:"#/definitions/pskSecurityScheme"},{$ref:"#/definitions/oAuth2SecurityScheme"},{$ref:"#/definitions/additionalSecurityScheme"}]}},type:"object",properties:{id:{type:"string",format:"uri"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},properties:{type:"object",additionalProperties:{$ref:"#/definitions/property_element"}},actions:{type:"object",additionalProperties:{$ref:"#/definitions/action_element"}},events:{type:"object",additionalProperties:{$ref:"#/definitions/event_element"}},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},version:{type:"object",properties:{instance:{type:"string"}},required:["instance"]},links:{type:"array",items:{oneOf:[{$ref:"#/definitions/link_element"},{$ref:"#/definitions/icon_link_element"}]}},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_root"}},base:{$ref:"#/definitions/anyUri"},securityDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/securityScheme"}},schemaDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/dataSchema"}},support:{$ref:"#/definitions/anyUri"},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"},profile:{oneOf:[{$ref:"#/definitions/anyUri"},{type:"array",minItems:1,items:{$ref:"#/definitions/anyUri"}}]},security:{oneOf:[{type:"string"},{type:"array",minItems:1,items:{type:"string"}}]},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},"@type":{$ref:"#/definitions/type_declaration"},"@context":{$ref:"#/definitions/thing-context"}},required:["title","security","securityDefinitions","@context"],additionalProperties:!0},tv={title:"Thing Description",version:"1.1-10-June-2022",description:"JSON Schema for validating TD instances against the TD information model. For a TD to validate this schema it must contain all the default terms defined in Section 5.4",$schema:"http://json-schema.org/draft-07/schema#",definitions:{anyUri:{type:"string"},description:{type:"string"},descriptions:{type:"object",additionalProperties:{type:"string"}},title:{type:"string"},titles:{type:"object",additionalProperties:{type:"string"}},security:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},subprotocol:{type:"string",examples:["longpoll","websub","sse"]},"thing-context-td-uri-v1":{type:"string",const:"https://www.w3.org/2019/wot/td/v1"},"thing-context-td-uri-v1.1":{type:"string",const:"https://www.w3.org/2022/wot/td/v1.1"},"thing-context-td-uri-temp":{type:"string",const:"http://www.w3.org/ns/td"},"thing-context":{anyOf:[{$comment:"New context URI with other vocabularies after it but not the old one",type:"array",items:[{$ref:"#/definitions/thing-context-td-uri-v1.1"}],additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}],not:{$ref:"#/definitions/thing-context-td-uri-v1"}}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1.1"},{$comment:"Old context URI, followed by the new one and possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"},{$ref:"#/definitions/thing-context-td-uri-v1.1"}],minItems:2,contains:{$ref:"#/definitions/thing-context-td-uri-v1.1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Old context URI, followed by possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"}],minItems:1,contains:{$ref:"#/definitions/thing-context-td-uri-v1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1"}]},type_declaration:{oneOf:[{type:"string",not:{const:"tm:ThingModel"}},{type:"array",items:{type:"string",not:{const:"tm:ThingModel"}}}]},"dataSchema-type":{type:"string",enum:["boolean","integer","number","string","object","array","null"]},dataSchema:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},title:{$ref:"#/definitions/title"},descriptions:{$ref:"#/definitions/descriptions"},titles:{$ref:"#/definitions/titles"},writeOnly:{type:"boolean"},readOnly:{type:"boolean"},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{type:"array",minItems:1,uniqueItems:!0},format:{type:"string"},const:{},default:{},contentEncoding:{type:"string"},contentMediaType:{type:"string"},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{type:"integer",minimum:0},minItems:{type:"integer",minimum:0},minimum:{type:"number"},maximum:{type:"number"},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{type:"integer",minimum:0},maxLength:{type:"integer",minimum:0},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{type:"array",items:{type:"string"}}},required:["readOnly","writeOnly"]},additionalResponsesDefinition:{type:"array",items:{type:"object",properties:{contentType:{type:"string"},schema:{type:"string"},success:{type:"boolean"}},required:["contentType","success"]}},multipleOfDefinition:{type:["integer","number"],exclusiveMinimum:0},expectedResponse:{type:"object",properties:{contentType:{type:"string"}}},form_element_base:{type:"object",properties:{op:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},href:{$ref:"#/definitions/anyUri"},contentType:{type:"string"},contentCoding:{type:"string"},subprotocol:{$ref:"#/definitions/subprotocol"},security:{$ref:"#/definitions/security"},scopes:{$ref:"#/definitions/scopes"},response:{$ref:"#/definitions/expectedResponse"},additionalResponses:{$ref:"#/definitions/additionalResponsesDefinition"}},required:["href","contentType","op"],additionalProperties:!0},form_element_property:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]},{type:"array",items:{type:"string",enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]}}]}},additionalProperties:!0},form_element_action:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["invokeaction","queryaction","cancelaction"]},{type:"array",items:{type:"string",enum:["invokeaction","queryaction","cancelaction"]}}]}},additionalProperties:!0},form_element_event:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["subscribeevent","unsubscribeevent"]},{type:"array",items:{type:"string",enum:["subscribeevent","unsubscribeevent"]}}]}},additionalProperties:!0},form_element_root:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]},{type:"array",items:{type:"string",enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]}}]}},additionalProperties:!0},form:{$comment:"This is NOT for validation purposes but for automatic generation of TS types. For more info, please see: https://github.com/w3c/wot-thing-description/pull/1319#issuecomment-994950057",oneOf:[{$ref:"#/definitions/form_element_property"},{$ref:"#/definitions/form_element_action"},{$ref:"#/definitions/form_element_event"},{$ref:"#/definitions/form_element_root"}]},property_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_property"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},observable:{type:"boolean"},writeOnly:{type:"boolean"},readOnly:{type:"boolean"},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{type:"array",minItems:1,uniqueItems:!0},format:{type:"string"},const:{},default:{},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{type:"integer",minimum:0},minItems:{type:"integer",minimum:0},minimum:{type:"number"},maximum:{type:"number"},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{type:"integer",minimum:0},maxLength:{type:"integer",minimum:0},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{type:"array",items:{type:"string"}}},required:["forms","readOnly","writeOnly","observable"],additionalProperties:!0},action_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_action"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},input:{$ref:"#/definitions/dataSchema"},output:{$ref:"#/definitions/dataSchema"},safe:{type:"boolean"},idempotent:{type:"boolean"},synchronous:{type:"boolean"}},required:["forms","safe","idempotent"],additionalProperties:!0},event_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_event"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},subscription:{$ref:"#/definitions/dataSchema"},data:{$ref:"#/definitions/dataSchema"},dataResponse:{$ref:"#/definitions/dataSchema"},cancellation:{$ref:"#/definitions/dataSchema"}},required:["forms"],additionalProperties:!0},base_link_element:{type:"object",properties:{href:{$ref:"#/definitions/anyUri"},type:{type:"string"},rel:{type:"string"},anchor:{$ref:"#/definitions/anyUri"}},required:["href"],additionalProperties:!0},link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{not:{description:"A basic link element should not contain sizes",type:"object",properties:{sizes:{}},required:["sizes"]}},{not:{description:"A basic link element should not contain icon or tm:extends",properties:{rel:{enum:["icon","tm:extends"]}},required:["rel"]}}]},icon_link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{properties:{rel:{const:"icon"},sizes:{type:"string",pattern:"[0-9]*x[0-9]+"}},required:["rel"]}]},additionalSecurityScheme:{description:"Applies to additional SecuritySchemes not defined in the WoT TD specification.",$comment:"Additional SecuritySchemes should always be defined via a context extension, using a prefixed value for the scheme. This prefix (e.g. 'ace', see the example below) must contain at least one character in order to reference a valid JSON-LD context extension.",examples:[{scheme:"ace:ACESecurityScheme","ace:as":"coaps://as.example.com/token","ace:audience":"coaps://rs.example.com","ace:scopes":["limited","special"],"ace:cnonce":!0}],type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",pattern:".+:.*"}},required:["scheme"]},noSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["nosec"]}},required:["scheme"]},autoSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["auto"]}},required:["scheme"]},comboSecurityScheme:{oneOf:[{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["combo"]},oneOf:{type:"array",minItems:2,items:{type:"string"}}},required:["scheme","oneOf"]},{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["combo"]},allOf:{type:"array",minItems:2,items:{type:"string"}}},required:["scheme","allOf"]}]},basicSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["basic"]},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme","in"]},digestSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["digest"]},qop:{type:"string",enum:["auth","auth-int"]},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme","in","qop"]},apiKeySecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["apikey"]},in:{type:"string",enum:["header","query","body","uri","auto","cookie"]},name:{type:"string"}},required:["scheme","in"]},bearerSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["bearer"]},authorization:{$ref:"#/definitions/anyUri"},alg:{type:"string"},format:{type:"string"},in:{type:"string",enum:["header","query","body","cookie","auto"]},name:{type:"string"}},required:["scheme","alg","format","in"]},pskSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["psk"]},identity:{type:"string"}},required:["scheme"]},oAuth2SecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",enum:["oauth2"]},authorization:{$ref:"#/definitions/anyUri"},token:{$ref:"#/definitions/anyUri"},refresh:{$ref:"#/definitions/anyUri"},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},flow:{anyOf:[{type:"string"},{type:"string",enum:["code","client","device"]}]}},required:["scheme"]},securityScheme:{oneOf:[{$ref:"#/definitions/noSecurityScheme"},{$ref:"#/definitions/autoSecurityScheme"},{$ref:"#/definitions/comboSecurityScheme"},{$ref:"#/definitions/basicSecurityScheme"},{$ref:"#/definitions/digestSecurityScheme"},{$ref:"#/definitions/apiKeySecurityScheme"},{$ref:"#/definitions/bearerSecurityScheme"},{$ref:"#/definitions/pskSecurityScheme"},{$ref:"#/definitions/oAuth2SecurityScheme"},{$ref:"#/definitions/additionalSecurityScheme"}]}},type:"object",properties:{id:{type:"string",format:"uri"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},properties:{type:"object",additionalProperties:{$ref:"#/definitions/property_element"}},actions:{type:"object",additionalProperties:{$ref:"#/definitions/action_element"}},events:{type:"object",additionalProperties:{$ref:"#/definitions/event_element"}},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},version:{type:"object",properties:{instance:{type:"string"}},required:["instance"]},links:{type:"array",items:{oneOf:[{$ref:"#/definitions/link_element"},{$ref:"#/definitions/icon_link_element"}]}},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_root"}},base:{$ref:"#/definitions/anyUri"},securityDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/securityScheme"}},schemaDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/dataSchema"}},support:{$ref:"#/definitions/anyUri"},created:{type:"string",format:"date-time"},modified:{type:"string",format:"date-time"},profile:{oneOf:[{$ref:"#/definitions/anyUri"},{type:"array",minItems:1,items:{$ref:"#/definitions/anyUri"}}]},security:{oneOf:[{type:"string"},{type:"array",minItems:1,items:{type:"string"}}]},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"}},"@type":{$ref:"#/definitions/type_declaration"},"@context":{$ref:"#/definitions/thing-context"}},required:["title","security","securityDefinitions","@context"],additionalProperties:!0},rv={title:"Thing Model",version:"1.1-05-September-2022",description:"JSON Schema for validating Thing Models. This is automatically generated from the WoT TD Schema.",$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/w3c/wot-thing-description/main/validation/tm-json-schema-validation.json",definitions:{anyUri:{type:"string"},description:{type:"string"},descriptions:{type:"object",additionalProperties:{type:"string"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},title:{type:"string"},titles:{type:"object",additionalProperties:{type:"string"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},security:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},subprotocol:{type:"string",examples:["longpoll","websub","sse"]},"thing-context-td-uri-v1":{type:"string",const:"https://www.w3.org/2019/wot/td/v1"},"thing-context-td-uri-v1.1":{type:"string",const:"https://www.w3.org/2022/wot/td/v1.1"},"thing-context-td-uri-temp":{type:"string",const:"http://www.w3.org/ns/td"},"thing-context":{anyOf:[{$comment:"New context URI with other vocabularies after it but not the old one",type:"array",items:[{$ref:"#/definitions/thing-context-td-uri-v1.1"}],additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}],not:{$ref:"#/definitions/thing-context-td-uri-v1"}}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1.1"},{$comment:"Old context URI, followed by the new one and possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"},{$ref:"#/definitions/thing-context-td-uri-v1.1"}],minItems:2,contains:{$ref:"#/definitions/thing-context-td-uri-v1.1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Old context URI, followed by possibly other vocabularies. minItems and contains are required since prefixItems does not say all items should be provided",type:"array",prefixItems:[{$ref:"#/definitions/thing-context-td-uri-v1"}],minItems:1,contains:{$ref:"#/definitions/thing-context-td-uri-v1"},additionalItems:{anyOf:[{$ref:"#/definitions/anyUri"},{type:"object"}]}},{$comment:"Only the new context URI",$ref:"#/definitions/thing-context-td-uri-v1"}]},bcp47_string:{type:"string",pattern:"^(((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+)|((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$"},type_declaration:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},"dataSchema-type":{type:"string",anyOf:[{enum:["boolean","integer","number","string","object","array","null"]},{$ref:"#/definitions/placeholder-pattern"}]},dataSchema:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},title:{$ref:"#/definitions/title"},descriptions:{$ref:"#/definitions/descriptions"},titles:{$ref:"#/definitions/titles"},writeOnly:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},readOnly:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/placeholder-pattern"}]},format:{type:"string"},const:{},default:{},contentEncoding:{type:"string"},contentMediaType:{type:"string"},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},minItems:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/placeholder-pattern"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/placeholder-pattern"}]},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},maxLength:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{anyOf:[{type:"array",items:{type:"string"}},{$ref:"#/definitions/placeholder-pattern"}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},additionalResponsesDefinition:{type:"array",items:{type:"object",properties:{contentType:{type:"string"},schema:{type:"string"},success:{type:"boolean"}}}},multipleOfDefinition:{anyOf:[{type:["integer","number"],exclusiveMinimum:0},{$ref:"#/definitions/placeholder-pattern"}]},expectedResponse:{type:"object",properties:{contentType:{type:"string"}},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form_element_base:{type:"object",properties:{op:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},href:{$ref:"#/definitions/anyUri"},contentType:{type:"string"},contentCoding:{type:"string"},subprotocol:{$ref:"#/definitions/subprotocol"},security:{$ref:"#/definitions/security"},scopes:{$ref:"#/definitions/scopes"},response:{$ref:"#/definitions/expectedResponse"},additionalResponses:{$ref:"#/definitions/additionalResponsesDefinition"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form_element_property:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",anyOf:[{enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]},{$ref:"#/definitions/placeholder-pattern"}]},{type:"array",items:{type:"string",anyOf:[{enum:["readproperty","writeproperty","observeproperty","unobserveproperty"]},{$ref:"#/definitions/placeholder-pattern"}]}}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form_element_action:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",anyOf:[{enum:["invokeaction","queryaction","cancelaction"]},{$ref:"#/definitions/placeholder-pattern"}]},{type:"array",items:{type:"string",anyOf:[{enum:["invokeaction","queryaction","cancelaction"]},{$ref:"#/definitions/placeholder-pattern"}]}}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form_element_event:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",anyOf:[{enum:["subscribeevent","unsubscribeevent"]},{$ref:"#/definitions/placeholder-pattern"}]},{type:"array",items:{type:"string",anyOf:[{enum:["subscribeevent","unsubscribeevent"]},{$ref:"#/definitions/placeholder-pattern"}]}}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form_element_root:{allOf:[{$ref:"#/definitions/form_element_base"}],type:"object",properties:{op:{oneOf:[{type:"string",anyOf:[{enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]},{$ref:"#/definitions/placeholder-pattern"}]},{type:"array",items:{type:"string",anyOf:[{enum:["readallproperties","writeallproperties","readmultipleproperties","writemultipleproperties","observeallproperties","unobserveallproperties","queryallactions","subscribeallevents","unsubscribeallevents"]},{$ref:"#/definitions/placeholder-pattern"}]}}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},form:{$comment:"This is NOT for validation purposes but for automatic generation of TS types. For more info, please see: https://github.com/w3c/wot-thing-description/pull/1319#issuecomment-994950057",oneOf:[{$ref:"#/definitions/form_element_property"},{$ref:"#/definitions/form_element_action"},{$ref:"#/definitions/form_element_event"},{$ref:"#/definitions/form_element_root"}]},property_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_property"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},observable:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},writeOnly:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},readOnly:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},oneOf:{type:"array",items:{$ref:"#/definitions/dataSchema"}},unit:{type:"string"},enum:{anyOf:[{type:"array",minItems:1,uniqueItems:!0},{$ref:"#/definitions/placeholder-pattern"}]},format:{type:"string"},const:{},default:{},type:{$ref:"#/definitions/dataSchema-type"},items:{oneOf:[{$ref:"#/definitions/dataSchema"},{type:"array",items:{$ref:"#/definitions/dataSchema"}}]},maxItems:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},minItems:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},minimum:{anyOf:[{type:"number"},{$ref:"#/definitions/placeholder-pattern"}]},maximum:{anyOf:[{type:"number"},{$ref:"#/definitions/placeholder-pattern"}]},exclusiveMinimum:{type:"number"},exclusiveMaximum:{type:"number"},minLength:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},maxLength:{anyOf:[{type:"integer",minimum:0},{$ref:"#/definitions/placeholder-pattern"}]},multipleOf:{$ref:"#/definitions/multipleOfDefinition"},properties:{additionalProperties:{$ref:"#/definitions/dataSchema"}},required:{anyOf:[{type:"array",items:{type:"string"}},{$ref:"#/definitions/placeholder-pattern"}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},action_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_action"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},input:{$ref:"#/definitions/dataSchema"},output:{$ref:"#/definitions/dataSchema"},safe:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},idempotent:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},synchronous:{anyOf:[{type:"boolean"},{$ref:"#/definitions/placeholder-pattern"}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},event_element:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_event"}},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},subscription:{$ref:"#/definitions/dataSchema"},data:{$ref:"#/definitions/dataSchema"},dataResponse:{$ref:"#/definitions/dataSchema"},cancellation:{$ref:"#/definitions/dataSchema"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},base_link_element:{type:"object",properties:{href:{$ref:"#/definitions/anyUri"},type:{type:"string"},rel:{type:"string"},anchor:{$ref:"#/definitions/anyUri"},hreflang:{anyOf:[{$ref:"#/definitions/bcp47_string"},{type:"array",items:{$ref:"#/definitions/bcp47_string"}}]},instanceName:{type:"string"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{not:{description:"A basic link element should not contain sizes",type:"object",properties:{sizes:{}},required:["sizes"]}},{not:{description:"A basic link element should not contain icon",properties:{rel:{anyOf:[{enum:["icon"]},{$ref:"#/definitions/placeholder-pattern"}]}},required:["rel"]}}]},icon_link_element:{allOf:[{$ref:"#/definitions/base_link_element"},{properties:{rel:{const:"icon"},sizes:{type:"string",pattern:"[0-9]*x[0-9]+"}},required:["rel"]}]},additionalSecurityScheme:{description:"Applies to additional SecuritySchemes not defined in the WoT TD specification.",$comment:"Additional SecuritySchemes should always be defined via a context extension, using a prefixed value for the scheme. This prefix (e.g. 'ace', see the example below) must contain at least one character in order to reference a valid JSON-LD context extension.",examples:[{scheme:"ace:ACESecurityScheme","ace:as":"coaps://as.example.com/token","ace:audience":"coaps://rs.example.com","ace:scopes":["limited","special"],"ace:cnonce":!0}],type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",pattern:".+:.*"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},noSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["nosec"]},{$ref:"#/definitions/placeholder-pattern"}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},autoSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["auto"]},{$ref:"#/definitions/placeholder-pattern"}]}},not:{required:["name"]},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},comboSecurityScheme:{oneOf:[{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["combo"]},{$ref:"#/definitions/placeholder-pattern"}]},oneOf:{type:"array",minItems:2,items:{type:"string"}},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0},{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["combo"]},{$ref:"#/definitions/placeholder-pattern"}]},allOf:{type:"array",minItems:2,items:{type:"string"}},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0}]},basicSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["basic"]},{$ref:"#/definitions/placeholder-pattern"}]},in:{type:"string",anyOf:[{enum:["header","query","body","cookie","auto"]},{$ref:"#/definitions/placeholder-pattern"}]},name:{type:"string"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},digestSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["digest"]},{$ref:"#/definitions/placeholder-pattern"}]},qop:{type:"string",anyOf:[{enum:["auth","auth-int"]},{$ref:"#/definitions/placeholder-pattern"}]},in:{type:"string",anyOf:[{enum:["header","query","body","cookie","auto"]},{$ref:"#/definitions/placeholder-pattern"}]},name:{type:"string"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},apiKeySecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["apikey"]},{$ref:"#/definitions/placeholder-pattern"}]},in:{type:"string",anyOf:[{enum:["header","query","body","cookie","uri","auto"]},{$ref:"#/definitions/placeholder-pattern"}]},name:{type:"string"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},bearerSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["bearer"]},{$ref:"#/definitions/placeholder-pattern"}]},authorization:{$ref:"#/definitions/anyUri"},alg:{type:"string"},format:{type:"string"},in:{type:"string",anyOf:[{enum:["header","query","body","cookie","auto"]},{$ref:"#/definitions/placeholder-pattern"}]},name:{type:"string"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},pskSecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["psk"]},{$ref:"#/definitions/placeholder-pattern"}]},identity:{type:"string"},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},oAuth2SecurityScheme:{type:"object",properties:{"@type":{$ref:"#/definitions/type_declaration"},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},proxy:{$ref:"#/definitions/anyUri"},scheme:{type:"string",anyOf:[{enum:["oauth2"]},{$ref:"#/definitions/placeholder-pattern"}]},authorization:{$ref:"#/definitions/anyUri"},token:{$ref:"#/definitions/anyUri"},refresh:{$ref:"#/definitions/anyUri"},scopes:{oneOf:[{type:"array",items:{type:"string"}},{type:"string"}]},flow:{anyOf:[{type:"string"},{type:"string",anyOf:[{enum:["code","client","device"]},{$ref:"#/definitions/placeholder-pattern"}]}]},"tm:ref":{$ref:"#/definitions/tm_ref"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},securityScheme:{anyOf:[{$ref:"#/definitions/noSecurityScheme"},{$ref:"#/definitions/autoSecurityScheme"},{$ref:"#/definitions/comboSecurityScheme"},{$ref:"#/definitions/basicSecurityScheme"},{$ref:"#/definitions/digestSecurityScheme"},{$ref:"#/definitions/apiKeySecurityScheme"},{$ref:"#/definitions/bearerSecurityScheme"},{$ref:"#/definitions/pskSecurityScheme"},{$ref:"#/definitions/oAuth2SecurityScheme"},{$ref:"#/definitions/additionalSecurityScheme"}]},tm_type_declaration:{oneOf:[{type:"string",const:"tm:ThingModel"},{type:"array",items:{type:"string"},contains:{const:"tm:ThingModel"}}]},"placeholder-pattern":{type:"string",pattern:"^.*[{]{2}[ -~]+[}]{2}.*$"},tm_optional:{type:"array",items:{$comment:"this first checks for the general structure of /properties/myProp and then prohibits using / 3 times",allOf:[{type:"string",pattern:"^((/properties/)|(/actions/)|(/events/))(([^/]))",$comment:"regex tests available at https://regex101.com/r/UgOzrJ/1"},{not:{type:"string",pattern:"(/)(.*\\1){2}",$comment:"regex tests available at https://regex101.com/r/Ytzd72/1"}}]}},tm_ref:{type:"string",format:"uri-reference"}},type:"object",properties:{id:{type:"string"},title:{$ref:"#/definitions/title"},titles:{$ref:"#/definitions/titles"},properties:{type:"object",additionalProperties:{$ref:"#/definitions/property_element"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},actions:{type:"object",additionalProperties:{$ref:"#/definitions/action_element"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},events:{type:"object",additionalProperties:{$ref:"#/definitions/event_element"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},description:{$ref:"#/definitions/description"},descriptions:{$ref:"#/definitions/descriptions"},version:{anyOf:[{type:"object",properties:{model:{type:"string"}},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}},not:{type:"object",properties:{instance:{type:"string"}},required:["instance"]}},{$ref:"#/definitions/placeholder-pattern"}]},links:{type:"array",items:{oneOf:[{$ref:"#/definitions/link_element"},{$ref:"#/definitions/icon_link_element"}]}},forms:{type:"array",minItems:1,items:{$ref:"#/definitions/form_element_root"}},base:{$ref:"#/definitions/anyUri"},securityDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/securityScheme"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},schemaDefinitions:{type:"object",minProperties:1,additionalProperties:{$ref:"#/definitions/dataSchema"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},support:{$ref:"#/definitions/anyUri"},created:{type:"string"},modified:{type:"string"},profile:{oneOf:[{$ref:"#/definitions/anyUri"},{type:"array",minItems:1,items:{$ref:"#/definitions/anyUri"}}]},security:{oneOf:[{type:"string"},{type:"array",minItems:1,items:{type:"string"}}]},uriVariables:{type:"object",additionalProperties:{$ref:"#/definitions/dataSchema"},propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}}},"@type":{$ref:"#/definitions/tm_type_declaration"},"@context":{$ref:"#/definitions/thing-context"},"tm:optional":{$ref:"#/definitions/tm_optional"}},additionalProperties:!0,propertyNames:{not:{$ref:"#/definitions/placeholder-pattern"}},required:["@context","@type"]};function nv(e,t,{checkDefaults:r=!0,checkJsonLd:n=!0}){return new Promise((i,o)=>{typeof e!="string"&&o("Thing Description input should be a String"),r===void 0&&(r=!0),n===void 0&&(n=!0),typeof t!="function"&&o("Expected logFunc to be a function");const s={json:null,schema:null,defaults:null,jsonld:null,additional:null},a={enumConst:null,propItems:null,security:null,propUniqueness:null,multiLangConsistency:null,linksRelTypeCount:null,readWriteOnly:null,uriVariableSecurity:null},l={enumConst:"Checking whether a data schema has enum and const at the same time.",propItems:"Checking whether a data schema has an object but not properties or array but no items.",security:"Check if used Security definitions are properly defined previously.",propUniqueness:"Checking whether in one interaction pattern there are duplicate names, e.g. two properties called temp.",multiLangConsistency:"Checks whether all titles and descriptions have the same language fields.",linksRelTypeCount:"Checks whether rel:type is used more than once in the links array",readWriteOnly:"Warns if a property has readOnly or writeOnly set to true conflicting with another property.",uriVariableSecurity:"Checks if the name of an APIKey security scheme with in:uri show up in href and does not conflict with normal uriVariables"},c={json:null,schema:null};let f;try{f=JSON.parse(e),s.json="passed"}catch(_){s.json="failed",t("X JSON validation failed:"),c.json=_.message,t(_),i({report:s,details:a,detailComments:l,validationErrors:c})}let d=new gl({strict:!1});d=Kl(d),d.addSchema(Gr,"td"),d.validate("td",f)?(s.schema="passed",r&&(d.addSchema(tv,"fulltd"),d.validate("fulltd",f)?s.defaults="passed":(s.defaults="warning",t("Optional validation failed:"),t("> "+d.errorsText(v(d.errors))),i({report:s,details:a,detailComments:l,validationErrors:c}))),u(f),h(f),g(f),a.security=y(Xg(f)),a.propUniqueness=y(nf(e)),a.propUniqueness==="passed"?a.propUniqueness=m(e,f):m(e,f),a.multiLangConsistency=y(sf(f)),a.linksRelTypeCount=y(of(f)),a.uriVariableSecurity=y(Yg(f)),s.additional="passed",Object.keys(a).forEach(_=>{a[_]==="warning"&&s.additional==="passed"?s.additional="warning":a[_]==="failed"&&s.additional!=="failed"&&(s.additional="failed")})):(s.schema="failed",t("X JSON Schema validation failed:"),c.schema=d.errorsText(v(d.errors)),t("> "+c.schema),i({report:s,details:a,detailComments:l,validationErrors:c})),n?Ka.toRDF(f,{format:"application/nquads"}).then(_=>{s.jsonld="passed",i({report:s,details:a,detailComments:l})},_=>{s.jsonld="failed",t("X JSON-LD validation failed:"),t("Hint: Make sure you have internet connection available."),t("> "+_),i({report:s,details:a,detailComments:l})}):i({report:s,details:a,detailComments:l});function u(_){if(a.enumConst="passed",Object.prototype.hasOwnProperty.call(_,"properties")){let w=Object.keys(_.properties);for(let O=0;O<w.length;O++){const $=w[O],j=_.properties[$];Object.prototype.hasOwnProperty.call(j,"enum")&&Object.prototype.hasOwnProperty.call(j,"const")&&(a.enumConst="warning",t("! Warning: In property "+$+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}if(Object.prototype.hasOwnProperty.call(_,"actions")){let w=Object.keys(_.actions);for(let O=0;O<w.length;O++){const $=w[O],j=_.actions[$];if(Object.prototype.hasOwnProperty.call(j,"input")){const D=j.input;Object.prototype.hasOwnProperty.call(D,"enum")&&Object.prototype.hasOwnProperty.call(D,"const")&&(a.enumConst="warning",t("! Warning: In the input of action "+$+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}if(Object.prototype.hasOwnProperty.call(j,"output")){const D=j.output;Object.prototype.hasOwnProperty.call(D,"enum")&&Object.prototype.hasOwnProperty.call(D,"const")&&(a.enumConst="warning",t("! Warning: In the output of action "+$+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}}if(Object.prototype.hasOwnProperty.call(_,"events")){let w=Object.keys(_.events);for(let O=0;O<w.length;O++){const $=w[O],j=_.events[$];Object.prototype.hasOwnProperty.call(j,"enum")&&Object.prototype.hasOwnProperty.call(j,"const")&&(a.enumConst="warning",t("! Warning: In event "+$+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}}function h(_){if(a.propItems="passed",Object.prototype.hasOwnProperty.call(_,"properties")){let w=Object.keys(_.properties);for(let O=0;O<w.length;O++){const $=w[O],j=_.properties[$];Object.prototype.hasOwnProperty.call(j,"type")&&(j.type==="object"&&!Object.prototype.hasOwnProperty.call(j,"properties")&&(a.propItems="warning",t("! Warning: In property "+$+", the type is object but its properties are not specified")),j.type==="array"&&!Object.prototype.hasOwnProperty.call(j,"items")&&(a.propItems="warning",t("! Warning: In property "+$+", the type is array but its items are not specified")))}}if(Object.prototype.hasOwnProperty.call(_,"actions")){let w=Object.keys(_.actions);for(let O=0;O<w.length;O++){const $=w[O],j=_.actions[$];if(Object.prototype.hasOwnProperty.call(j,"input")){const D=j.input;Object.prototype.hasOwnProperty.call(D,"type")&&(D.type==="object"&&!Object.prototype.hasOwnProperty.call(D,"properties")&&(a.propItems="warning",t("! Warning: In the input of action "+$+", the type is object but its properties are not specified")),D.type==="array"&&!Object.prototype.hasOwnProperty.call(D,"items")&&(a.propItems="warning",t("! Warning: In the output of action "+$+", the type is array but its items are not specified")))}if(Object.prototype.hasOwnProperty.call(j,"output")){const D=j.output;Object.prototype.hasOwnProperty.call(D,"type")&&(D.type==="object"&&!Object.prototype.hasOwnProperty.call(D,"properties")&&(a.propItems="warning",t("! Warning: In the output of action "+$+", the type is object but its properties are not specified")),D.type==="array"&&!Object.prototype.hasOwnProperty.call(D,"items")&&(a.propItems="warning",t("! Warning: In the output of action "+$+", the type is array but its items are not specified")))}}}if(Object.prototype.hasOwnProperty.call(_,"events")){let w=Object.keys(_.events);for(let O=0;O<w.length;O++){const $=w[O],j=_.events[$];Object.prototype.hasOwnProperty.call(j,"type")&&(j.type==="object"&&!Object.prototype.hasOwnProperty.call(j,"properties")&&(a.propItems="warning",t("! Warning: In event "+$+", the type is object but its properties are not specified")),j.type==="array"&&!Object.prototype.hasOwnProperty.call(j,"items")&&(a.propItems="warning",t("! Warning: In event "+$+", the type is array but its items are not specified")))}}}function g(_){if(a.readWriteOnly="passed",Object.prototype.hasOwnProperty.call(_,"properties")){let w=Object.keys(_.properties);for(let O=0;O<w.length;O++){const $=w[O],j=_.properties[$];if(Object.prototype.hasOwnProperty.call(j,"readOnly")&&j.readOnly===!0&&(Object.prototype.hasOwnProperty.call(j,"writeOnly")&&j.writeOnly===!0&&(a.readWriteOnly="warning",t("! Warning: In property "+$+", both readOnly and writeOnly are set to true!")),Object.prototype.hasOwnProperty.call(j,"forms"))){for(const D in j.forms)if(Object.prototype.hasOwnProperty.call(j.forms,D)){const z=j.forms[D];Object.prototype.hasOwnProperty.call(z,"op")?(typeof z.op=="string"&&z.op==="writeproperty"||typeof z.op=="object"&&z.op.some(oe=>oe==="writeproperty"))&&(a.readWriteOnly="warning",t("! Warning: In property "+$+" in forms["+D+'], readOnly is set but the op property contains "writeproperty"')):(a.readWriteOnly="warning",t("! Warning: In property "+$+" in forms["+D+'], readOnly is set but a form op property defaults to ["writeproperty", "readproperty"]'))}}if(Object.prototype.hasOwnProperty.call(j,"writeOnly")&&j.writeOnly===!0){if(Object.prototype.hasOwnProperty.call(j,"forms")){for(const D in j.forms)if(Object.prototype.hasOwnProperty.call(j.forms,D)){const z=j.forms[D];Object.prototype.hasOwnProperty.call(z,"op")?typeof z.op=="string"&&z.op==="readproperty"||typeof z.op=="object"&&z.op.some(oe=>oe==="readproperty")?(a.readWriteOnly="warning",t("! Warning: In property "+$+" in forms["+D+'], writeOnly is set but the op property contains "readproperty"')):(typeof z.op=="string"&&z.op==="observeproperty"||typeof z.op=="object"&&z.op.some(oe=>oe==="observeproperty"))&&(a.readWriteOnly="warning",t("! Warning: In property "+$+" in forms["+D+'], writeOnly is set but the op property contains "observeproperty"')):(a.readWriteOnly="warning",t("! Warning: In property "+$+" in forms["+D+'], writeOnly is set but a form op property defaults to ["writeproperty", "readproperty"]'))}}Object.prototype.hasOwnProperty.call(j,"observable")&&j.observable===!0&&(a.readWriteOnly="warning",t("! Warning: In property "+$+", both writeOnly and observable are set to true!"))}}}}function m(_,w){let O="passed";try{qo.parse(_,!1)}catch($){const j=$.toString(),D=j.indexOf('"'),z=j.slice(D+1),oe=z.indexOf('"'),q=z.slice(0,oe);Object.prototype.hasOwnProperty.call(w.securityDefinitions,q)&&(O="failed",t("KO Error: The securityDefinitions contain a duplicate"))}return O}function y(_){let w="passed";return _.forEach(O=>{O.Status==="fail"&&(w="failed",t("KO Error: Assertion: "+O.ID),t(O.Comment))}),w}function v(_){const w=[];return _.forEach(O=>{w.some($=>$.dataPath===O.dataPath&&$.message===O.message)||w.push(O)}),w}})}function iv(e,t,{checkDefaults:r=!0,checkJsonLd:n=!0}){return new Promise((i,o)=>{typeof e!="string"&&o("Thing Model input should be a String"),r===void 0&&(r=!0),n===void 0&&(n=!0),typeof t!="function"&&o("Expected logFunc to be a function");const s={json:null,schema:null,defaults:null,jsonld:null,additional:null},a={enumConst:null,propItems:null,propUniqueness:null,multiLangConsistency:null,linksRelTypeCount:null,readWriteOnly:null,tmOptionalPointer:null},l={enumConst:"Checking whether a data schema has enum and const at the same time.",propItems:"Checking whether a data schema has an object but not properties or array but no items.",propUniqueness:"Checking whether in one interaction pattern there are duplicate names, e.g. two properties called temp.",multiLangConsistency:"Checks whether all titles and descriptions have the same language fields.",linksRelTypeCount:"Checks whether rel:type is used more than once in the links array",readWriteOnly:"Warns if a property has readOnly or writeOnly set to true conflicting with another property.",tmOptionalPointer:"Checking whether tm:optional points to an actual affordance"};let c;try{c=JSON.parse(e),s.json="passed"}catch(v){s.json="failed",t("X JSON validation failed:"),t(v),i({report:s,details:a,detailComments:l})}let f=new gl({strict:!1});f=Ky(f),f=Kl(f),f.addSchema(rv,"tm"),f.validate("tm",c)?(s.schema="passed",p(c),u(c),h(c),a.propUniqueness=m(nf(e)),a.propUniqueness==="passed"?a.propUniqueness=g(e,c):g(e,c),a.multiLangConsistency=m(sf(c)),a.linksRelTypeCount=m(of(c)),a.tmOptionalPointer=m(ev(c)),s.additional="passed",Object.keys(a).forEach(v=>{a[v]==="warning"&&s.additional==="passed"?s.additional="warning":a[v]==="failed"&&s.additional!=="failed"&&(s.additional="failed")})):(s.schema="failed",t("X JSON Schema validation failed:"),t("> "+f.errorsText(y(f.errors))),i({report:s,details:a,detailComments:l})),n?Ka.toRDF(c,{format:"application/nquads"}).then(v=>{s.jsonld="passed",i({report:s,details:a,detailComments:l})},v=>{s.jsonld="failed",t("X JSON-LD validation failed:"),t("Hint: Make sure you have internet connection available."),t("> "+v),i({report:s,details:a,detailComments:l})}):i({report:s,details:a,detailComments:l});function p(v){if(a.enumConst="passed",Object.prototype.hasOwnProperty.call(v,"properties")){let _=Object.keys(v.properties);for(let w=0;w<_.length;w++){const O=_[w],$=v.properties[O];Object.prototype.hasOwnProperty.call($,"enum")&&Object.prototype.hasOwnProperty.call($,"const")&&(a.enumConst="warning",t("! Warning: In property "+O+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}if(Object.prototype.hasOwnProperty.call(v,"actions")){let _=Object.keys(v.actions);for(let w=0;w<_.length;w++){const O=_[w],$=v.actions[O];if(Object.prototype.hasOwnProperty.call($,"input")){const j=$.input;Object.prototype.hasOwnProperty.call(j,"enum")&&Object.prototype.hasOwnProperty.call(j,"const")&&(a.enumConst="warning",t("! Warning: In the input of action "+O+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}if(Object.prototype.hasOwnProperty.call($,"output")){const j=$.output;Object.prototype.hasOwnProperty.call(j,"enum")&&Object.prototype.hasOwnProperty.call(j,"const")&&(a.enumConst="warning",t("! Warning: In the output of action "+O+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}}if(Object.prototype.hasOwnProperty.call(v,"events")){let _=Object.keys(v.events);for(let w=0;w<_.length;w++){const O=_[w],$=v.events[O];Object.prototype.hasOwnProperty.call($,"enum")&&Object.prototype.hasOwnProperty.call($,"const")&&(a.enumConst="warning",t("! Warning: In event "+O+" enum and const are used at the same time, the values in enum can never be valid in the received JSON value"))}}}function u(v){if(a.propItems="passed",Object.prototype.hasOwnProperty.call(v,"properties")){let _=Object.keys(v.properties);for(let w=0;w<_.length;w++){const O=_[w],$=v.properties[O];Object.prototype.hasOwnProperty.call($,"type")&&($.type==="object"&&!Object.prototype.hasOwnProperty.call($,"properties")&&(a.propItems="warning",t("! Warning: In property "+O+", the type is object but its properties are not specified")),$.type==="array"&&!Object.prototype.hasOwnProperty.call($,"items")&&(a.propItems="warning",t("! Warning: In property "+O+", the type is array but its items are not specified")))}}if(Object.prototype.hasOwnProperty.call(v,"actions")){let _=Object.keys(v.actions);for(let w=0;w<_.length;w++){const O=_[w],$=v.actions[O];if(Object.prototype.hasOwnProperty.call($,"input")){const j=$.input;Object.prototype.hasOwnProperty.call(j,"type")&&(j.type==="object"&&!Object.prototype.hasOwnProperty.call(j,"properties")&&(a.propItems="warning",t("! Warning: In the input of action "+O+", the type is object but its properties are not specified")),j.type==="array"&&!Object.prototype.hasOwnProperty.call(j,"items")&&(a.propItems="warning",t("! Warning: In the output of action "+O+", the type is array but its items are not specified")))}if(Object.prototype.hasOwnProperty.call($,"output")){const j=$.output;Object.prototype.hasOwnProperty.call(j,"type")&&(j.type==="object"&&!Object.prototype.hasOwnProperty.call(j,"properties")&&(a.propItems="warning",t("! Warning: In the output of action "+O+", the type is object but its properties are not specified")),j.type==="array"&&!Object.prototype.hasOwnProperty.call(j,"items")&&(a.propItems="warning",t("! Warning: In the output of action "+O+", the type is array but its items are not specified")))}}}if(Object.prototype.hasOwnProperty.call(v,"events")){let _=Object.keys(v.events);for(let w=0;w<_.length;w++){const O=_[w],$=v.events[O];Object.prototype.hasOwnProperty.call($,"type")&&($.type==="object"&&!Object.prototype.hasOwnProperty.call($,"properties")&&(a.propItems="warning",t("! Warning: In event "+O+", the type is object but its properties are not specified")),$.type==="array"&&!Object.prototype.hasOwnProperty.call($,"items")&&(a.propItems="warning",t("! Warning: In event "+O+", the type is array but its items are not specified")))}}}function h(v){if(a.readWriteOnly="passed",Object.prototype.hasOwnProperty.call(v,"properties")){let _=Object.keys(v.properties);for(let w=0;w<_.length;w++){const O=_[w],$=v.properties[O];if(Object.prototype.hasOwnProperty.call($,"readOnly")&&$.readOnly===!0&&(Object.prototype.hasOwnProperty.call($,"writeOnly")&&$.writeOnly===!0&&(a.readWriteOnly="warning",t("! Warning: In property "+O+", both readOnly and writeOnly are set to true!")),Object.prototype.hasOwnProperty.call($,"forms"))){for(const j in $.forms)if(Object.prototype.hasOwnProperty.call($.forms,j)){const D=$.forms[j];Object.prototype.hasOwnProperty.call(D,"op")?(typeof D.op=="string"&&D.op==="writeproperty"||typeof D.op=="object"&&D.op.some(z=>z==="writeproperty"))&&(a.readWriteOnly="warning",t("! Warning: In property "+O+" in forms["+j+'], readOnly is set but the op property contains "writeproperty"')):(a.readWriteOnly="warning",t("! Warning: In property "+O+" in forms["+j+'], readOnly is set but a form op property defaults to ["writeproperty", "readproperty"]'))}}if(Object.prototype.hasOwnProperty.call($,"writeOnly")&&$.writeOnly===!0){if(Object.prototype.hasOwnProperty.call($,"forms")){for(const j in $.forms)if(Object.prototype.hasOwnProperty.call($.forms,j)){const D=$.forms[j];Object.prototype.hasOwnProperty.call(D,"op")?typeof D.op=="string"&&D.op==="readproperty"||typeof D.op=="object"&&D.op.some(z=>z==="readproperty")?(a.readWriteOnly="warning",t("! Warning: In property "+O+" in forms["+j+'], writeOnly is set but the op property contains "readproperty"')):(typeof D.op=="string"&&D.op==="observeproperty"||typeof D.op=="object"&&D.op.some(z=>z==="observeproperty"))&&(a.readWriteOnly="warning",t("! Warning: In property "+O+" in forms["+j+'], writeOnly is set but the op property contains "observeproperty"')):(a.readWriteOnly="warning",t("! Warning: In property "+O+" in forms["+j+'], writeOnly is set but a form op property defaults to ["writeproperty", "readproperty"]'))}}Object.prototype.hasOwnProperty.call($,"observable")&&$.observable===!0&&(a.readWriteOnly="warning",t("! Warning: In property "+O+", both writeOnly and observable are set to true!"))}}}}function g(v,_){let w="passed";try{qo.parse(v,!1)}catch(O){const $=O.toString(),j=$.indexOf('"'),D=$.slice(j+1),z=D.indexOf('"'),oe=D.slice(0,z);Object.prototype.hasOwnProperty.call(_.securityDefinitions,oe)&&(w="failed",t("KO Error: The securityDefinitions contain a duplicate"))}return w}function m(v){let _="passed";return v.forEach(w=>{w.Status==="fail"&&(_="failed",t("KO Error: Assertion: "+w.ID),t(w.Comment))}),_}function y(v){const _=[];return v.forEach(w=>{_.some(O=>O.dataPath===w.dataPath&&O.message===w.message)||_.push(w)}),_}})}const $r="$ref",sv="properties",ov="additional_properties",er="dataSchema",av="#/";cv(Gr);function cv(e){const t=new Map,r=new Map;return _r(t,e,av),t.forEach((n,i)=>{if(n.size>0){const o=(i.match(/\//ig)||[]).length;let s=r.get(o);s?(s.set(i.replace(/^r/g,""),n),r.set(o,s)):(s=new Map,s.set(i.replace(/^r/g,""),n),r.set(o,s))}}),r}function _r(e,t,r){const n=new Set;if(t[$r]){if(r[0]==="r"&&t[$r].includes(er))return;t[$r].includes(er)&&(r="r"+r),_r(Ni(Gr,t[$r]),r);return}if(t.type==="object"){const i=t[sv];for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s))if(s===$r){if(r[0]==="r"&&i[s].includes(er))continue;i[s].includes(er)&&(r="r"+r),_r(Ni(Gr,i[s]),r);return}else _r(i[s],`${r}${s}/`),n.add(s);const o=t[ov];for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s)&&s===$r){if(r[0]==="r"&&o[s].includes(er))continue;o[s].includes(er)&&(r="r"+r),_r(Ni(Gr,o[s]),`${r}*/`);return}af(e,r,n)}if(t.type==="array"){const i=t.items;for(const o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&o===$r){if(r[0]==="r"&&i[o].includes(er))continue;i[o].includes(er)&&(r="r"+r),_r(Ni(Gr,i[o]),r);return}af(e,r,n)}for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&["allOf","oneOf","anyOf"].includes(i)&&Array.isArray(t[i])&&t[i].forEach(o=>{_r(o,r)})}function af(e,t,r){let n=e.get(t);if(n){const i=new Set(n);r.forEach(o=>{i.add(o)}),e.set(t,i)}else e.set(t,r)}function Ni(e,t){const r=t.split("/");if(r[0]!=="#"){console.log("Parsing not implemented for between files");return}let n=e;for(let i=1;i<r.length;i++)n=n[r[i]];return n}const lv=e=>!(typeof e=="object"&&!Array.isArray(e)&&e!==null)||!Object.prototype.hasOwnProperty.call(e,"@type")?!1:e["@type"].indexOf("tm:ThingModel")>-1;self.onmessage=async e=>{console.debug("validation worker received message...");let t=e.data,r={};try{r=JSON.parse(e.data)}catch(n){console.debug(`ran into error while parsing TD: ${n}`),postMessage(void 0)}try{let n;r&&lv(r)?n=await iv(t,console.debug,{}):n=await nv(t,console.debug,{}),postMessage(n)}catch(n){postMessage(void 0),console.debug(n)}console.debug("validation worker sent response...")}})();
